import{c as t,S as e,i as n,s as r,e as o,t as a,b as l,d as s,f as c,g as i,j as h,l as m,m as u,n as f,a as d,q as p,h as v,p as g,o as y,r as E,u as w}from"./client.3bab9fa7.js";const T=t=>((t=new Date(t)).setTime(t.getTime()+324e5),t.toISOString().replace(/\..+/,"+09:00"));function I(t,e,n){const r=t.slice();return r[4]=e[n],r}function L(t,e,n){const r=t.slice();return r[7]=e[n],r}function S(t){let e,n,r=T(t[1].date)+"";return{c(){e=o("time"),n=a(r),this.h()},l(t){e=l(t,"TIME",{class:!0});var o=s(e);n=c(o,r),o.forEach(i),this.h()},h(){h(e,"class","svelte-f4lmv4")},m(t,r){m(t,e,r),u(e,n)},p(t,e){2&e&&r!==(r=T(t[1].date)+"")&&f(n,r)},d(t){t&&i(e)}}}function b(t){let e,n,r,d=t[7]+"";return{c(){e=o("div"),n=a("#"),r=a(d),this.h()},l(t){e=l(t,"DIV",{class:!0});var o=s(e);n=c(o,"#"),r=c(o,d),o.forEach(i),this.h()},h(){h(e,"class","tag svelte-f4lmv4")},m(t,o){m(t,e,o),u(e,n),u(e,r)},p(t,e){2&e&&d!==(d=t[7]+"")&&f(r,d)},d(t){t&&i(e)}}}function D(t){let e,n;return{c(){e=o("div"),n=a("この記事は以前別のところにあったものを移してきたものです。完璧に移植できておらず、表示が崩れているかもしれません。"),this.h()},l(t){e=l(t,"DIV",{class:!0});var r=s(e);n=c(r,"この記事は以前別のところにあったものを移してきたものです。完璧に移植できておらず、表示が崩れているかもしれません。"),r.forEach(i),this.h()},h(){h(e,"class","callout svelte-f4lmv4")},m(t,r){m(t,e,r),u(e,n)},d(t){t&&i(e)}}}function R(t){let e;return{c(){e=a("Loading mentions...")},l(t){e=c(t,"Loading mentions...")},m(t,n){m(t,e,n)},p:g,d(t){t&&i(e)}}}function $(t){let e,n=t[0].children,r=[];for(let e=0;e<n.length;e+=1)r[e]=M(I(t,n,e));let o=null;return n.length||(o=x()),{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=w(),o&&o.c()},l(t){for(let e=0;e<r.length;e+=1)r[e].l(t);e=w(),o&&o.l(t)},m(t,n){for(let e=0;e<r.length;e+=1)r[e].m(t,n);m(t,e,n),o&&o.m(t,n)},p(t,a){if(1&a){let l;for(n=t[0].children,l=0;l<n.length;l+=1){const o=I(t,n,l);r[l]?r[l].p(o,a):(r[l]=M(o),r[l].c(),r[l].m(e.parentNode,e))}for(;l<r.length;l+=1)r[l].d(1);r.length=n.length,n.length?o&&(o.d(1),o=null):o||(o=x(),o.c(),o.m(e.parentNode,e))}},d(t){y(r,t),t&&i(e),o&&o.d(t)}}}function x(t){let e;return{c(){e=a("Twitterで言及していただけると自動的にここに収集されます。")},l(t){e=c(t,"Twitterで言及していただけると自動的にここに収集されます。")},m(t,n){m(t,e,n)},d(t){t&&i(e)}}}function A(t){let e,n,r=t[4].content.text+"";return{c(){e=o("blockquote"),n=a(r),this.h()},l(t){e=l(t,"BLOCKQUOTE",{class:!0});var o=s(e);n=c(o,r),o.forEach(i),this.h()},h(){h(e,"class","svelte-f4lmv4")},m(t,r){m(t,e,r),u(e,n)},p(t,e){1&e&&r!==(r=t[4].content.text+"")&&f(n,r)},d(t){t&&i(e)}}}function M(t){let e,n,r,p,g,y,E,w,I,L,S,b,D,R,$,x=t[4]["wm-property"]+"",M=t[4].author.name+"",O=T(t[4]["wm-received"])+"",U="mention-of"===t[4]["wm-property"]&&A(t);return{c(){e=o("li"),n=o("a"),r=a(x),g=d(),y=o("a"),E=o("img"),L=a(M),b=a("\n          at "),D=a(O),R=d(),U&&U.c(),$=d(),this.h()},l(t){e=l(t,"LI",{});var o=s(e);n=l(o,"A",{href:!0});var a=s(n);r=c(a,x),a.forEach(i),g=v(o),y=l(o,"A",{href:!0});var h=s(y);E=l(h,"IMG",{src:!0,alt:!0,class:!0}),L=c(h,M),h.forEach(i),b=c(o,"\n          at "),D=c(o,O),R=v(o),U&&U.l(o),$=v(o),o.forEach(i),this.h()},h(){h(n,"href",p=t[4].url),E.src!==(w=t[4].author.photo)&&h(E,"src",w),h(E,"alt",I=t[4].author.name),h(E,"class","svelte-f4lmv4"),h(y,"href",S=t[4].author.url)},m(t,o){m(t,e,o),u(e,n),u(n,r),u(e,g),u(e,y),u(y,E),u(y,L),u(e,b),u(e,D),u(e,R),U&&U.m(e,null),u(e,$)},p(t,o){1&o&&x!==(x=t[4]["wm-property"]+"")&&f(r,x),1&o&&p!==(p=t[4].url)&&h(n,"href",p),1&o&&E.src!==(w=t[4].author.photo)&&h(E,"src",w),1&o&&I!==(I=t[4].author.name)&&h(E,"alt",I),1&o&&M!==(M=t[4].author.name+"")&&f(L,M),1&o&&S!==(S=t[4].author.url)&&h(y,"href",S),1&o&&O!==(O=T(t[4]["wm-received"])+"")&&f(D,O),"mention-of"===t[4]["wm-property"]?U?U.p(t,o):(U=A(t),U.c(),U.m(e,$)):U&&(U.d(1),U=null)},d(t){t&&i(e),U&&U.d()}}}function O(e){let n,r,E,w,T,I,x,A,M,O,U,j,H,V,N,k,C,P,_,q,G,z,B,K,Q,F,J,W,X,Y,Z,tt,et,nt=e[1].title+"",rt=e[1].html+"";document.title=n=e[1].title+" - "+new Date(e[1].date).toISOString().slice(0,10)+" | "+t.title;let ot=e[1].date&&S(e),at=e[1].tags||[],lt=[];for(let t=0;t<at.length;t+=1)lt[t]=b(L(e,at,t));let st=e[1].from&&D();function ct(t,e){return t[0]?$:R}let it=ct(e),ht=it(e);return{c(){r=o("meta"),E=o("meta"),T=o("meta"),x=o("meta"),M=o("meta"),U=d(),j=o("header"),H=o("div"),N=d(),k=o("h1"),C=a(nt),P=d(),ot&&ot.c(),_=d(),q=o("div");for(let t=0;t<lt.length;t+=1)lt[t].c();G=d(),z=o("p"),B=o("a"),K=a("更新履歴"),Q=d(),st&&st.c(),F=d(),J=o("div"),W=d(),X=o("section"),Y=o("h1"),Z=a("Recent public mentions on Twitter"),tt=d(),et=o("ol"),ht.c(),this.h()},l(t){const e=p('[data-svelte="svelte-14mnzgr"]',document.head);r=l(e,"META",{property:!0,content:!0}),E=l(e,"META",{property:!0,content:!0}),T=l(e,"META",{property:!0,content:!0}),x=l(e,"META",{property:!0,content:!0}),M=l(e,"META",{property:!0,content:!0}),e.forEach(i),U=v(t),j=l(t,"HEADER",{class:!0});var n=s(j);H=l(n,"DIV",{class:!0,style:!0}),s(H).forEach(i),N=v(n),k=l(n,"H1",{class:!0});var o=s(k);C=c(o,nt),o.forEach(i),P=v(n),ot&&ot.l(n),_=v(n),q=l(n,"DIV",{class:!0});var a=s(q);for(let t=0;t<lt.length;t+=1)lt[t].l(a);a.forEach(i),G=v(n),z=l(n,"P",{class:!0});var h=s(z);B=l(h,"A",{href:!0});var m=s(B);K=c(m,"更新履歴"),m.forEach(i),h.forEach(i),n.forEach(i),Q=v(t),st&&st.l(t),F=v(t),J=l(t,"DIV",{class:!0}),s(J).forEach(i),W=v(t),X=l(t,"SECTION",{class:!0});var u=s(X);Y=l(u,"H1",{class:!0});var f=s(Y);Z=c(f,"Recent public mentions on Twitter"),f.forEach(i),tt=v(u),et=l(u,"OL",{});var d=s(et);ht.l(d),d.forEach(i),u.forEach(i),this.h()},h(){h(r,"property","og:type"),h(r,"content","article"),h(E,"property","og:title"),h(E,"content",w=e[1].title+" - "+new Date(e[1].date).toISOString().slice(0,10)+" | "+t.title),h(T,"property","og:description"),h(T,"content",I=e[1].headline),h(x,"property","og:site_name"),h(x,"content",A=t.title),h(M,"property","og:image"),h(M,"content",O=e[1].header?/^\.{0,2}\//.test(e[1].header)?t.host+"/"+e[1].header:e[1].header:t.host+"/images/default.png"),h(H,"class","img-header svelte-f4lmv4"),h(H,"style",V=e[1].header?`background-image: url(${e[1].header})`:""),h(k,"class","svelte-f4lmv4"),h(q,"class","tags"),h(B,"href",e[2]),h(z,"class","history svelte-f4lmv4"),h(j,"class","svelte-f4lmv4"),h(J,"class","content svelte-f4lmv4"),h(Y,"class","svelte-f4lmv4"),h(X,"class","mentions svelte-f4lmv4")},m(t,e){u(document.head,r),u(document.head,E),u(document.head,T),u(document.head,x),u(document.head,M),m(t,U,e),m(t,j,e),u(j,H),u(j,N),u(j,k),u(k,C),u(j,P),ot&&ot.m(j,null),u(j,_),u(j,q);for(let t=0;t<lt.length;t+=1)lt[t].m(q,null);u(j,G),u(j,z),u(z,B),u(B,K),m(t,Q,e),st&&st.m(t,e),m(t,F,e),m(t,J,e),J.innerHTML=rt,m(t,W,e),m(t,X,e),u(X,Y),u(Y,Z),u(X,tt),u(X,et),ht.m(et,null)},p(e,[r]){if(2&r&&n!==(n=e[1].title+" - "+new Date(e[1].date).toISOString().slice(0,10)+" | "+t.title)&&(document.title=n),2&r&&w!==(w=e[1].title+" - "+new Date(e[1].date).toISOString().slice(0,10)+" | "+t.title)&&h(E,"content",w),2&r&&I!==(I=e[1].headline)&&h(T,"content",I),2&r&&O!==(O=e[1].header?/^\.{0,2}\//.test(e[1].header)?t.host+"/"+e[1].header:e[1].header:t.host+"/images/default.png")&&h(M,"content",O),2&r&&V!==(V=e[1].header?`background-image: url(${e[1].header})`:"")&&h(H,"style",V),2&r&&nt!==(nt=e[1].title+"")&&f(C,nt),e[1].date?ot?ot.p(e,r):(ot=S(e),ot.c(),ot.m(j,_)):ot&&(ot.d(1),ot=null),2&r){let t;for(at=e[1].tags||[],t=0;t<at.length;t+=1){const n=L(e,at,t);lt[t]?lt[t].p(n,r):(lt[t]=b(n),lt[t].c(),lt[t].m(q,null))}for(;t<lt.length;t+=1)lt[t].d(1);lt.length=at.length}4&r&&h(B,"href",e[2]),e[1].from?st||(st=D(),st.c(),st.m(F.parentNode,F)):st&&(st.d(1),st=null),2&r&&rt!==(rt=e[1].html+"")&&(J.innerHTML=rt),it===(it=ct(e))&&ht?ht.p(e,r):(ht.d(1),ht=it(e),ht&&(ht.c(),ht.m(et,null)))},i:g,o:g,d(t){i(r),i(E),i(T),i(x),i(M),t&&i(U),t&&i(j),ot&&ot.d(),y(lt,t),t&&i(Q),st&&st.d(t),t&&i(F),t&&i(J),t&&i(W),t&&i(X),ht.d()}}}var U=function(t,e,n,r){return new(n||(n=Promise))((function(o,a){function l(t){try{c(r.next(t))}catch(t){a(t)}}function s(t){try{c(r.throw(t))}catch(t){a(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(l,s)}c((r=r.apply(t,e||[])).next())}))};function j({params:e}){return U(this,void 0,void 0,(function*(){const n=yield this.fetch(`${e.type}/${e.slug}.json`),r=yield n.json();if(200===n.status)return{post:r,historyURL:`https://github.com/${t.dataGitHubRepo}/commits/master/${e.type}/${e.slug}.md`};this.error(n.status,r.message)}))}function H(e,n,r){var o=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,a){function l(t){try{c(r.next(t))}catch(t){a(t)}}function s(t){try{c(r.throw(t))}catch(t){a(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(l,s)}c((r=r.apply(t,e||[])).next())}))};let{post:a}=n,{historyURL:l}=n,{mentions:s}=n;return E((()=>o(void 0,void 0,void 0,(function*(){const e=yield fetch("https://webmention.io/api/mentions.jf2?target="+encodeURIComponent(t.host+location.pathname.replace(/(?<!\/)$/,"/")));r(0,s=yield e.json())})))),e.$$set=t=>{"post"in t&&r(1,a=t.post),"historyURL"in t&&r(2,l=t.historyURL),"mentions"in t&&r(0,s=t.mentions)},[s,a,l]}export default class extends e{constructor(t){super(),n(this,t,H,O,r,{post:1,historyURL:2,mentions:0})}}export{j as preload};
