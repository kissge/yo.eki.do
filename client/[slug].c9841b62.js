import{c as t,S as e,i as n,s as r,e as s,b as o,d as a,g as l,j as c,l as i,t as h,f as u,m as d,n as m,a as p,q as f,h as g,p as v,o as y,r as E,u as w,H as T}from"./client.331b916a.js";const b=t=>((t=new Date(t)).setTime(t.getTime()+324e5),t.toISOString().replace(/\..+/,"+09:00").replace(/(T|\+09:00)/g,'<span class="date-weak">$1</span>')),L=()=>{class t extends HTMLElement{connectedCallback(){const t=document.createElement("script");Array.from(this.attributes).forEach((e=>t.setAttribute(e.name,e.value)));const e=document.createElement("iframe");e.style.border="0",e.style.width="100%",e.style.height="0",e.srcdoc='<body style="margin: 0">'+this.innerHTML+t.outerHTML,this.innerHTML="",this.appendChild(e);for(let t=0;t<5e3;t+=100)setTimeout((()=>{var t;e.style.height=(null===(t=e.contentDocument.body)||void 0===t?void 0:t.clientHeight)+30+"px"}),t)}}customElements.define("x-script",t)};function I(t,e,n){const r=t.slice();return r[4]=e[n],r}function M(t,e,n){const r=t.slice();return r[7]=e[n],r}function H(t){let e,n=b(t[1].date)+"";return{c(){e=s("time"),this.h()},l(t){e=o(t,"TIME",{class:!0}),a(e).forEach(l),this.h()},h(){c(e,"class","svelte-use3p6")},m(t,r){i(t,e,r),e.innerHTML=n},p(t,r){2&r&&n!==(n=b(t[1].date)+"")&&(e.innerHTML=n)},d(t){t&&l(e)}}}function x(t){let e,n,r,p=t[7]+"";return{c(){e=s("div"),n=h("#"),r=h(p),this.h()},l(t){e=o(t,"DIV",{class:!0});var s=a(e);n=u(s,"#"),r=u(s,p),s.forEach(l),this.h()},h(){c(e,"class","tag svelte-use3p6")},m(t,s){i(t,e,s),d(e,n),d(e,r)},p(t,e){2&e&&p!==(p=t[7]+"")&&m(r,p)},d(t){t&&l(e)}}}function D(t){let e,n;return{c(){e=s("div"),n=h("この記事は以前別のところにあったものを移してきたものです。完璧に移植できておらず、表示が崩れているかもしれません。"),this.h()},l(t){e=o(t,"DIV",{class:!0});var r=a(e);n=u(r,"この記事は以前別のところにあったものを移してきたものです。完璧に移植できておらず、表示が崩れているかもしれません。"),r.forEach(l),this.h()},h(){c(e,"class","callout svelte-use3p6")},m(t,r){i(t,e,r),d(e,n)},d(t){t&&l(e)}}}function S(t){let e;return{c(){e=h("Loading mentions...")},l(t){e=u(t,"Loading mentions...")},m(t,n){i(t,e,n)},p:v,d(t){t&&l(e)}}}function A(t){let e,n=t[0].children,r=[];for(let e=0;e<n.length;e+=1)r[e]=O(I(t,n,e));let s=null;return n.length||(s=$()),{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=w(),s&&s.c()},l(t){for(let e=0;e<r.length;e+=1)r[e].l(t);e=w(),s&&s.l(t)},m(t,n){for(let e=0;e<r.length;e+=1)r[e].m(t,n);i(t,e,n),s&&s.m(t,n)},p(t,o){if(1&o){let a;for(n=t[0].children,a=0;a<n.length;a+=1){const s=I(t,n,a);r[a]?r[a].p(s,o):(r[a]=O(s),r[a].c(),r[a].m(e.parentNode,e))}for(;a<r.length;a+=1)r[a].d(1);r.length=n.length,n.length?s&&(s.d(1),s=null):s||(s=$(),s.c(),s.m(e.parentNode,e))}},d(t){y(r,t),t&&l(e),s&&s.d(t)}}}function $(t){let e;return{c(){e=h("Twitterで言及していただけると自動的にここに収集されます。")},l(t){e=u(t,"Twitterで言及していただけると自動的にここに収集されます。")},m(t,n){i(t,e,n)},d(t){t&&l(e)}}}function R(t){let e,n,r=t[4].content.text+"";return{c(){e=s("blockquote"),n=h(r),this.h()},l(t){e=o(t,"BLOCKQUOTE",{class:!0});var s=a(e);n=u(s,r),s.forEach(l),this.h()},h(){c(e,"class","svelte-use3p6")},m(t,r){i(t,e,r),d(e,n)},p(t,e){1&e&&r!==(r=t[4].content.text+"")&&m(n,r)},d(t){t&&l(e)}}}function O(t){let e,n,r,f,v,y,E,w,L,I,M,H,x,D,S,A=t[4]["wm-property"]+"",$=t[4].author.name+"",O=b(t[4].published||t[4]["wm-received"])+"",U="mention-of"===t[4]["wm-property"]&&R(t);return{c(){e=s("li"),n=s("a"),r=h(A),v=p(),y=s("a"),E=s("img"),I=h($),H=h("\n          at "),D=p(),U&&U.c(),S=p(),this.h()},l(t){e=o(t,"LI",{});var s=a(e);n=o(s,"A",{href:!0});var c=a(n);r=u(c,A),c.forEach(l),v=g(s),y=o(s,"A",{href:!0});var i=a(y);E=o(i,"IMG",{src:!0,alt:!0,class:!0}),I=u(i,$),i.forEach(l),H=u(s,"\n          at "),D=g(s),U&&U.l(s),S=g(s),s.forEach(l),this.h()},h(){c(n,"href",f=t[4].url),E.src!==(w=t[4].author.photo)&&c(E,"src",w),c(E,"alt",L=t[4].author.name),c(E,"class","svelte-use3p6"),c(y,"href",M=t[4].author.url),x=new T(D)},m(t,s){i(t,e,s),d(e,n),d(n,r),d(e,v),d(e,y),d(y,E),d(y,I),d(e,H),x.m(O,e),d(e,D),U&&U.m(e,null),d(e,S)},p(t,s){1&s&&A!==(A=t[4]["wm-property"]+"")&&m(r,A),1&s&&f!==(f=t[4].url)&&c(n,"href",f),1&s&&E.src!==(w=t[4].author.photo)&&c(E,"src",w),1&s&&L!==(L=t[4].author.name)&&c(E,"alt",L),1&s&&$!==($=t[4].author.name+"")&&m(I,$),1&s&&M!==(M=t[4].author.url)&&c(y,"href",M),1&s&&O!==(O=b(t[4].published||t[4]["wm-received"])+"")&&x.p(O),"mention-of"===t[4]["wm-property"]?U?U.p(t,s):(U=R(t),U.c(),U.m(e,S)):U&&(U.d(1),U=null)},d(t){t&&l(e),U&&U.d()}}}function U(e){let n,r,E,w,T,b,L,I,$,R,O,U,j,C,k,V,N,P,_,q,G,z,B,K,Q,F,J,W,X,Y,Z,tt,et,nt=e[1].title+"",rt=e[1].html+"";document.title=n=e[1].title+" - "+new Date(e[1].date).toISOString().slice(0,10)+" | "+t.title;let st=e[1].date&&H(e),ot=e[1].tags||[],at=[];for(let t=0;t<ot.length;t+=1)at[t]=x(M(e,ot,t));let lt=e[1].from&&D();function ct(t,e){return t[0]?A:S}let it=ct(e),ht=it(e);return{c(){r=s("meta"),E=s("meta"),T=s("meta"),L=s("meta"),$=s("meta"),O=p(),U=s("header"),j=s("div"),k=p(),V=s("h1"),N=h(nt),P=p(),st&&st.c(),_=p(),q=s("div");for(let t=0;t<at.length;t+=1)at[t].c();G=p(),z=s("p"),B=s("a"),K=h("更新履歴"),Q=p(),lt&&lt.c(),F=p(),J=s("div"),W=p(),X=s("section"),Y=s("h1"),Z=h("Recent public mentions on Twitter"),tt=p(),et=s("ol"),ht.c(),this.h()},l(t){const e=f('[data-svelte="svelte-14mnzgr"]',document.head);r=o(e,"META",{property:!0,content:!0}),E=o(e,"META",{property:!0,content:!0}),T=o(e,"META",{property:!0,content:!0}),L=o(e,"META",{property:!0,content:!0}),$=o(e,"META",{property:!0,content:!0}),e.forEach(l),O=g(t),U=o(t,"HEADER",{class:!0});var n=a(U);j=o(n,"DIV",{class:!0,style:!0}),a(j).forEach(l),k=g(n),V=o(n,"H1",{class:!0});var s=a(V);N=u(s,nt),s.forEach(l),P=g(n),st&&st.l(n),_=g(n),q=o(n,"DIV",{class:!0});var c=a(q);for(let t=0;t<at.length;t+=1)at[t].l(c);c.forEach(l),G=g(n),z=o(n,"P",{class:!0});var i=a(z);B=o(i,"A",{href:!0});var h=a(B);K=u(h,"更新履歴"),h.forEach(l),i.forEach(l),n.forEach(l),Q=g(t),lt&&lt.l(t),F=g(t),J=o(t,"DIV",{class:!0}),a(J).forEach(l),W=g(t),X=o(t,"SECTION",{class:!0});var d=a(X);Y=o(d,"H1",{class:!0});var m=a(Y);Z=u(m,"Recent public mentions on Twitter"),m.forEach(l),tt=g(d),et=o(d,"OL",{});var p=a(et);ht.l(p),p.forEach(l),d.forEach(l),this.h()},h(){c(r,"property","og:type"),c(r,"content","article"),c(E,"property","og:title"),c(E,"content",w=e[1].title+" - "+new Date(e[1].date).toISOString().slice(0,10)+" | "+t.title),c(T,"property","og:description"),c(T,"content",b=e[1].headline),c(L,"property","og:site_name"),c(L,"content",I=t.title),c($,"property","og:image"),c($,"content",R=e[1].header?/^\.{0,2}\//.test(e[1].header)?t.host+"/"+e[1].header:e[1].header:t.host+"/images/default.png"),c(j,"class","img-header svelte-use3p6"),c(j,"style",C=e[1].header?`background-image: url(${e[1].header})`:""),c(V,"class","svelte-use3p6"),c(q,"class","tags"),c(B,"href",e[2]),c(z,"class","history svelte-use3p6"),c(U,"class","svelte-use3p6"),c(J,"class","content svelte-use3p6"),c(Y,"class","svelte-use3p6"),c(X,"class","mentions svelte-use3p6")},m(t,e){d(document.head,r),d(document.head,E),d(document.head,T),d(document.head,L),d(document.head,$),i(t,O,e),i(t,U,e),d(U,j),d(U,k),d(U,V),d(V,N),d(U,P),st&&st.m(U,null),d(U,_),d(U,q);for(let t=0;t<at.length;t+=1)at[t].m(q,null);d(U,G),d(U,z),d(z,B),d(B,K),i(t,Q,e),lt&&lt.m(t,e),i(t,F,e),i(t,J,e),J.innerHTML=rt,i(t,W,e),i(t,X,e),d(X,Y),d(Y,Z),d(X,tt),d(X,et),ht.m(et,null)},p(e,[r]){if(2&r&&n!==(n=e[1].title+" - "+new Date(e[1].date).toISOString().slice(0,10)+" | "+t.title)&&(document.title=n),2&r&&w!==(w=e[1].title+" - "+new Date(e[1].date).toISOString().slice(0,10)+" | "+t.title)&&c(E,"content",w),2&r&&b!==(b=e[1].headline)&&c(T,"content",b),2&r&&R!==(R=e[1].header?/^\.{0,2}\//.test(e[1].header)?t.host+"/"+e[1].header:e[1].header:t.host+"/images/default.png")&&c($,"content",R),2&r&&C!==(C=e[1].header?`background-image: url(${e[1].header})`:"")&&c(j,"style",C),2&r&&nt!==(nt=e[1].title+"")&&m(N,nt),e[1].date?st?st.p(e,r):(st=H(e),st.c(),st.m(U,_)):st&&(st.d(1),st=null),2&r){let t;for(ot=e[1].tags||[],t=0;t<ot.length;t+=1){const n=M(e,ot,t);at[t]?at[t].p(n,r):(at[t]=x(n),at[t].c(),at[t].m(q,null))}for(;t<at.length;t+=1)at[t].d(1);at.length=ot.length}4&r&&c(B,"href",e[2]),e[1].from?lt||(lt=D(),lt.c(),lt.m(F.parentNode,F)):lt&&(lt.d(1),lt=null),2&r&&rt!==(rt=e[1].html+"")&&(J.innerHTML=rt),it===(it=ct(e))&&ht?ht.p(e,r):(ht.d(1),ht=it(e),ht&&(ht.c(),ht.m(et,null)))},i:v,o:v,d(t){l(r),l(E),l(T),l(L),l($),t&&l(O),t&&l(U),st&&st.d(),y(at,t),t&&l(Q),lt&&lt.d(t),t&&l(F),t&&l(J),t&&l(W),t&&l(X),ht.d()}}}var j=function(t,e,n,r){return new(n||(n=Promise))((function(s,o){function a(t){try{c(r.next(t))}catch(t){o(t)}}function l(t){try{c(r.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,l)}c((r=r.apply(t,e||[])).next())}))};function C({params:e}){return j(this,void 0,void 0,(function*(){const n=yield this.fetch(`${e.type}/${e.slug}.json`),r=yield n.json();if(200===n.status)return{post:r,historyURL:`https://github.com/${t.dataGitHubRepo}/commits/master/${e.type}/${e.slug}.md`};this.error(n.status,r.message)}))}function k(e,n,r){var s=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(s,o){function a(t){try{c(r.next(t))}catch(t){o(t)}}function l(t){try{c(r.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,l)}c((r=r.apply(t,e||[])).next())}))};let{post:o}=n,{historyURL:a}=n,{mentions:l}=n;return E((()=>s(void 0,void 0,void 0,(function*(){const e=yield fetch("https://webmention.io/api/mentions.jf2?target="+encodeURIComponent(t.host+location.pathname.replace(/(?<!\/)$/,"/")));r(0,l=yield e.json()),l.children.sort(((t,e)=>(e.published||e["wm-received"]).localeCompare(t.published||t["wm-received"]))),L()})))),e.$$set=t=>{"post"in t&&r(1,o=t.post),"historyURL"in t&&r(2,a=t.historyURL),"mentions"in t&&r(0,l=t.mentions)},[l,o,a]}export default class extends e{constructor(t){super(),n(this,t,k,U,r,{post:1,historyURL:2,mentions:0})}}export{C as preload};
