import{c as t,S as e,i as s,s as n,e as o,b as a,d as r,g as l,j as c,l as i,t as h,f as d,m as u,n as m,a as p,q as f,h as g,r as v,p as y,o as E,u as b,v as T,w,x as L,y as k}from"./client.be60621d.js";import{a as M,t as z,b as H}from"./utility.16d055df.js";const I=()=>{class t extends HTMLElement{connectedCallback(){const t=document.createElement("script");Array.from(this.attributes).forEach((e=>t.setAttribute(e.name,e.value)));const e=document.createElement("iframe");e.style.border="0",e.style.width="100%",e.style.height="0",e.style.maxHeight="100vh",e.srcdoc='<body injected style="margin: 0">'+this.innerHTML+t.outerHTML,this.innerHTML="",this.appendChild(e),setTimeout((function t(){if(e.contentDocument?.body?.hasAttribute("injected")){const t=()=>{e.contentDocument?.body?.parentElement&&(e.style.height=`${e.contentDocument.body.parentElement.offsetHeight}px`)};new ResizeObserver(t).observe(e.contentDocument.body),t()}else setTimeout(t,250)}),1)}}customElements.get("x-script")||customElements.define("x-script",t)},{document:j}=T;function A(t,e,s){const n=t.slice();return n[3]=e[s],n}function R(t,e,s){const n=t.slice();return n[6]=e[s],n}function x(t){let e,s,n=H(t[1].date)+"";return{c(){e=o("time"),this.h()},l(t){e=a(t,"TIME",{title:!0,class:!0}),r(e).forEach(l),this.h()},h(){c(e,"title",s=z(t[1].date)),c(e,"class","svelte-odkuvz")},m(t,s){i(t,e,s),e.innerHTML=n},p(t,o){2&o&&n!==(n=H(t[1].date)+"")&&(e.innerHTML=n),2&o&&s!==(s=z(t[1].date))&&c(e,"title",s)},d(t){t&&l(e)}}}function D(t){let e,s,n,p=t[6]+"";return{c(){e=o("div"),s=h("#"),n=h(p),this.h()},l(t){e=a(t,"DIV",{class:!0});var o=r(e);s=d(o,"#"),n=d(o,p),o.forEach(l),this.h()},h(){c(e,"class","tag svelte-odkuvz")},m(t,o){i(t,e,o),u(e,s),u(e,n)},p(t,e){2&e&&p!==(p=t[6]+"")&&m(n,p)},d(t){t&&l(e)}}}function $(t){let e,s;return{c(){e=o("div"),s=h("この記事は以前別のところにあったものを移してきたものです。完璧に移植できておらず、表示が崩れているかもしれません。"),this.h()},l(t){e=a(t,"DIV",{class:!0});var n=r(e);s=d(n,"この記事は以前別のところにあったものを移してきたものです。完璧に移植できておらず、表示が崩れているかもしれません。"),n.forEach(l),this.h()},h(){c(e,"class","callout svelte-odkuvz")},m(t,n){i(t,e,n),u(e,s)},d(t){t&&l(e)}}}function C(t){let e;return{c(){e=h("Loading mentions...")},l(t){e=d(t,"Loading mentions...")},m(t,s){i(t,e,s)},p:y,d(t){t&&l(e)}}}function U(t){let e,s=t[0].children,n=[];for(let e=0;e<s.length;e+=1)n[e]=N(A(t,s,e));let o=null;return s.length||(o=O()),{c(){for(let t=0;t<n.length;t+=1)n[t].c();e=k(),o&&o.c()},l(t){for(let e=0;e<n.length;e+=1)n[e].l(t);e=k(),o&&o.l(t)},m(t,s){for(let e=0;e<n.length;e+=1)n[e].m(t,s);i(t,e,s),o&&o.m(t,s)},p(t,a){if(1&a){let r;for(s=t[0].children,r=0;r<s.length;r+=1){const o=A(t,s,r);n[r]?n[r].p(o,a):(n[r]=N(o),n[r].c(),n[r].m(e.parentNode,e))}for(;r<n.length;r+=1)n[r].d(1);n.length=s.length,s.length?o&&(o.d(1),o=null):o||(o=O(),o.c(),o.m(e.parentNode,e))}},d(t){E(n,t),t&&l(e),o&&o.d(t)}}}function O(t){let e;return{c(){e=h("Twitterで言及していただけると自動的にここに収集されます。")},l(t){e=d(t,"Twitterで言及していただけると自動的にここに収集されます。")},m(t,s){i(t,e,s)},d(t){t&&l(e)}}}function V(t){let e,s,n=t[3].content.text+"";return{c(){e=o("blockquote"),s=h(n),this.h()},l(t){e=a(t,"BLOCKQUOTE",{class:!0});var o=r(e);s=d(o,n),o.forEach(l),this.h()},h(){c(e,"class","svelte-odkuvz")},m(t,n){i(t,e,n),u(e,s)},p(t,e){1&e&&n!==(n=t[3].content.text+"")&&m(s,n)},d(t){t&&l(e)}}}function N(t){let e,s,n,f,v,y,E,b,T,w,k,M,I,j,A,R,x=t[3]["wm-property"]+"",D=t[3].author.name+"",$=H(t[3].published||t[3]["wm-received"])+"",C="mention-of"===t[3]["wm-property"]&&V(t);return{c(){e=o("li"),s=o("a"),n=h(x),v=p(),y=o("a"),E=o("img"),w=h(D),M=p(),I=o("time"),A=p(),C&&C.c(),R=p(),this.h()},l(t){e=a(t,"LI",{});var o=r(e);s=a(o,"A",{href:!0});var c=r(s);n=d(c,x),c.forEach(l),v=g(o),y=a(o,"A",{href:!0});var i=r(y);E=a(i,"IMG",{src:!0,alt:!0,class:!0}),w=d(i,D),i.forEach(l),M=g(o),I=a(o,"TIME",{title:!0,class:!0}),r(I).forEach(l),A=g(o),C&&C.l(o),R=g(o),o.forEach(l),this.h()},h(){c(s,"href",f=t[3].url),L(E.src,b=t[3].author.photo)||c(E,"src",b),c(E,"alt",T=t[3].author.name),c(E,"class","svelte-odkuvz"),c(y,"href",k=t[3].author.url),c(I,"title",j=z(t[3].published||t[3]["wm-received"])),c(I,"class","svelte-odkuvz")},m(t,o){i(t,e,o),u(e,s),u(s,n),u(e,v),u(e,y),u(y,E),u(y,w),u(e,M),u(e,I),I.innerHTML=$,u(e,A),C&&C.m(e,null),u(e,R)},p(t,o){1&o&&x!==(x=t[3]["wm-property"]+"")&&m(n,x),1&o&&f!==(f=t[3].url)&&c(s,"href",f),1&o&&!L(E.src,b=t[3].author.photo)&&c(E,"src",b),1&o&&T!==(T=t[3].author.name)&&c(E,"alt",T),1&o&&D!==(D=t[3].author.name+"")&&m(w,D),1&o&&k!==(k=t[3].author.url)&&c(y,"href",k),1&o&&$!==($=H(t[3].published||t[3]["wm-received"])+"")&&(I.innerHTML=$),1&o&&j!==(j=z(t[3].published||t[3]["wm-received"]))&&c(I,"title",j),"mention-of"===t[3]["wm-property"]?C?C.p(t,o):(C=V(t),C.c(),C.m(e,R)):C&&(C.d(1),C=null)},d(t){t&&l(e),C&&C.d()}}}function S(e){let s,n,b,T,k,z,H,I,A,O,V,N,S,q,P,B,K,Q,X,_,F,J,W,Y,Z,tt,et,st,nt,ot,at,rt,lt,ct,it,ht,dt,ut,mt=e[1].title+"",pt=e[1].title+"",ft=e[1].html+"";j.title=s=e[1].title+" - "+M(e[1].date)+" | "+t.title;let gt=e[1].date&&x(e),vt=e[1].tags||[],yt=[];for(let t=0;t<vt.length;t+=1)yt[t]=D(R(e,vt,t));let Et=e[1].from&&$(),bt=function(e){let s,n;return{c(){s=o("x-script"),this.h()},l(t){s=a(t,"X-SCRIPT",{"data-ad-client":!0,async:!0,src:!0}),r(s).forEach(l),this.h()},h(){w(s,"data-ad-client",t.googleAdSenseClientID),w(s,"async",""),L(s.src,n="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js")||w(s,"src","https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js")},m(t,e){i(t,s,e)},p:y,d(t){t&&l(s)}}}();function Tt(t,e){return t[0]?U:C}let wt=Tt(e),Lt=wt(e);return{c(){n=o("meta"),b=o("meta"),k=o("meta"),H=o("meta"),I=o("meta"),O=p(),V=o("header"),N=o("div"),q=p(),P=o("h1"),B=h(mt),K=p(),gt&&gt.c(),Q=p(),X=o("div");for(let t=0;t<yt.length;t+=1)yt[t].c();_=p(),F=o("p"),J=o("a"),W=h("更新履歴"),Y=p(),Z=o("h1"),tt=h(pt),et=p(),Et&&Et.c(),st=p(),nt=o("div"),ot=p(),bt&&bt.c(),at=p(),rt=o("section"),lt=o("h1"),ct=h("Recent public mentions on Twitter"),it=p(),ht=o("ol"),Lt.c(),this.h()},l(t){const e=f('[data-svelte="svelte-zqyuod"]',j.head);n=a(e,"META",{property:!0,content:!0}),b=a(e,"META",{property:!0,content:!0}),k=a(e,"META",{property:!0,content:!0}),H=a(e,"META",{property:!0,content:!0}),I=a(e,"META",{property:!0,content:!0}),e.forEach(l),O=g(t),V=a(t,"HEADER",{class:!0});var s=r(V);N=a(s,"DIV",{class:!0,style:!0}),r(N).forEach(l),q=g(s),P=a(s,"H1",{class:!0});var o=r(P);B=d(o,mt),o.forEach(l),K=g(s),gt&&gt.l(s),Q=g(s),X=a(s,"DIV",{class:!0});var c=r(X);for(let t=0;t<yt.length;t+=1)yt[t].l(c);c.forEach(l),_=g(s),F=a(s,"P",{class:!0});var i=r(F);J=a(i,"A",{href:!0});var h=r(J);W=d(h,"更新履歴"),h.forEach(l),i.forEach(l),s.forEach(l),Y=g(t),Z=a(t,"H1",{class:!0});var u=r(Z);tt=d(u,pt),u.forEach(l),et=g(t),Et&&Et.l(t),st=g(t),nt=a(t,"DIV",{class:!0}),r(nt).forEach(l),ot=g(t),bt&&bt.l(t),at=g(t),rt=a(t,"SECTION",{class:!0});var m=r(rt);lt=a(m,"H1",{class:!0});var p=r(lt);ct=d(p,"Recent public mentions on Twitter"),p.forEach(l),it=g(m),ht=a(m,"OL",{class:!0});var v=r(ht);Lt.l(v),v.forEach(l),m.forEach(l),this.h()},h(){c(n,"property","og:type"),c(n,"content","article"),c(b,"property","og:title"),c(b,"content",T=e[1].title+" - "+M(e[1].date)+" | "+t.title),c(k,"property","og:description"),c(k,"content",z=e[1].headline),c(H,"property","og:site_name"),c(H,"content",t.title),c(I,"property","og:image"),c(I,"content",A=e[1].header?/^\.{0,2}\//.test(e[1].header)?t.host+"/"+e[1].header:e[1].header:t.host+"/images/default.png"),c(N,"class","img-header svelte-odkuvz"),c(N,"style",S=e[1].header?`background-image: url(${e[1].header})`:""),c(P,"class","svelte-odkuvz"),c(X,"class","tags"),c(J,"href",e[2]),c(F,"class","history svelte-odkuvz"),c(V,"class","svelte-odkuvz"),c(Z,"class","floating-header svelte-odkuvz"),c(nt,"class","content svelte-odkuvz"),c(lt,"class","svelte-odkuvz"),ht.reversed=!0,c(ht,"class","svelte-odkuvz"),c(rt,"class","mentions svelte-odkuvz")},m(t,e){u(j.head,n),u(j.head,b),u(j.head,k),u(j.head,H),u(j.head,I),i(t,O,e),i(t,V,e),u(V,N),u(V,q),u(V,P),u(P,B),u(V,K),gt&&gt.m(V,null),u(V,Q),u(V,X);for(let t=0;t<yt.length;t+=1)yt[t].m(X,null);u(V,_),u(V,F),u(F,J),u(J,W),i(t,Y,e),i(t,Z,e),u(Z,tt),i(t,et,e),Et&&Et.m(t,e),i(t,st,e),i(t,nt,e),nt.innerHTML=ft,i(t,ot,e),bt&&bt.m(t,e),i(t,at,e),i(t,rt,e),u(rt,lt),u(lt,ct),u(rt,it),u(rt,ht),Lt.m(ht,null),dt||(ut=v(G.call(null,P)),dt=!0)},p(e,[n]){if(2&n&&s!==(s=e[1].title+" - "+M(e[1].date)+" | "+t.title)&&(j.title=s),2&n&&T!==(T=e[1].title+" - "+M(e[1].date)+" | "+t.title)&&c(b,"content",T),2&n&&z!==(z=e[1].headline)&&c(k,"content",z),2&n&&A!==(A=e[1].header?/^\.{0,2}\//.test(e[1].header)?t.host+"/"+e[1].header:e[1].header:t.host+"/images/default.png")&&c(I,"content",A),2&n&&S!==(S=e[1].header?`background-image: url(${e[1].header})`:"")&&c(N,"style",S),2&n&&mt!==(mt=e[1].title+"")&&m(B,mt),e[1].date?gt?gt.p(e,n):(gt=x(e),gt.c(),gt.m(V,Q)):gt&&(gt.d(1),gt=null),2&n){let t;for(vt=e[1].tags||[],t=0;t<vt.length;t+=1){const s=R(e,vt,t);yt[t]?yt[t].p(s,n):(yt[t]=D(s),yt[t].c(),yt[t].m(X,null))}for(;t<yt.length;t+=1)yt[t].d(1);yt.length=vt.length}4&n&&c(J,"href",e[2]),2&n&&pt!==(pt=e[1].title+"")&&m(tt,pt),e[1].from?Et||(Et=$(),Et.c(),Et.m(st.parentNode,st)):Et&&(Et.d(1),Et=null),2&n&&ft!==(ft=e[1].html+"")&&(nt.innerHTML=ft),wt===(wt=Tt(e))&&Lt?Lt.p(e,n):(Lt.d(1),Lt=wt(e),Lt&&(Lt.c(),Lt.m(ht,null)))},i:y,o:y,d(t){l(n),l(b),l(k),l(H),l(I),t&&l(O),t&&l(V),gt&&gt.d(),E(yt,t),t&&l(Y),t&&l(Z),t&&l(et),Et&&Et.d(t),t&&l(st),t&&l(nt),t&&l(ot),bt&&bt.d(t),t&&l(at),t&&l(rt),Lt.d(),dt=!1,ut()}}}async function q({params:e}){const s=await this.fetch(`/${e.type}/${e.slug}.json`),n=await s.json();if(200===s.status)return{post:n,historyURL:`https://github.com/${t.dataGitHubRepo}/commits/master/${e.type}/${e.slug}.md`};this.error(s.status,n.message)}function G(t){const e=new IntersectionObserver((([{isIntersecting:t}])=>{document.body.classList.toggle("scrolled-down",!t)}));return e.observe(t),{destroy(){e.disconnect(),document.body.classList.remove("scrolled-down")}}}function P(e,s,n){let{post:o}=s,{historyURL:a}=s,{mentions:r}=s;return b((()=>{fetch("https://webmention.io/api/mentions.jf2?target="+encodeURIComponent(t.host+location.pathname+(location.pathname.match(/\/$/)?"":"/"))).then((t=>t.json().then((t=>{n(0,r=t),r.children.sort(((t,e)=>(e.published||e["wm-received"]).localeCompare(t.published||t["wm-received"])))})))),I()})),e.$$set=t=>{"post"in t&&n(1,o=t.post),"historyURL"in t&&n(2,a=t.historyURL),"mentions"in t&&n(0,r=t.mentions)},[r,o,a]}class B extends e{constructor(t){super(),s(this,t,P,S,n,{post:1,historyURL:2,mentions:0})}}export{B as default,q as preload};
