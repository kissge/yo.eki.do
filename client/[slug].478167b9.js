import{c as t,S as e,i as s,s as n,e as r,b as a,d as o,g as l,j as c,l as i,t as h,f as d,m,n as u,a as f,q as p,h as g,r as y,p as v,o as E,u as b,v as T,w,x as L}from"./client.fa08ae1f.js";import{a as M,t as H,b as I}from"./utility.16d055df.js";const j=()=>{class t extends HTMLElement{connectedCallback(){const t=document.createElement("script");Array.from(this.attributes).forEach((e=>t.setAttribute(e.name,e.value)));const e=document.createElement("iframe");e.style.border="0",e.style.width="100%",e.style.height="0",e.style.maxHeight="100vh",e.srcdoc='<body injected style="margin: 0">'+this.innerHTML+t.outerHTML,this.innerHTML="",this.appendChild(e),setTimeout((function t(){if(e.contentDocument?.body?.hasAttribute("injected")){const t=()=>{e.contentDocument?.body?.parentElement&&(e.style.height=`${e.contentDocument.body.parentElement.offsetHeight}px`)};new ResizeObserver(t).observe(e.contentDocument.body),t()}else setTimeout(t,250)}),1)}}customElements.get("x-script")||customElements.define("x-script",t)},{document:A}=T;function x(t,e,s){const n=t.slice();return n[3]=e[s],n}function R(t,e,s){const n=t.slice();return n[6]=e[s],n}function D(t){let e,s,n=I(t[1].date)+"";return{c(){e=r("time"),this.h()},l(t){e=a(t,"TIME",{title:!0,class:!0}),o(e).forEach(l),this.h()},h(){c(e,"title",s=H(t[1].date)),c(e,"class","svelte-11hfy1r")},m(t,s){i(t,e,s),e.innerHTML=n},p(t,r){2&r&&n!==(n=I(t[1].date)+"")&&(e.innerHTML=n),2&r&&s!==(s=H(t[1].date))&&c(e,"title",s)},d(t){t&&l(e)}}}function $(t){let e,s,n,f=t[6]+"";return{c(){e=r("div"),s=h("#"),n=h(f),this.h()},l(t){e=a(t,"DIV",{class:!0});var r=o(e);s=d(r,"#"),n=d(r,f),r.forEach(l),this.h()},h(){c(e,"class","tag svelte-11hfy1r")},m(t,r){i(t,e,r),m(e,s),m(e,n)},p(t,e){2&e&&f!==(f=t[6]+"")&&u(n,f)},d(t){t&&l(e)}}}function C(t){let e,s;return{c(){e=r("div"),s=h("この記事は以前別のところにあったものを移してきたものです。完璧に移植できておらず、表示が崩れているかもしれません。"),this.h()},l(t){e=a(t,"DIV",{class:!0});var n=o(e);s=d(n,"この記事は以前別のところにあったものを移してきたものです。完璧に移植できておらず、表示が崩れているかもしれません。"),n.forEach(l),this.h()},h(){c(e,"class","callout svelte-11hfy1r")},m(t,n){i(t,e,n),m(e,s)},d(t){t&&l(e)}}}function U(t){let e;return{c(){e=h("Loading mentions...")},l(t){e=d(t,"Loading mentions...")},m(t,s){i(t,e,s)},p:v,d(t){t&&l(e)}}}function O(t){let e,s=t[0].children,n=[];for(let e=0;e<s.length;e+=1)n[e]=N(x(t,s,e));let r=null;return s.length||(r=V()),{c(){for(let t=0;t<n.length;t+=1)n[t].c();e=L(),r&&r.c()},l(t){for(let e=0;e<n.length;e+=1)n[e].l(t);e=L(),r&&r.l(t)},m(t,s){for(let e=0;e<n.length;e+=1)n[e].m(t,s);i(t,e,s),r&&r.m(t,s)},p(t,a){if(1&a){let o;for(s=t[0].children,o=0;o<s.length;o+=1){const r=x(t,s,o);n[o]?n[o].p(r,a):(n[o]=N(r),n[o].c(),n[o].m(e.parentNode,e))}for(;o<n.length;o+=1)n[o].d(1);n.length=s.length,s.length?r&&(r.d(1),r=null):r||(r=V(),r.c(),r.m(e.parentNode,e))}},d(t){E(n,t),t&&l(e),r&&r.d(t)}}}function V(t){let e;return{c(){e=h("Twitterで言及していただけると自動的にここに収集されます。")},l(t){e=d(t,"Twitterで言及していただけると自動的にここに収集されます。")},m(t,s){i(t,e,s)},d(t){t&&l(e)}}}function k(t){let e,s,n=t[3].content.text+"";return{c(){e=r("blockquote"),s=h(n),this.h()},l(t){e=a(t,"BLOCKQUOTE",{class:!0});var r=o(e);s=d(r,n),r.forEach(l),this.h()},h(){c(e,"class","svelte-11hfy1r")},m(t,n){i(t,e,n),m(e,s)},p(t,e){1&e&&n!==(n=t[3].content.text+"")&&u(s,n)},d(t){t&&l(e)}}}function N(t){let e,s,n,p,y,v,E,b,T,w,L,M,j,A,x,R,D=t[3]["wm-property"]+"",$=t[3].author.name+"",C=I(t[3].published||t[3]["wm-received"])+"",U="mention-of"===t[3]["wm-property"]&&k(t);return{c(){e=r("li"),s=r("a"),n=h(D),y=f(),v=r("a"),E=r("img"),w=h($),M=f(),j=r("time"),x=f(),U&&U.c(),R=f(),this.h()},l(t){e=a(t,"LI",{});var r=o(e);s=a(r,"A",{href:!0});var c=o(s);n=d(c,D),c.forEach(l),y=g(r),v=a(r,"A",{href:!0});var i=o(v);E=a(i,"IMG",{src:!0,alt:!0,class:!0}),w=d(i,$),i.forEach(l),M=g(r),j=a(r,"TIME",{title:!0,class:!0}),o(j).forEach(l),x=g(r),U&&U.l(r),R=g(r),r.forEach(l),this.h()},h(){c(s,"href",p=t[3].url),E.src!==(b=t[3].author.photo)&&c(E,"src",b),c(E,"alt",T=t[3].author.name),c(E,"class","svelte-11hfy1r"),c(v,"href",L=t[3].author.url),c(j,"title",A=H(t[3].published||t[3]["wm-received"])),c(j,"class","svelte-11hfy1r")},m(t,r){i(t,e,r),m(e,s),m(s,n),m(e,y),m(e,v),m(v,E),m(v,w),m(e,M),m(e,j),j.innerHTML=C,m(e,x),U&&U.m(e,null),m(e,R)},p(t,r){1&r&&D!==(D=t[3]["wm-property"]+"")&&u(n,D),1&r&&p!==(p=t[3].url)&&c(s,"href",p),1&r&&E.src!==(b=t[3].author.photo)&&c(E,"src",b),1&r&&T!==(T=t[3].author.name)&&c(E,"alt",T),1&r&&$!==($=t[3].author.name+"")&&u(w,$),1&r&&L!==(L=t[3].author.url)&&c(v,"href",L),1&r&&C!==(C=I(t[3].published||t[3]["wm-received"])+"")&&(j.innerHTML=C),1&r&&A!==(A=H(t[3].published||t[3]["wm-received"]))&&c(j,"title",A),"mention-of"===t[3]["wm-property"]?U?U.p(t,r):(U=k(t),U.c(),U.m(e,R)):U&&(U.d(1),U=null)},d(t){t&&l(e),U&&U.d()}}}function S(e){let s,n,b,T,L,H,I,j,x,V,k,N,S,q,G,P,B,K,Q,X,_,F,J,W,Y,Z,tt,et,st,nt,rt,at,ot,lt,ct,it,ht,dt,mt,ut,ft=e[1].title+"",pt=e[1].title+"",gt=e[1].html+"";A.title=s=e[1].title+" - "+M(e[1].date)+" | "+t.title;let yt=e[1].date&&D(e),vt=e[1].tags||[],Et=[];for(let t=0;t<vt.length;t+=1)Et[t]=$(R(e,vt,t));let bt=e[1].from&&C(),Tt=function(e){let s,n,c;return{c(){s=r("x-script"),this.h()},l(t){s=a(t,"X-SCRIPT",{"data-ad-client":!0,async:!0,src:!0}),o(s).forEach(l),this.h()},h(){w(s,"data-ad-client",n=t.googleAdSenseClientID),w(s,"async",""),s.src!==(c="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js")&&w(s,"src","https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js")},m(t,e){i(t,s,e)},p:v,d(t){t&&l(s)}}}();function wt(t,e){return t[0]?O:U}let Lt=wt(e),Mt=Lt(e);return{c(){n=r("meta"),b=r("meta"),L=r("meta"),I=r("meta"),x=r("meta"),k=f(),N=r("header"),S=r("div"),G=f(),P=r("h1"),B=h(ft),Q=f(),yt&&yt.c(),X=f(),_=r("div");for(let t=0;t<Et.length;t+=1)Et[t].c();F=f(),J=r("p"),W=r("a"),Y=h("更新履歴"),Z=f(),tt=r("h1"),et=h(pt),st=f(),bt&&bt.c(),nt=f(),rt=r("div"),at=f(),Tt&&Tt.c(),ot=f(),lt=r("section"),ct=r("h1"),it=h("Recent public mentions on Twitter"),ht=f(),dt=r("ol"),Mt.c(),this.h()},l(t){const e=p('[data-svelte="svelte-zqyuod"]',A.head);n=a(e,"META",{property:!0,content:!0}),b=a(e,"META",{property:!0,content:!0}),L=a(e,"META",{property:!0,content:!0}),I=a(e,"META",{property:!0,content:!0}),x=a(e,"META",{property:!0,content:!0}),e.forEach(l),k=g(t),N=a(t,"HEADER",{class:!0});var s=o(N);S=a(s,"DIV",{class:!0,style:!0}),o(S).forEach(l),G=g(s),P=a(s,"H1",{class:!0});var r=o(P);B=d(r,ft),r.forEach(l),Q=g(s),yt&&yt.l(s),X=g(s),_=a(s,"DIV",{class:!0});var c=o(_);for(let t=0;t<Et.length;t+=1)Et[t].l(c);c.forEach(l),F=g(s),J=a(s,"P",{class:!0});var i=o(J);W=a(i,"A",{href:!0});var h=o(W);Y=d(h,"更新履歴"),h.forEach(l),i.forEach(l),s.forEach(l),Z=g(t),tt=a(t,"H1",{class:!0});var m=o(tt);et=d(m,pt),m.forEach(l),st=g(t),bt&&bt.l(t),nt=g(t),rt=a(t,"DIV",{class:!0}),o(rt).forEach(l),at=g(t),Tt&&Tt.l(t),ot=g(t),lt=a(t,"SECTION",{class:!0});var u=o(lt);ct=a(u,"H1",{class:!0});var f=o(ct);it=d(f,"Recent public mentions on Twitter"),f.forEach(l),ht=g(u),dt=a(u,"OL",{reversed:!0,class:!0});var y=o(dt);Mt.l(y),y.forEach(l),u.forEach(l),this.h()},h(){c(n,"property","og:type"),c(n,"content","article"),c(b,"property","og:title"),c(b,"content",T=e[1].title+" - "+M(e[1].date)+" | "+t.title),c(L,"property","og:description"),c(L,"content",H=e[1].headline),c(I,"property","og:site_name"),c(I,"content",j=t.title),c(x,"property","og:image"),c(x,"content",V=e[1].header?/^\.{0,2}\//.test(e[1].header)?t.host+"/"+e[1].header:e[1].header:t.host+"/images/default.png"),c(S,"class","img-header svelte-11hfy1r"),c(S,"style",q=e[1].header?`background-image: url(${e[1].header})`:""),c(P,"class","svelte-11hfy1r"),c(_,"class","tags"),c(W,"href",e[2]),c(J,"class","history svelte-11hfy1r"),c(N,"class","svelte-11hfy1r"),c(tt,"class","floating-header svelte-11hfy1r"),c(rt,"class","content svelte-11hfy1r"),c(ct,"class","svelte-11hfy1r"),dt.reversed=!0,c(dt,"class","svelte-11hfy1r"),c(lt,"class","mentions svelte-11hfy1r")},m(t,e){m(A.head,n),m(A.head,b),m(A.head,L),m(A.head,I),m(A.head,x),i(t,k,e),i(t,N,e),m(N,S),m(N,G),m(N,P),m(P,B),m(N,Q),yt&&yt.m(N,null),m(N,X),m(N,_);for(let t=0;t<Et.length;t+=1)Et[t].m(_,null);m(N,F),m(N,J),m(J,W),m(W,Y),i(t,Z,e),i(t,tt,e),m(tt,et),i(t,st,e),bt&&bt.m(t,e),i(t,nt,e),i(t,rt,e),rt.innerHTML=gt,i(t,at,e),Tt&&Tt.m(t,e),i(t,ot,e),i(t,lt,e),m(lt,ct),m(ct,it),m(lt,ht),m(lt,dt),Mt.m(dt,null),mt||(ut=y(K=z.call(null,P)),mt=!0)},p(e,[n]){if(2&n&&s!==(s=e[1].title+" - "+M(e[1].date)+" | "+t.title)&&(A.title=s),2&n&&T!==(T=e[1].title+" - "+M(e[1].date)+" | "+t.title)&&c(b,"content",T),2&n&&H!==(H=e[1].headline)&&c(L,"content",H),2&n&&V!==(V=e[1].header?/^\.{0,2}\//.test(e[1].header)?t.host+"/"+e[1].header:e[1].header:t.host+"/images/default.png")&&c(x,"content",V),2&n&&q!==(q=e[1].header?`background-image: url(${e[1].header})`:"")&&c(S,"style",q),2&n&&ft!==(ft=e[1].title+"")&&u(B,ft),e[1].date?yt?yt.p(e,n):(yt=D(e),yt.c(),yt.m(N,X)):yt&&(yt.d(1),yt=null),2&n){let t;for(vt=e[1].tags||[],t=0;t<vt.length;t+=1){const s=R(e,vt,t);Et[t]?Et[t].p(s,n):(Et[t]=$(s),Et[t].c(),Et[t].m(_,null))}for(;t<Et.length;t+=1)Et[t].d(1);Et.length=vt.length}4&n&&c(W,"href",e[2]),2&n&&pt!==(pt=e[1].title+"")&&u(et,pt),e[1].from?bt||(bt=C(),bt.c(),bt.m(nt.parentNode,nt)):bt&&(bt.d(1),bt=null),2&n&&gt!==(gt=e[1].html+"")&&(rt.innerHTML=gt),Tt.p(e,n),Lt===(Lt=wt(e))&&Mt?Mt.p(e,n):(Mt.d(1),Mt=Lt(e),Mt&&(Mt.c(),Mt.m(dt,null)))},i:v,o:v,d(t){l(n),l(b),l(L),l(I),l(x),t&&l(k),t&&l(N),yt&&yt.d(),E(Et,t),t&&l(Z),t&&l(tt),t&&l(st),bt&&bt.d(t),t&&l(nt),t&&l(rt),t&&l(at),Tt&&Tt.d(t),t&&l(ot),t&&l(lt),Mt.d(),mt=!1,ut()}}}async function q({params:e}){const s=await this.fetch(`/${e.type}/${e.slug}.json`),n=await s.json();if(200===s.status)return{post:n,historyURL:`https://github.com/${t.dataGitHubRepo}/commits/master/${e.type}/${e.slug}.md`};this.error(s.status,n.message)}function z(t){const e=new IntersectionObserver((([{isIntersecting:t}])=>{document.body.classList.toggle("scrolled-down",!t)}));return e.observe(t),{destroy(){e.disconnect(),document.body.classList.remove("scrolled-down")}}}function G(e,s,n){let{post:r}=s,{historyURL:a}=s,{mentions:o}=s;return b((()=>{fetch("https://webmention.io/api/mentions.jf2?target="+encodeURIComponent(t.host+location.pathname+(location.pathname.match(/\/$/)?"":"/"))).then((t=>t.json().then((t=>{n(0,o=t),o.children.sort(((t,e)=>(e.published||e["wm-received"]).localeCompare(t.published||t["wm-received"])))})))),j()})),e.$$set=t=>{"post"in t&&n(1,r=t.post),"historyURL"in t&&n(2,a=t.historyURL),"mentions"in t&&n(0,o=t.mentions)},[o,r,a]}export default class extends e{constructor(t){super(),s(this,t,G,S,n,{post:1,historyURL:2,mentions:0})}}export{q as preload};
