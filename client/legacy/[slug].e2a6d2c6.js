import{y as t,_ as e,a as n,b as r,c as o,i as c,d as a,S as s,e as i,s as u,f as l,h,j as f,l as d,n as p,p as m,t as v,k as g,q as y,r as w,g as E,v as T,m as b,w as x,x as L,u as I,z as M,H as R,A as D}from"./client.042287dd.js";const H=t=>((t=new Date(t)).setTime(t.getTime()+324e5),t.toISOString().replace(/\..+/,"+09:00").replace(/(T|\+09:00)/g,'<span class="date-weak">$1</span>')),S=()=>{class t extends HTMLElement{connectedCallback(){const t=document.createElement("script");Array.from(this.attributes).forEach((e=>t.setAttribute(e.name,e.value)));const e=document.createElement("iframe");e.style.border="0",e.style.width="100%",e.style.height="0",e.srcdoc='<body style="margin: 0">'+this.innerHTML+t.outerHTML,this.innerHTML="",this.appendChild(e);for(let t=0;t<5e3;t+=100)setTimeout((()=>{var t;e.style.height=(null===(t=e.contentDocument.body)||void 0===t?void 0:t.clientHeight)+30+"px"}),t)}}customElements.define("x-script",t)};function A(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var o,c=n(t);if(e){var a=n(this).constructor;o=Reflect.construct(c,arguments,a)}else o=c.apply(this,arguments);return r(this,o)}}function k(t,e,n){var r=t.slice();return r[4]=e[n],r}function O(t,e,n){var r=t.slice();return r[7]=e[n],r}function U(t){var e,n=H(t[1].date)+"";return{c:function(){e=l("time"),this.h()},l:function(t){e=h(t,"TIME",{class:!0}),f(e).forEach(d),this.h()},h:function(){p(e,"class","svelte-use3p6")},m:function(t,r){m(t,e,r),e.innerHTML=n},p:function(t,r){2&r&&n!==(n=H(t[1].date)+"")&&(e.innerHTML=n)},d:function(t){t&&d(e)}}}function j(t){var e,n,r,o=t[7]+"";return{c:function(){e=l("div"),n=v("#"),r=v(o),this.h()},l:function(t){e=h(t,"DIV",{class:!0});var c=f(e);n=g(c,"#"),r=g(c,o),c.forEach(d),this.h()},h:function(){p(e,"class","tag svelte-use3p6")},m:function(t,o){m(t,e,o),y(e,n),y(e,r)},p:function(t,e){2&e&&o!==(o=t[7]+"")&&w(r,o)},d:function(t){t&&d(e)}}}function C(t){var e,n;return{c:function(){e=l("div"),n=v("この記事は以前別のところにあったものを移してきたものです。完璧に移植できておらず、表示が崩れているかもしれません。"),this.h()},l:function(t){e=h(t,"DIV",{class:!0});var r=f(e);n=g(r,"この記事は以前別のところにあったものを移してきたものです。完璧に移植できておらず、表示が崩れているかもしれません。"),r.forEach(d),this.h()},h:function(){p(e,"class","callout svelte-use3p6")},m:function(t,r){m(t,e,r),y(e,n)},d:function(t){t&&d(e)}}}function V(t){var e;return{c:function(){e=v("Loading mentions...")},l:function(t){e=g(t,"Loading mentions...")},m:function(t,n){m(t,e,n)},p:L,d:function(t){t&&d(e)}}}function N(t){for(var e,n=t[0].children,r=[],o=0;o<n.length;o+=1)r[o]=_(k(t,n,o));var c=null;return n.length||(c=P()),{c:function(){for(var t=0;t<r.length;t+=1)r[t].c();e=D(),c&&c.c()},l:function(t){for(var n=0;n<r.length;n+=1)r[n].l(t);e=D(),c&&c.l(t)},m:function(t,n){for(var o=0;o<r.length;o+=1)r[o].m(t,n);m(t,e,n),c&&c.m(t,n)},p:function(t,o){if(1&o){var a;for(n=t[0].children,a=0;a<n.length;a+=1){var s=k(t,n,a);r[a]?r[a].p(s,o):(r[a]=_(s),r[a].c(),r[a].m(e.parentNode,e))}for(;a<r.length;a+=1)r[a].d(1);r.length=n.length,n.length?c&&(c.d(1),c=null):c||((c=P()).c(),c.m(e.parentNode,e))}},d:function(t){I(r,t),t&&d(e),c&&c.d(t)}}}function P(t){var e;return{c:function(){e=v("Twitterで言及していただけると自動的にここに収集されます。")},l:function(t){e=g(t,"Twitterで言及していただけると自動的にここに収集されます。")},m:function(t,n){m(t,e,n)},d:function(t){t&&d(e)}}}function $(t){var e,n,r=t[4].content.text+"";return{c:function(){e=l("blockquote"),n=v(r),this.h()},l:function(t){e=h(t,"BLOCKQUOTE",{class:!0});var o=f(e);n=g(o,r),o.forEach(d),this.h()},h:function(){p(e,"class","svelte-use3p6")},m:function(t,r){m(t,e,r),y(e,n)},p:function(t,e){1&e&&r!==(r=t[4].content.text+"")&&w(n,r)},d:function(t){t&&d(e)}}}function _(t){var e,n,r,o,c,a,s,i,u,T,x,L,I,M,D,S=t[4]["wm-property"]+"",A=t[4].author.name+"",k=H(t[4].published||t[4]["wm-received"])+"",O="mention-of"===t[4]["wm-property"]&&$(t);return{c:function(){e=l("li"),n=l("a"),r=v(S),c=E(),a=l("a"),s=l("img"),T=v(A),L=v("\n          at "),M=E(),O&&O.c(),D=E(),this.h()},l:function(t){e=h(t,"LI",{});var o=f(e);n=h(o,"A",{href:!0});var i=f(n);r=g(i,S),i.forEach(d),c=b(o),a=h(o,"A",{href:!0});var u=f(a);s=h(u,"IMG",{src:!0,alt:!0,class:!0}),T=g(u,A),u.forEach(d),L=g(o,"\n          at "),M=b(o),O&&O.l(o),D=b(o),o.forEach(d),this.h()},h:function(){p(n,"href",o=t[4].url),s.src!==(i=t[4].author.photo)&&p(s,"src",i),p(s,"alt",u=t[4].author.name),p(s,"class","svelte-use3p6"),p(a,"href",x=t[4].author.url),I=new R(M)},m:function(t,o){m(t,e,o),y(e,n),y(n,r),y(e,c),y(e,a),y(a,s),y(a,T),y(e,L),I.m(k,e),y(e,M),O&&O.m(e,null),y(e,D)},p:function(t,c){1&c&&S!==(S=t[4]["wm-property"]+"")&&w(r,S),1&c&&o!==(o=t[4].url)&&p(n,"href",o),1&c&&s.src!==(i=t[4].author.photo)&&p(s,"src",i),1&c&&u!==(u=t[4].author.name)&&p(s,"alt",u),1&c&&A!==(A=t[4].author.name+"")&&w(T,A),1&c&&x!==(x=t[4].author.url)&&p(a,"href",x),1&c&&k!==(k=H(t[4].published||t[4]["wm-received"])+"")&&I.p(k),"mention-of"===t[4]["wm-property"]?O?O.p(t,c):((O=$(t)).c(),O.m(e,D)):O&&(O.d(1),O=null)},d:function(t){t&&d(e),O&&O.d()}}}function q(t){var e,n,r,o,c,a,s,u,M,R,D,H,S,A,k,P,$,_,q,z,G,B,K,Q,F,J,W,X,Y,Z,tt,et,nt=t[1].title+"",rt=t[1].html+"";document.title=e=t[1].title+" - "+new Date(t[1].date).toISOString().slice(0,10)+" | "+i.title;for(var ot=t[1].date&&U(t),ct=t[1].tags||[],at=[],st=0;st<ct.length;st+=1)at[st]=j(O(t,ct,st));var it=t[1].from&&C();function ut(t,e){return t[0]?N:V}var lt=ut(t),ht=lt(t);return{c:function(){n=l("meta"),r=l("meta"),c=l("meta"),s=l("meta"),u=l("meta"),R=E(),D=l("header"),H=l("div"),A=E(),k=l("h1"),P=v(nt),$=E(),ot&&ot.c(),_=E(),q=l("div");for(var t=0;t<at.length;t+=1)at[t].c();z=E(),G=l("p"),B=l("a"),K=v("更新履歴"),Q=E(),it&&it.c(),F=E(),J=l("div"),W=E(),X=l("section"),Y=l("h1"),Z=v("Recent public mentions on Twitter"),tt=E(),et=l("ol"),ht.c(),this.h()},l:function(t){var e=T('[data-svelte="svelte-14mnzgr"]',document.head);n=h(e,"META",{property:!0,content:!0}),r=h(e,"META",{property:!0,content:!0}),c=h(e,"META",{property:!0,content:!0}),s=h(e,"META",{property:!0,content:!0}),u=h(e,"META",{property:!0,content:!0}),e.forEach(d),R=b(t),D=h(t,"HEADER",{class:!0});var o=f(D);H=h(o,"DIV",{class:!0,style:!0}),f(H).forEach(d),A=b(o),k=h(o,"H1",{class:!0});var a=f(k);P=g(a,nt),a.forEach(d),$=b(o),ot&&ot.l(o),_=b(o),q=h(o,"DIV",{class:!0});for(var i=f(q),l=0;l<at.length;l+=1)at[l].l(i);i.forEach(d),z=b(o),G=h(o,"P",{class:!0});var p=f(G);B=h(p,"A",{href:!0});var m=f(B);K=g(m,"更新履歴"),m.forEach(d),p.forEach(d),o.forEach(d),Q=b(t),it&&it.l(t),F=b(t),J=h(t,"DIV",{class:!0}),f(J).forEach(d),W=b(t),X=h(t,"SECTION",{class:!0});var v=f(X);Y=h(v,"H1",{class:!0});var y=f(Y);Z=g(y,"Recent public mentions on Twitter"),y.forEach(d),tt=b(v),et=h(v,"OL",{});var w=f(et);ht.l(w),w.forEach(d),v.forEach(d),this.h()},h:function(){p(n,"property","og:type"),p(n,"content","article"),p(r,"property","og:title"),p(r,"content",o=t[1].title+" - "+new Date(t[1].date).toISOString().slice(0,10)+" | "+i.title),p(c,"property","og:description"),p(c,"content",a=t[1].headline),p(s,"property","og:site_name"),p(s,"content",i.title),p(u,"property","og:image"),p(u,"content",M=t[1].header?/^\.{0,2}\//.test(t[1].header)?i.host+"/"+t[1].header:t[1].header:i.host+"/images/default.png"),p(H,"class","img-header svelte-use3p6"),p(H,"style",S=t[1].header?"background-image: url(".concat(t[1].header,")"):""),p(k,"class","svelte-use3p6"),p(q,"class","tags"),p(B,"href",t[2]),p(G,"class","history svelte-use3p6"),p(D,"class","svelte-use3p6"),p(J,"class","content svelte-use3p6"),p(Y,"class","svelte-use3p6"),p(X,"class","mentions svelte-use3p6")},m:function(t,e){y(document.head,n),y(document.head,r),y(document.head,c),y(document.head,s),y(document.head,u),m(t,R,e),m(t,D,e),y(D,H),y(D,A),y(D,k),y(k,P),y(D,$),ot&&ot.m(D,null),y(D,_),y(D,q);for(var o=0;o<at.length;o+=1)at[o].m(q,null);y(D,z),y(D,G),y(G,B),y(B,K),m(t,Q,e),it&&it.m(t,e),m(t,F,e),m(t,J,e),J.innerHTML=rt,m(t,W,e),m(t,X,e),y(X,Y),y(Y,Z),y(X,tt),y(X,et),ht.m(et,null)},p:function(t,n){var s=x(n,1)[0];if(2&s&&e!==(e=t[1].title+" - "+new Date(t[1].date).toISOString().slice(0,10)+" | "+i.title)&&(document.title=e),2&s&&o!==(o=t[1].title+" - "+new Date(t[1].date).toISOString().slice(0,10)+" | "+i.title)&&p(r,"content",o),2&s&&a!==(a=t[1].headline)&&p(c,"content",a),2&s&&M!==(M=t[1].header?/^\.{0,2}\//.test(t[1].header)?i.host+"/"+t[1].header:t[1].header:i.host+"/images/default.png")&&p(u,"content",M),2&s&&S!==(S=t[1].header?"background-image: url(".concat(t[1].header,")"):"")&&p(H,"style",S),2&s&&nt!==(nt=t[1].title+"")&&w(P,nt),t[1].date?ot?ot.p(t,s):((ot=U(t)).c(),ot.m(D,_)):ot&&(ot.d(1),ot=null),2&s){var l;for(ct=t[1].tags||[],l=0;l<ct.length;l+=1){var h=O(t,ct,l);at[l]?at[l].p(h,s):(at[l]=j(h),at[l].c(),at[l].m(q,null))}for(;l<at.length;l+=1)at[l].d(1);at.length=ct.length}4&s&&p(B,"href",t[2]),t[1].from?it||((it=C()).c(),it.m(F.parentNode,F)):it&&(it.d(1),it=null),2&s&&rt!==(rt=t[1].html+"")&&(J.innerHTML=rt),lt===(lt=ut(t))&&ht?ht.p(t,s):(ht.d(1),(ht=lt(t))&&(ht.c(),ht.m(et,null)))},i:L,o:L,d:function(t){d(n),d(r),d(c),d(s),d(u),t&&d(R),t&&d(D),ot&&ot.d(),I(at,t),t&&d(Q),it&&it.d(t),t&&d(F),t&&d(J),t&&d(W),t&&d(X),ht.d()}}}var z=function(t,e,n,r){return new(n||(n=Promise))((function(o,c){function a(t){try{i(r.next(t))}catch(t){c(t)}}function s(t){try{i(r.throw(t))}catch(t){c(t)}}function i(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}i((r=r.apply(t,e||[])).next())}))};function G(e){var n=e.params;return z(this,void 0,void 0,t.mark((function e(){var r,o;return t.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.fetch("".concat(n.type,"/").concat(n.slug,".json"));case 2:return r=t.sent,t.next=5,r.json();case 5:if(o=t.sent,200!==r.status){t.next=10;break}return t.abrupt("return",{post:o,historyURL:"https://github.com/".concat(i.dataGitHubRepo,"/commits/master/").concat(n.type,"/").concat(n.slug,".md")});case 10:this.error(r.status,o.message);case 11:case"end":return t.stop()}}),e,this)})))}function B(e,n,r){var o=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,c){function a(t){try{i(r.next(t))}catch(t){c(t)}}function s(t){try{i(r.throw(t))}catch(t){c(t)}}function i(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}i((r=r.apply(t,e||[])).next())}))},c=n.post,a=n.historyURL,s=n.mentions;return M((function(){return o(void 0,void 0,void 0,t.mark((function e(){var n;return t.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://webmention.io/api/mentions.jf2?target="+encodeURIComponent(i.host+location.pathname.replace(/(?<!\/)$/,"/")));case 2:return n=t.sent,t.t0=r,t.next=6,n.json();case 6:t.t1=s=t.sent,(0,t.t0)(0,t.t1),s.children.sort((function(t,e){return(e.published||e["wm-received"]).localeCompare(t.published||t["wm-received"])})),S();case 10:case"end":return t.stop()}}),e)})))})),e.$$set=function(t){"post"in t&&r(1,c=t.post),"historyURL"in t&&r(2,a=t.historyURL),"mentions"in t&&r(0,s=t.mentions)},[s,c,a]}var K=function(t){e(r,s);var n=A(r);function r(t){var e;return o(this,r),e=n.call(this),c(a(e),t,B,q,u,{post:1,historyURL:2,mentions:0}),e}return r}();export default K;export{G as preload};
