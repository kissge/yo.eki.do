import{y as t,_ as e,a as n,b as r,c as o,i as a,d as c,S as s,e as i,s as u,f as l,h,j as f,l as d,n as p,p as m,t as v,k as g,q as y,r as E,g as w,v as T,m as b,w as x,x as L,u as I,z as R,A as D,H as M,B as S}from"./client.73aa364f.js";const H=t=>((t=new Date(t)).setTime(t.getTime()+324e5),t.toISOString().replace(/\..+/,"+09:00").replace(/(T|\+09:00)/g,'<span class="date-weak">$1</span>')),A=()=>{class t extends HTMLElement{connectedCallback(){const t=document.createElement("script");Array.from(this.attributes).forEach((e=>t.setAttribute(e.name,e.value)));const e=document.createElement("iframe");e.style.border="0",e.style.width="100%",e.style.height="0",e.srcdoc='<body style="margin: 0">'+this.innerHTML+t.outerHTML,this.innerHTML="",this.appendChild(e);for(let t=0;t<5e3;t+=100)setTimeout((()=>{var t;e.style.height=(null===(t=e.contentDocument.body)||void 0===t?void 0:t.clientHeight)+30+"px"}),t)}}customElements.define("x-script",t)};function j(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var o,a=n(t);if(e){var c=n(this).constructor;o=Reflect.construct(a,arguments,c)}else o=a.apply(this,arguments);return r(this,o)}}function k(t,e,n){var r=t.slice();return r[4]=e[n],r}function O(t,e,n){var r=t.slice();return r[7]=e[n],r}function C(t){var e,n=H(t[1].date)+"";return{c:function(){e=l("time"),this.h()},l:function(t){e=h(t,"TIME",{class:!0}),f(e).forEach(d),this.h()},h:function(){p(e,"class","svelte-use3p6")},m:function(t,r){m(t,e,r),e.innerHTML=n},p:function(t,r){2&r&&n!==(n=H(t[1].date)+"")&&(e.innerHTML=n)},d:function(t){t&&d(e)}}}function U(t){var e,n,r,o=t[7]+"";return{c:function(){e=l("div"),n=v("#"),r=v(o),this.h()},l:function(t){e=h(t,"DIV",{class:!0});var a=f(e);n=g(a,"#"),r=g(a,o),a.forEach(d),this.h()},h:function(){p(e,"class","tag svelte-use3p6")},m:function(t,o){m(t,e,o),y(e,n),y(e,r)},p:function(t,e){2&e&&o!==(o=t[7]+"")&&E(r,o)},d:function(t){t&&d(e)}}}function P(t){var e,n;return{c:function(){e=l("div"),n=v("この記事は以前別のところにあったものを移してきたものです。完璧に移植できておらず、表示が崩れているかもしれません。"),this.h()},l:function(t){e=h(t,"DIV",{class:!0});var r=f(e);n=g(r,"この記事は以前別のところにあったものを移してきたものです。完璧に移植できておらず、表示が崩れているかもしれません。"),r.forEach(d),this.h()},h:function(){p(e,"class","callout svelte-use3p6")},m:function(t,r){m(t,e,r),y(e,n)},d:function(t){t&&d(e)}}}function V(t){var e;return{c:function(){e=v("Loading mentions...")},l:function(t){e=g(t,"Loading mentions...")},m:function(t,n){m(t,e,n)},p:L,d:function(t){t&&d(e)}}}function N(t){for(var e,n=t[0].children,r=[],o=0;o<n.length;o+=1)r[o]=q(k(t,n,o));var a=null;return n.length||(a=$()),{c:function(){for(var t=0;t<r.length;t+=1)r[t].c();e=S(),a&&a.c()},l:function(t){for(var n=0;n<r.length;n+=1)r[n].l(t);e=S(),a&&a.l(t)},m:function(t,n){for(var o=0;o<r.length;o+=1)r[o].m(t,n);m(t,e,n),a&&a.m(t,n)},p:function(t,o){if(1&o){var c;for(n=t[0].children,c=0;c<n.length;c+=1){var s=k(t,n,c);r[c]?r[c].p(s,o):(r[c]=q(s),r[c].c(),r[c].m(e.parentNode,e))}for(;c<r.length;c+=1)r[c].d(1);r.length=n.length,n.length?a&&(a.d(1),a=null):a||((a=$()).c(),a.m(e.parentNode,e))}},d:function(t){I(r,t),t&&d(e),a&&a.d(t)}}}function $(t){var e;return{c:function(){e=v("Twitterで言及していただけると自動的にここに収集されます。")},l:function(t){e=g(t,"Twitterで言及していただけると自動的にここに収集されます。")},m:function(t,n){m(t,e,n)},d:function(t){t&&d(e)}}}function _(t){var e,n,r=t[4].content.text+"";return{c:function(){e=l("blockquote"),n=v(r),this.h()},l:function(t){e=h(t,"BLOCKQUOTE",{class:!0});var o=f(e);n=g(o,r),o.forEach(d),this.h()},h:function(){p(e,"class","svelte-use3p6")},m:function(t,r){m(t,e,r),y(e,n)},p:function(t,e){1&e&&r!==(r=t[4].content.text+"")&&E(n,r)},d:function(t){t&&d(e)}}}function q(t){var e,n,r,o,a,c,s,i,u,T,x,L,I,R,D,S=t[4]["wm-property"]+"",A=t[4].author.name+"",j=H(t[4].published||t[4]["wm-received"])+"",k="mention-of"===t[4]["wm-property"]&&_(t);return{c:function(){e=l("li"),n=l("a"),r=v(S),a=w(),c=l("a"),s=l("img"),T=v(A),L=v("\n          at "),R=w(),k&&k.c(),D=w(),this.h()},l:function(t){e=h(t,"LI",{});var o=f(e);n=h(o,"A",{href:!0});var i=f(n);r=g(i,S),i.forEach(d),a=b(o),c=h(o,"A",{href:!0});var u=f(c);s=h(u,"IMG",{src:!0,alt:!0,class:!0}),T=g(u,A),u.forEach(d),L=g(o,"\n          at "),R=b(o),k&&k.l(o),D=b(o),o.forEach(d),this.h()},h:function(){p(n,"href",o=t[4].url),s.src!==(i=t[4].author.photo)&&p(s,"src",i),p(s,"alt",u=t[4].author.name),p(s,"class","svelte-use3p6"),p(c,"href",x=t[4].author.url),I=new M(R)},m:function(t,o){m(t,e,o),y(e,n),y(n,r),y(e,a),y(e,c),y(c,s),y(c,T),y(e,L),I.m(j,e),y(e,R),k&&k.m(e,null),y(e,D)},p:function(t,a){1&a&&S!==(S=t[4]["wm-property"]+"")&&E(r,S),1&a&&o!==(o=t[4].url)&&p(n,"href",o),1&a&&s.src!==(i=t[4].author.photo)&&p(s,"src",i),1&a&&u!==(u=t[4].author.name)&&p(s,"alt",u),1&a&&A!==(A=t[4].author.name+"")&&E(T,A),1&a&&x!==(x=t[4].author.url)&&p(c,"href",x),1&a&&j!==(j=H(t[4].published||t[4]["wm-received"])+"")&&I.p(j),"mention-of"===t[4]["wm-property"]?k?k.p(t,a):((k=_(t)).c(),k.m(e,D)):k&&(k.d(1),k=null)},d:function(t){t&&d(e),k&&k.d()}}}function z(t){var e,n,r,o,a,c,s,u,R,M,S,H,A,j,k,$,_,q,z,B,G,K,Q,X,F,J,W,Y,Z,tt,et,nt,rt,ot=t[1].title+"",at=t[1].html+"";document.title=e=t[1].title+" - "+new Date(t[1].date).toISOString().slice(0,10)+" | "+i.title;for(var ct=t[1].date&&C(t),st=t[1].tags||[],it=[],ut=0;ut<st.length;ut+=1)it[ut]=U(O(t,st,ut));var lt,ht=t[1].from&&P(),ft={c:function(){lt=l("x-script"),this.h()},l:function(t){lt=h(t,"X-SCRIPT",{"data-ad-client":!0,async:!0,src:!0}),f(lt).forEach(d),this.h()},h:function(){D(lt,"data-ad-client",i.googleAdSenseClientID),D(lt,"async",""),"https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"!==lt.src&&D(lt,"src","https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js")},m:function(t,e){m(t,lt,e)},p:L,d:function(t){t&&d(lt)}};function dt(t,e){return t[0]?N:V}var pt=dt(t),mt=pt(t);return{c:function(){n=l("meta"),r=l("meta"),a=l("meta"),s=l("meta"),u=l("meta"),M=w(),S=l("header"),H=l("div"),j=w(),k=l("h1"),$=v(ot),_=w(),ct&&ct.c(),q=w(),z=l("div");for(var t=0;t<it.length;t+=1)it[t].c();B=w(),G=l("p"),K=l("a"),Q=v("更新履歴"),X=w(),ht&&ht.c(),F=w(),J=l("div"),W=w(),ft&&ft.c(),Y=w(),Z=l("section"),tt=l("h1"),et=v("Recent public mentions on Twitter"),nt=w(),rt=l("ol"),mt.c(),this.h()},l:function(t){var e=T('[data-svelte="svelte-14mnzgr"]',document.head);n=h(e,"META",{property:!0,content:!0}),r=h(e,"META",{property:!0,content:!0}),a=h(e,"META",{property:!0,content:!0}),s=h(e,"META",{property:!0,content:!0}),u=h(e,"META",{property:!0,content:!0}),e.forEach(d),M=b(t),S=h(t,"HEADER",{class:!0});var o=f(S);H=h(o,"DIV",{class:!0,style:!0}),f(H).forEach(d),j=b(o),k=h(o,"H1",{class:!0});var c=f(k);$=g(c,ot),c.forEach(d),_=b(o),ct&&ct.l(o),q=b(o),z=h(o,"DIV",{class:!0});for(var i=f(z),l=0;l<it.length;l+=1)it[l].l(i);i.forEach(d),B=b(o),G=h(o,"P",{class:!0});var p=f(G);K=h(p,"A",{href:!0});var m=f(K);Q=g(m,"更新履歴"),m.forEach(d),p.forEach(d),o.forEach(d),X=b(t),ht&&ht.l(t),F=b(t),J=h(t,"DIV",{class:!0}),f(J).forEach(d),W=b(t),ft&&ft.l(t),Y=b(t),Z=h(t,"SECTION",{class:!0});var v=f(Z);tt=h(v,"H1",{class:!0});var y=f(tt);et=g(y,"Recent public mentions on Twitter"),y.forEach(d),nt=b(v),rt=h(v,"OL",{});var E=f(rt);mt.l(E),E.forEach(d),v.forEach(d),this.h()},h:function(){p(n,"property","og:type"),p(n,"content","article"),p(r,"property","og:title"),p(r,"content",o=t[1].title+" - "+new Date(t[1].date).toISOString().slice(0,10)+" | "+i.title),p(a,"property","og:description"),p(a,"content",c=t[1].headline),p(s,"property","og:site_name"),p(s,"content",i.title),p(u,"property","og:image"),p(u,"content",R=t[1].header?/^\.{0,2}\//.test(t[1].header)?i.host+"/"+t[1].header:t[1].header:i.host+"/images/default.png"),p(H,"class","img-header svelte-use3p6"),p(H,"style",A=t[1].header?"background-image: url(".concat(t[1].header,")"):""),p(k,"class","svelte-use3p6"),p(z,"class","tags"),p(K,"href",t[2]),p(G,"class","history svelte-use3p6"),p(S,"class","svelte-use3p6"),p(J,"class","content svelte-use3p6"),p(tt,"class","svelte-use3p6"),p(Z,"class","mentions svelte-use3p6")},m:function(t,e){y(document.head,n),y(document.head,r),y(document.head,a),y(document.head,s),y(document.head,u),m(t,M,e),m(t,S,e),y(S,H),y(S,j),y(S,k),y(k,$),y(S,_),ct&&ct.m(S,null),y(S,q),y(S,z);for(var o=0;o<it.length;o+=1)it[o].m(z,null);y(S,B),y(S,G),y(G,K),y(K,Q),m(t,X,e),ht&&ht.m(t,e),m(t,F,e),m(t,J,e),J.innerHTML=at,m(t,W,e),ft&&ft.m(t,e),m(t,Y,e),m(t,Z,e),y(Z,tt),y(tt,et),y(Z,nt),y(Z,rt),mt.m(rt,null)},p:function(t,n){var s=x(n,1)[0];if(2&s&&e!==(e=t[1].title+" - "+new Date(t[1].date).toISOString().slice(0,10)+" | "+i.title)&&(document.title=e),2&s&&o!==(o=t[1].title+" - "+new Date(t[1].date).toISOString().slice(0,10)+" | "+i.title)&&p(r,"content",o),2&s&&c!==(c=t[1].headline)&&p(a,"content",c),2&s&&R!==(R=t[1].header?/^\.{0,2}\//.test(t[1].header)?i.host+"/"+t[1].header:t[1].header:i.host+"/images/default.png")&&p(u,"content",R),2&s&&A!==(A=t[1].header?"background-image: url(".concat(t[1].header,")"):"")&&p(H,"style",A),2&s&&ot!==(ot=t[1].title+"")&&E($,ot),t[1].date?ct?ct.p(t,s):((ct=C(t)).c(),ct.m(S,q)):ct&&(ct.d(1),ct=null),2&s){var l;for(st=t[1].tags||[],l=0;l<st.length;l+=1){var h=O(t,st,l);it[l]?it[l].p(h,s):(it[l]=U(h),it[l].c(),it[l].m(z,null))}for(;l<it.length;l+=1)it[l].d(1);it.length=st.length}4&s&&p(K,"href",t[2]),t[1].from?ht||((ht=P()).c(),ht.m(F.parentNode,F)):ht&&(ht.d(1),ht=null),2&s&&at!==(at=t[1].html+"")&&(J.innerHTML=at),ft.p(t,s),pt===(pt=dt(t))&&mt?mt.p(t,s):(mt.d(1),(mt=pt(t))&&(mt.c(),mt.m(rt,null)))},i:L,o:L,d:function(t){d(n),d(r),d(a),d(s),d(u),t&&d(M),t&&d(S),ct&&ct.d(),I(it,t),t&&d(X),ht&&ht.d(t),t&&d(F),t&&d(J),t&&d(W),ft&&ft.d(t),t&&d(Y),t&&d(Z),mt.d()}}}var B=function(t,e,n,r){return new(n||(n=Promise))((function(o,a){function c(t){try{i(r.next(t))}catch(t){a(t)}}function s(t){try{i(r.throw(t))}catch(t){a(t)}}function i(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(c,s)}i((r=r.apply(t,e||[])).next())}))};function G(e){var n=e.params;return B(this,void 0,void 0,t.mark((function e(){var r,o;return t.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.fetch("".concat(n.type,"/").concat(n.slug,".json"));case 2:return r=t.sent,t.next=5,r.json();case 5:if(o=t.sent,200!==r.status){t.next=10;break}return t.abrupt("return",{post:o,historyURL:"https://github.com/".concat(i.dataGitHubRepo,"/commits/master/").concat(n.type,"/").concat(n.slug,".md")});case 10:this.error(r.status,o.message);case 11:case"end":return t.stop()}}),e,this)})))}function K(e,n,r){var o=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,a){function c(t){try{i(r.next(t))}catch(t){a(t)}}function s(t){try{i(r.throw(t))}catch(t){a(t)}}function i(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(c,s)}i((r=r.apply(t,e||[])).next())}))},a=n.post,c=n.historyURL,s=n.mentions;return R((function(){return o(void 0,void 0,void 0,t.mark((function e(){var n;return t.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://webmention.io/api/mentions.jf2?target="+encodeURIComponent(i.host+location.pathname.replace(/(?<!\/)$/,"/")));case 2:return n=t.sent,t.t0=r,t.next=6,n.json();case 6:t.t1=s=t.sent,(0,t.t0)(0,t.t1),s.children.sort((function(t,e){return(e.published||e["wm-received"]).localeCompare(t.published||t["wm-received"])})),A();case 10:case"end":return t.stop()}}),e)})))})),e.$$set=function(t){"post"in t&&r(1,a=t.post),"historyURL"in t&&r(2,c=t.historyURL),"mentions"in t&&r(0,s=t.mentions)},[s,a,c]}var Q=function(t){e(r,s);var n=j(r);function r(t){var e;return o(this,r),e=n.call(this),a(c(e),t,K,z,u,{post:1,historyURL:2,mentions:0}),e}return r}();export default Q;export{G as preload};
