import{y as t,_ as n,a as e,b as r,c as o,i as c,d as a,S as i,e as s,s as u,f as l,t as f,h,j as m,k as v,l as d,n as p,p as g,q as y,r as w,g as E,v as x,m as T,w as I,x as R,u as D,z as S,A as L}from"./client.77dc1dfd.js";const b=t=>((t=new Date(t)).setTime(t.getTime()+324e5),t.toISOString().replace(/\..+/,"+09:00"));function A(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var o,c=e(t);if(n){var a=e(this).constructor;o=Reflect.construct(c,arguments,a)}else o=c.apply(this,arguments);return r(this,o)}}function M(t,n,e){var r=t.slice();return r[4]=n[e],r}function O(t,n,e){var r=t.slice();return r[7]=n[e],r}function k(t){var n,e,r=b(t[1].date)+"";return{c:function(){n=l("time"),e=f(r),this.h()},l:function(t){n=h(t,"TIME",{class:!0});var o=m(n);e=v(o,r),o.forEach(d),this.h()},h:function(){p(n,"class","svelte-f4lmv4")},m:function(t,r){g(t,n,r),y(n,e)},p:function(t,n){2&n&&r!==(r=b(t[1].date)+"")&&w(e,r)},d:function(t){t&&d(n)}}}function U(t){var n,e,r,o=t[7]+"";return{c:function(){n=l("div"),e=f("#"),r=f(o),this.h()},l:function(t){n=h(t,"DIV",{class:!0});var c=m(n);e=v(c,"#"),r=v(c,o),c.forEach(d),this.h()},h:function(){p(n,"class","tag svelte-f4lmv4")},m:function(t,o){g(t,n,o),y(n,e),y(n,r)},p:function(t,n){2&n&&o!==(o=t[7]+"")&&w(r,o)},d:function(t){t&&d(n)}}}function j(t){var n,e;return{c:function(){n=l("div"),e=f("この記事は以前別のところにあったものを移してきたものです。完璧に移植できておらず、表示が崩れているかもしれません。"),this.h()},l:function(t){n=h(t,"DIV",{class:!0});var r=m(n);e=v(r,"この記事は以前別のところにあったものを移してきたものです。完璧に移植できておらず、表示が崩れているかもしれません。"),r.forEach(d),this.h()},h:function(){p(n,"class","callout svelte-f4lmv4")},m:function(t,r){g(t,n,r),y(n,e)},d:function(t){t&&d(n)}}}function H(t){var n;return{c:function(){n=f("Loading mentions...")},l:function(t){n=v(t,"Loading mentions...")},m:function(t,e){g(t,n,e)},p:R,d:function(t){t&&d(n)}}}function V(t){for(var n,e=t[0].children,r=[],o=0;o<e.length;o+=1)r[o]=_(M(t,e,o));var c=null;return e.length||(c=N()),{c:function(){for(var t=0;t<r.length;t+=1)r[t].c();n=L(),c&&c.c()},l:function(t){for(var e=0;e<r.length;e+=1)r[e].l(t);n=L(),c&&c.l(t)},m:function(t,e){for(var o=0;o<r.length;o+=1)r[o].m(t,e);g(t,n,e),c&&c.m(t,e)},p:function(t,o){if(1&o){var a;for(e=t[0].children,a=0;a<e.length;a+=1){var i=M(t,e,a);r[a]?r[a].p(i,o):(r[a]=_(i),r[a].c(),r[a].m(n.parentNode,n))}for(;a<r.length;a+=1)r[a].d(1);r.length=e.length,e.length?c&&(c.d(1),c=null):c||((c=N()).c(),c.m(n.parentNode,n))}},d:function(t){D(r,t),t&&d(n),c&&c.d(t)}}}function N(t){var n;return{c:function(){n=f("Twitterで言及していただけると自動的にここに収集されます。")},l:function(t){n=v(t,"Twitterで言及していただけると自動的にここに収集されます。")},m:function(t,e){g(t,n,e)},d:function(t){t&&d(n)}}}function P(t){var n,e,r=t[4].content.text+"";return{c:function(){n=l("blockquote"),e=f(r),this.h()},l:function(t){n=h(t,"BLOCKQUOTE",{class:!0});var o=m(n);e=v(o,r),o.forEach(d),this.h()},h:function(){p(n,"class","svelte-f4lmv4")},m:function(t,r){g(t,n,r),y(n,e)},p:function(t,n){1&n&&r!==(r=t[4].content.text+"")&&w(e,r)},d:function(t){t&&d(n)}}}function _(t){var n,e,r,o,c,a,i,s,u,x,I,R,D,S,L,A=t[4]["wm-property"]+"",M=t[4].author.name+"",O=b(t[4]["wm-received"])+"",k="mention-of"===t[4]["wm-property"]&&P(t);return{c:function(){n=l("li"),e=l("a"),r=f(A),c=E(),a=l("a"),i=l("img"),x=f(M),R=f("\n          at "),D=f(O),S=E(),k&&k.c(),L=E(),this.h()},l:function(t){n=h(t,"LI",{});var o=m(n);e=h(o,"A",{href:!0});var s=m(e);r=v(s,A),s.forEach(d),c=T(o),a=h(o,"A",{href:!0});var u=m(a);i=h(u,"IMG",{src:!0,alt:!0,class:!0}),x=v(u,M),u.forEach(d),R=v(o,"\n          at "),D=v(o,O),S=T(o),k&&k.l(o),L=T(o),o.forEach(d),this.h()},h:function(){p(e,"href",o=t[4].url),i.src!==(s=t[4].author.photo)&&p(i,"src",s),p(i,"alt",u=t[4].author.name),p(i,"class","svelte-f4lmv4"),p(a,"href",I=t[4].author.url)},m:function(t,o){g(t,n,o),y(n,e),y(e,r),y(n,c),y(n,a),y(a,i),y(a,x),y(n,R),y(n,D),y(n,S),k&&k.m(n,null),y(n,L)},p:function(t,c){1&c&&A!==(A=t[4]["wm-property"]+"")&&w(r,A),1&c&&o!==(o=t[4].url)&&p(e,"href",o),1&c&&i.src!==(s=t[4].author.photo)&&p(i,"src",s),1&c&&u!==(u=t[4].author.name)&&p(i,"alt",u),1&c&&M!==(M=t[4].author.name+"")&&w(x,M),1&c&&I!==(I=t[4].author.url)&&p(a,"href",I),1&c&&O!==(O=b(t[4]["wm-received"])+"")&&w(D,O),"mention-of"===t[4]["wm-property"]?k?k.p(t,c):((k=P(t)).c(),k.m(n,L)):k&&(k.d(1),k=null)},d:function(t){t&&d(n),k&&k.d()}}}function C(t){var n,e,r,o,c,a,i,u,S,L,b,A,M,N,P,_,C,$,q,z,G,B,K,Q,F,J,W,X,Y,Z,tt,nt,et=t[1].title+"",rt=t[1].html+"";document.title=n=t[1].title+" - "+new Date(t[1].date).toISOString().slice(0,10)+" | "+s.title;for(var ot=t[1].date&&k(t),ct=t[1].tags||[],at=[],it=0;it<ct.length;it+=1)at[it]=U(O(t,ct,it));var st=t[1].from&&j();function ut(t,n){return t[0]?V:H}var lt=ut(t),ft=lt(t);return{c:function(){e=l("meta"),r=l("meta"),c=l("meta"),i=l("meta"),u=l("meta"),L=E(),b=l("header"),A=l("div"),N=E(),P=l("h1"),_=f(et),C=E(),ot&&ot.c(),$=E(),q=l("div");for(var t=0;t<at.length;t+=1)at[t].c();z=E(),G=l("p"),B=l("a"),K=f("更新履歴"),Q=E(),st&&st.c(),F=E(),J=l("div"),W=E(),X=l("section"),Y=l("h1"),Z=f("Recent public mentions on Twitter"),tt=E(),nt=l("ol"),ft.c(),this.h()},l:function(t){var n=x('[data-svelte="svelte-14mnzgr"]',document.head);e=h(n,"META",{property:!0,content:!0}),r=h(n,"META",{property:!0,content:!0}),c=h(n,"META",{property:!0,content:!0}),i=h(n,"META",{property:!0,content:!0}),u=h(n,"META",{property:!0,content:!0}),n.forEach(d),L=T(t),b=h(t,"HEADER",{class:!0});var o=m(b);A=h(o,"DIV",{class:!0,style:!0}),m(A).forEach(d),N=T(o),P=h(o,"H1",{class:!0});var a=m(P);_=v(a,et),a.forEach(d),C=T(o),ot&&ot.l(o),$=T(o),q=h(o,"DIV",{class:!0});for(var s=m(q),l=0;l<at.length;l+=1)at[l].l(s);s.forEach(d),z=T(o),G=h(o,"P",{class:!0});var f=m(G);B=h(f,"A",{href:!0});var p=m(B);K=v(p,"更新履歴"),p.forEach(d),f.forEach(d),o.forEach(d),Q=T(t),st&&st.l(t),F=T(t),J=h(t,"DIV",{class:!0}),m(J).forEach(d),W=T(t),X=h(t,"SECTION",{class:!0});var g=m(X);Y=h(g,"H1",{class:!0});var y=m(Y);Z=v(y,"Recent public mentions on Twitter"),y.forEach(d),tt=T(g),nt=h(g,"OL",{});var w=m(nt);ft.l(w),w.forEach(d),g.forEach(d),this.h()},h:function(){p(e,"property","og:type"),p(e,"content","article"),p(r,"property","og:title"),p(r,"content",o=t[1].title+" - "+new Date(t[1].date).toISOString().slice(0,10)+" | "+s.title),p(c,"property","og:description"),p(c,"content",a=t[1].headline),p(i,"property","og:site_name"),p(i,"content",s.title),p(u,"property","og:image"),p(u,"content",S=t[1].header?/^\.{0,2}\//.test(t[1].header)?s.host+"/"+t[1].header:t[1].header:s.host+"/images/default.png"),p(A,"class","img-header svelte-f4lmv4"),p(A,"style",M=t[1].header?"background-image: url(".concat(t[1].header,")"):""),p(P,"class","svelte-f4lmv4"),p(q,"class","tags"),p(B,"href",t[2]),p(G,"class","history svelte-f4lmv4"),p(b,"class","svelte-f4lmv4"),p(J,"class","content svelte-f4lmv4"),p(Y,"class","svelte-f4lmv4"),p(X,"class","mentions svelte-f4lmv4")},m:function(t,n){y(document.head,e),y(document.head,r),y(document.head,c),y(document.head,i),y(document.head,u),g(t,L,n),g(t,b,n),y(b,A),y(b,N),y(b,P),y(P,_),y(b,C),ot&&ot.m(b,null),y(b,$),y(b,q);for(var o=0;o<at.length;o+=1)at[o].m(q,null);y(b,z),y(b,G),y(G,B),y(B,K),g(t,Q,n),st&&st.m(t,n),g(t,F,n),g(t,J,n),J.innerHTML=rt,g(t,W,n),g(t,X,n),y(X,Y),y(Y,Z),y(X,tt),y(X,nt),ft.m(nt,null)},p:function(t,e){var i=I(e,1)[0];if(2&i&&n!==(n=t[1].title+" - "+new Date(t[1].date).toISOString().slice(0,10)+" | "+s.title)&&(document.title=n),2&i&&o!==(o=t[1].title+" - "+new Date(t[1].date).toISOString().slice(0,10)+" | "+s.title)&&p(r,"content",o),2&i&&a!==(a=t[1].headline)&&p(c,"content",a),2&i&&S!==(S=t[1].header?/^\.{0,2}\//.test(t[1].header)?s.host+"/"+t[1].header:t[1].header:s.host+"/images/default.png")&&p(u,"content",S),2&i&&M!==(M=t[1].header?"background-image: url(".concat(t[1].header,")"):"")&&p(A,"style",M),2&i&&et!==(et=t[1].title+"")&&w(_,et),t[1].date?ot?ot.p(t,i):((ot=k(t)).c(),ot.m(b,$)):ot&&(ot.d(1),ot=null),2&i){var l;for(ct=t[1].tags||[],l=0;l<ct.length;l+=1){var f=O(t,ct,l);at[l]?at[l].p(f,i):(at[l]=U(f),at[l].c(),at[l].m(q,null))}for(;l<at.length;l+=1)at[l].d(1);at.length=ct.length}4&i&&p(B,"href",t[2]),t[1].from?st||((st=j()).c(),st.m(F.parentNode,F)):st&&(st.d(1),st=null),2&i&&rt!==(rt=t[1].html+"")&&(J.innerHTML=rt),lt===(lt=ut(t))&&ft?ft.p(t,i):(ft.d(1),(ft=lt(t))&&(ft.c(),ft.m(nt,null)))},i:R,o:R,d:function(t){d(e),d(r),d(c),d(i),d(u),t&&d(L),t&&d(b),ot&&ot.d(),D(at,t),t&&d(Q),st&&st.d(t),t&&d(F),t&&d(J),t&&d(W),t&&d(X),ft.d()}}}var $=function(t,n,e,r){return new(e||(e=Promise))((function(o,c){function a(t){try{s(r.next(t))}catch(t){c(t)}}function i(t){try{s(r.throw(t))}catch(t){c(t)}}function s(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(a,i)}s((r=r.apply(t,n||[])).next())}))};function q(n){var e=n.params;return $(this,void 0,void 0,t.mark((function n(){var r,o;return t.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.fetch("".concat(e.type,"/").concat(e.slug,".json"));case 2:return r=t.sent,t.next=5,r.json();case 5:if(o=t.sent,200!==r.status){t.next=10;break}return t.abrupt("return",{post:o,historyURL:"https://github.com/".concat(s.dataGitHubRepo,"/commits/master/").concat(e.type,"/").concat(e.slug,".md")});case 10:this.error(r.status,o.message);case 11:case"end":return t.stop()}}),n,this)})))}function z(n,e,r){var o=this&&this.__awaiter||function(t,n,e,r){return new(e||(e=Promise))((function(o,c){function a(t){try{s(r.next(t))}catch(t){c(t)}}function i(t){try{s(r.throw(t))}catch(t){c(t)}}function s(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(a,i)}s((r=r.apply(t,n||[])).next())}))},c=e.post,a=e.historyURL,i=e.mentions;return S((function(){return o(void 0,void 0,void 0,t.mark((function n(){var e;return t.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://webmention.io/api/mentions.jf2?target="+encodeURIComponent(s.host+location.pathname.replace(/(?<!\/)$/,"/")));case 2:return e=t.sent,t.t0=r,t.next=6,e.json();case 6:t.t1=i=t.sent,(0,t.t0)(0,t.t1);case 8:case"end":return t.stop()}}),n)})))})),n.$$set=function(t){"post"in t&&r(1,c=t.post),"historyURL"in t&&r(2,a=t.historyURL),"mentions"in t&&r(0,i=t.mentions)},[i,c,a]}var G=function(t){n(r,i);var e=A(r);function r(t){var n;return o(this,r),n=e.call(this),c(a(n),t,z,C,u,{post:1,historyURL:2,mentions:0}),n}return r}();export default G;export{q as preload};
