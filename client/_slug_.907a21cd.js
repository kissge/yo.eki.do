import{c as t,S as e,i as s,s as n,e as r,b as a,d as l,g as o,j as c,l as i,t as h,f as d,m as u,n as m,a as p,q as f,h as g,r as y,p as v,o as E,u as b,v as T,w,x as L,y as k}from"./client.ad92a8a1.js";import{a as M,t as H,b as I}from"./utility.16d055df.js";const j=()=>{class t extends HTMLElement{connectedCallback(){const t=document.createElement("script");Array.from(this.attributes).forEach((e=>t.setAttribute(e.name,e.value)));const e=document.createElement("iframe");e.style.border="0",e.style.width="100%",e.style.height="0",e.style.maxHeight="100vh",e.srcdoc='<body injected style="margin: 0">'+this.innerHTML+t.outerHTML,this.innerHTML="",this.appendChild(e),setTimeout((function t(){if(e.contentDocument?.body?.hasAttribute("injected")){const t=()=>{e.contentDocument?.body?.parentElement&&(e.style.height=`${e.contentDocument.body.parentElement.offsetHeight}px`)};new ResizeObserver(t).observe(e.contentDocument.body),t()}else setTimeout(t,250)}),1)}}customElements.get("x-script")||customElements.define("x-script",t)},{document:A}=T;function R(t,e,s){const n=t.slice();return n[3]=e[s],n}function x(t,e,s){const n=t.slice();return n[6]=e[s],n}function D(t){let e,s,n=I(t[1].date)+"";return{c(){e=r("time"),this.h()},l(t){e=a(t,"TIME",{title:!0,class:!0}),l(e).forEach(o),this.h()},h(){c(e,"title",s=H(t[1].date)),c(e,"class","svelte-1tkryui")},m(t,s){i(t,e,s),e.innerHTML=n},p(t,r){2&r&&n!==(n=I(t[1].date)+"")&&(e.innerHTML=n),2&r&&s!==(s=H(t[1].date))&&c(e,"title",s)},d(t){t&&o(e)}}}function $(t){let e,s,n,p=t[6]+"";return{c(){e=r("div"),s=h("#"),n=h(p),this.h()},l(t){e=a(t,"DIV",{class:!0});var r=l(e);s=d(r,"#"),n=d(r,p),r.forEach(o),this.h()},h(){c(e,"class","tag svelte-1tkryui")},m(t,r){i(t,e,r),u(e,s),u(e,n)},p(t,e){2&e&&p!==(p=t[6]+"")&&m(n,p)},d(t){t&&o(e)}}}function C(t){let e,s;return{c(){e=r("div"),s=h("この記事は以前別のところにあったものを移してきたものです。完璧に移植できておらず、表示が崩れているかもしれません。"),this.h()},l(t){e=a(t,"DIV",{class:!0});var n=l(e);s=d(n,"この記事は以前別のところにあったものを移してきたものです。完璧に移植できておらず、表示が崩れているかもしれません。"),n.forEach(o),this.h()},h(){c(e,"class","callout svelte-1tkryui")},m(t,n){i(t,e,n),u(e,s)},d(t){t&&o(e)}}}function U(t){let e;return{c(){e=h("Loading mentions...")},l(t){e=d(t,"Loading mentions...")},m(t,s){i(t,e,s)},p:v,d(t){t&&o(e)}}}function O(t){let e,s=t[0].children,n=[];for(let e=0;e<s.length;e+=1)n[e]=S(R(t,s,e));let r=null;return s.length||(r=V()),{c(){for(let t=0;t<n.length;t+=1)n[t].c();e=k(),r&&r.c()},l(t){for(let e=0;e<n.length;e+=1)n[e].l(t);e=k(),r&&r.l(t)},m(t,s){for(let e=0;e<n.length;e+=1)n[e].m(t,s);i(t,e,s),r&&r.m(t,s)},p(t,a){if(1&a){let l;for(s=t[0].children,l=0;l<s.length;l+=1){const r=R(t,s,l);n[l]?n[l].p(r,a):(n[l]=S(r),n[l].c(),n[l].m(e.parentNode,e))}for(;l<n.length;l+=1)n[l].d(1);n.length=s.length,s.length?r&&(r.d(1),r=null):r||(r=V(),r.c(),r.m(e.parentNode,e))}},d(t){E(n,t),t&&o(e),r&&r.d(t)}}}function V(t){let e;return{c(){e=h("Twitterで言及していただけると自動的にここに収集されます。")},l(t){e=d(t,"Twitterで言及していただけると自動的にここに収集されます。")},m(t,s){i(t,e,s)},d(t){t&&o(e)}}}function N(t){let e,s,n=t[3].content.text+"";return{c(){e=r("blockquote"),s=h(n),this.h()},l(t){e=a(t,"BLOCKQUOTE",{class:!0});var r=l(e);s=d(r,n),r.forEach(o),this.h()},h(){c(e,"class","svelte-1tkryui")},m(t,n){i(t,e,n),u(e,s)},p(t,e){1&e&&n!==(n=t[3].content.text+"")&&m(s,n)},d(t){t&&o(e)}}}function S(t){let e,s,n,f,y,v,E,b,T,w,k,M,j,A,R,x,D=t[3]["wm-property"]+"",$=t[3].author.name+"",C=I(t[3].published||t[3]["wm-received"])+"",U="mention-of"===t[3]["wm-property"]&&N(t);return{c(){e=r("li"),s=r("a"),n=h(D),y=p(),v=r("a"),E=r("img"),w=h($),M=p(),j=r("time"),R=p(),U&&U.c(),x=p(),this.h()},l(t){e=a(t,"LI",{});var r=l(e);s=a(r,"A",{href:!0});var c=l(s);n=d(c,D),c.forEach(o),y=g(r),v=a(r,"A",{href:!0});var i=l(v);E=a(i,"IMG",{src:!0,alt:!0,class:!0}),w=d(i,$),i.forEach(o),M=g(r),j=a(r,"TIME",{title:!0,class:!0}),l(j).forEach(o),R=g(r),U&&U.l(r),x=g(r),r.forEach(o),this.h()},h(){c(s,"href",f=t[3].url),L(E.src,b=t[3].author.photo)||c(E,"src",b),c(E,"alt",T=t[3].author.name),c(E,"class","svelte-1tkryui"),c(v,"href",k=t[3].author.url),c(j,"title",A=H(t[3].published||t[3]["wm-received"])),c(j,"class","svelte-1tkryui")},m(t,r){i(t,e,r),u(e,s),u(s,n),u(e,y),u(e,v),u(v,E),u(v,w),u(e,M),u(e,j),j.innerHTML=C,u(e,R),U&&U.m(e,null),u(e,x)},p(t,r){1&r&&D!==(D=t[3]["wm-property"]+"")&&m(n,D),1&r&&f!==(f=t[3].url)&&c(s,"href",f),1&r&&!L(E.src,b=t[3].author.photo)&&c(E,"src",b),1&r&&T!==(T=t[3].author.name)&&c(E,"alt",T),1&r&&$!==($=t[3].author.name+"")&&m(w,$),1&r&&k!==(k=t[3].author.url)&&c(v,"href",k),1&r&&C!==(C=I(t[3].published||t[3]["wm-received"])+"")&&(j.innerHTML=C),1&r&&A!==(A=H(t[3].published||t[3]["wm-received"]))&&c(j,"title",A),"mention-of"===t[3]["wm-property"]?U?U.p(t,r):(U=N(t),U.c(),U.m(e,x)):U&&(U.d(1),U=null)},d(t){t&&o(e),U&&U.d()}}}function q(e){let s,n,b,T,k,H,I,j,R,V,N,S,q,z,P,B,K,Q,X,_,F,J,W,Y,Z,tt,et,st,nt,rt,at,lt,ot,ct,it,ht,dt,ut,mt=e[1].title+"",pt=e[1].title+"",ft=e[1].html+"";A.title=s=e[1].title+" - "+M(e[1].date)+" | "+t.title;let gt=e[1].date&&D(e),yt=e[1].tags||[],vt=[];for(let t=0;t<yt.length;t+=1)vt[t]=$(x(e,yt,t));let Et=e[1].from&&C(),bt=function(e){let s,n;return{c(){s=r("x-script"),this.h()},l(t){s=a(t,"X-SCRIPT",{"data-ad-client":!0,async:!0,src:!0}),l(s).forEach(o),this.h()},h(){w(s,"data-ad-client",t.googleAdSenseClientID),w(s,"async",""),L(s.src,n="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js")||w(s,"src","https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js")},m(t,e){i(t,s,e)},p:v,d(t){t&&o(s)}}}();function Tt(t,e){return t[0]?O:U}let wt=Tt(e),Lt=wt(e);return{c(){n=r("meta"),b=r("meta"),k=r("meta"),I=r("meta"),j=r("meta"),V=p(),N=r("header"),S=r("div"),z=p(),P=r("h1"),B=h(mt),K=p(),gt&&gt.c(),Q=p(),X=r("div");for(let t=0;t<vt.length;t+=1)vt[t].c();_=p(),F=r("p"),J=r("a"),W=h("更新履歴"),Y=p(),Z=r("h1"),tt=h(pt),et=p(),Et&&Et.c(),st=p(),nt=r("div"),rt=p(),bt&&bt.c(),at=p(),lt=r("section"),ot=r("h1"),ct=h("Recent public mentions on Twitter"),it=p(),ht=r("ol"),Lt.c(),this.h()},l(t){const e=f('[data-svelte="svelte-zqyuod"]',A.head);n=a(e,"META",{property:!0,content:!0}),b=a(e,"META",{property:!0,content:!0}),k=a(e,"META",{property:!0,content:!0}),I=a(e,"META",{property:!0,content:!0}),j=a(e,"META",{property:!0,content:!0}),e.forEach(o),V=g(t),N=a(t,"HEADER",{class:!0});var s=l(N);S=a(s,"DIV",{class:!0,style:!0}),l(S).forEach(o),z=g(s),P=a(s,"H1",{class:!0});var r=l(P);B=d(r,mt),r.forEach(o),K=g(s),gt&&gt.l(s),Q=g(s),X=a(s,"DIV",{class:!0});var c=l(X);for(let t=0;t<vt.length;t+=1)vt[t].l(c);c.forEach(o),_=g(s),F=a(s,"P",{class:!0});var i=l(F);J=a(i,"A",{href:!0});var h=l(J);W=d(h,"更新履歴"),h.forEach(o),i.forEach(o),s.forEach(o),Y=g(t),Z=a(t,"H1",{class:!0});var u=l(Z);tt=d(u,pt),u.forEach(o),et=g(t),Et&&Et.l(t),st=g(t),nt=a(t,"DIV",{class:!0}),l(nt).forEach(o),rt=g(t),bt&&bt.l(t),at=g(t),lt=a(t,"SECTION",{class:!0});var m=l(lt);ot=a(m,"H1",{class:!0});var p=l(ot);ct=d(p,"Recent public mentions on Twitter"),p.forEach(o),it=g(m),ht=a(m,"OL",{class:!0});var y=l(ht);Lt.l(y),y.forEach(o),m.forEach(o),this.h()},h(){c(n,"property","og:type"),c(n,"content","article"),c(b,"property","og:title"),c(b,"content",T=e[1].title+" - "+M(e[1].date)+" | "+t.title),c(k,"property","og:description"),c(k,"content",H=e[1].headline),c(I,"property","og:site_name"),c(I,"content",t.title),c(j,"property","og:image"),c(j,"content",R=e[1].header?/^\.{0,2}\//.test(e[1].header)?t.host+"/"+e[1].header:e[1].header:t.host+"/images/default.png"),c(S,"class","img-header svelte-1tkryui"),c(S,"style",q=e[1].header?`background-image: url(${e[1].header})`:""),c(P,"class","svelte-1tkryui"),c(X,"class","tags"),c(J,"href",e[2]),c(F,"class","history svelte-1tkryui"),c(N,"class","svelte-1tkryui"),c(Z,"class","floating-header svelte-1tkryui"),c(nt,"class","content svelte-1tkryui"),c(ot,"class","svelte-1tkryui"),ht.reversed=!0,c(ht,"class","svelte-1tkryui"),c(lt,"class","mentions svelte-1tkryui")},m(t,e){u(A.head,n),u(A.head,b),u(A.head,k),u(A.head,I),u(A.head,j),i(t,V,e),i(t,N,e),u(N,S),u(N,z),u(N,P),u(P,B),u(N,K),gt&&gt.m(N,null),u(N,Q),u(N,X);for(let t=0;t<vt.length;t+=1)vt[t].m(X,null);u(N,_),u(N,F),u(F,J),u(J,W),i(t,Y,e),i(t,Z,e),u(Z,tt),i(t,et,e),Et&&Et.m(t,e),i(t,st,e),i(t,nt,e),nt.innerHTML=ft,i(t,rt,e),bt&&bt.m(t,e),i(t,at,e),i(t,lt,e),u(lt,ot),u(ot,ct),u(lt,it),u(lt,ht),Lt.m(ht,null),dt||(ut=y(G.call(null,P)),dt=!0)},p(e,[n]){if(2&n&&s!==(s=e[1].title+" - "+M(e[1].date)+" | "+t.title)&&(A.title=s),2&n&&T!==(T=e[1].title+" - "+M(e[1].date)+" | "+t.title)&&c(b,"content",T),2&n&&H!==(H=e[1].headline)&&c(k,"content",H),2&n&&R!==(R=e[1].header?/^\.{0,2}\//.test(e[1].header)?t.host+"/"+e[1].header:e[1].header:t.host+"/images/default.png")&&c(j,"content",R),2&n&&q!==(q=e[1].header?`background-image: url(${e[1].header})`:"")&&c(S,"style",q),2&n&&mt!==(mt=e[1].title+"")&&m(B,mt),e[1].date?gt?gt.p(e,n):(gt=D(e),gt.c(),gt.m(N,Q)):gt&&(gt.d(1),gt=null),2&n){let t;for(yt=e[1].tags||[],t=0;t<yt.length;t+=1){const s=x(e,yt,t);vt[t]?vt[t].p(s,n):(vt[t]=$(s),vt[t].c(),vt[t].m(X,null))}for(;t<vt.length;t+=1)vt[t].d(1);vt.length=yt.length}4&n&&c(J,"href",e[2]),2&n&&pt!==(pt=e[1].title+"")&&m(tt,pt),e[1].from?Et||(Et=C(),Et.c(),Et.m(st.parentNode,st)):Et&&(Et.d(1),Et=null),2&n&&ft!==(ft=e[1].html+"")&&(nt.innerHTML=ft),wt===(wt=Tt(e))&&Lt?Lt.p(e,n):(Lt.d(1),Lt=wt(e),Lt&&(Lt.c(),Lt.m(ht,null)))},i:v,o:v,d(t){o(n),o(b),o(k),o(I),o(j),t&&o(V),t&&o(N),gt&&gt.d(),E(vt,t),t&&o(Y),t&&o(Z),t&&o(et),Et&&Et.d(t),t&&o(st),t&&o(nt),t&&o(rt),bt&&bt.d(t),t&&o(at),t&&o(lt),Lt.d(),dt=!1,ut()}}}async function z({params:e}){const s=await this.fetch(`/${e.type}/${e.slug}.json`),n=await s.json();if(200===s.status)return{post:n,historyURL:`https://github.com/${t.dataGitHubRepo}/commits/master/${e.type}/${e.slug}.md`};this.error(s.status,n.message)}function G(t){const e=new IntersectionObserver((([{isIntersecting:t}])=>{document.body.classList.toggle("scrolled-down",!t)}));return e.observe(t),{destroy(){e.disconnect(),document.body.classList.remove("scrolled-down")}}}function P(e,s,n){let{post:r}=s,{historyURL:a}=s,{mentions:l}=s;return b((()=>{fetch("https://webmention.io/api/mentions.jf2?target="+encodeURIComponent(t.host+location.pathname+(location.pathname.match(/\/$/)?"":"/"))).then((t=>t.json().then((t=>{n(0,l=t),l.children.sort(((t,e)=>(e.published||e["wm-received"]).localeCompare(t.published||t["wm-received"])))})))),j()})),e.$$set=t=>{"post"in t&&n(1,r=t.post),"historyURL"in t&&n(2,a=t.historyURL),"mentions"in t&&n(0,l=t.mentions)},[l,r,a]}class B extends e{constructor(t){super(),s(this,t,P,q,n,{post:1,historyURL:2,mentions:0})}}export{B as default,z as preload};
