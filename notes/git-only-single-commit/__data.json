{"entity":{"name":"コミット・タグを指定してその時点でのツリーだけをgit cloneしてくる","nameSegmented":["コミット・タグを","指定して","その","時点での","ツリーだけを","git ","cloneしてくる"],"kind":"note","urlPath":"/notes/git-only-single-commit","historyURL":"https://github.com/kissge/yo.eki.do/commits/master/notes/git-only-single-commit.md","lastModified":"2022-04-17T12:08:43.000Z","attributes":{"from":"wordpress","title":"コミット・タグを指定してその時点でのツリーだけをgit cloneしてくる","date":"2015-11-10T20:03:33.000Z"},"tags":[],"body":"<p>タイトルは若干釣りだが……。\n超でかいプロジェクトがあって、その <em>ある時点での</em> ソースコードに対して <code>grep</code> とかしたい、というような状況で必要になった。</p>\n<!--more-->\n\n<p>やってみたところ、 <em>ある時点での</em> っていうところを満たすためには <code>git-clone</code> を使わないほうが近道だった。\nこんな感じ。</p>\n<pre><code class=\"language-sh\"><span class=\"hljs-built_in\">mkdir</span> foo\n<span class=\"hljs-built_in\">cd</span> foo\ngit init\ngit remote add origin &lt;<span class=\"hljs-built_in\">clone</span>する元のURL&gt;\ngit fetch --depth 1 origin &lt;コミットを指定するSHA1ハッシュやタグ名&gt;\ngit reset --hard FETCH_HEAD\n</code></pre>\n<p><code>clone</code> を使わないのがちょっとおもしろい。ちょっと。\nもちろん最新の <code>master</code> から取ってくるだけなら、たぶん <code>clone</code> すればよい。</p>\n","headline":"タイトルは若干釣りだが……。超でかいプロジェクトがあって、その ある時点での ソースコードに対して grep とかしたい、というような状況で必要になった。やってみたところ、 ある時点での っていうところを満たすためには git-clone を使わないほうが近道だった。こんな感じ。mkdir foo cd foo git init git remote add origin &lt;cloneする元のURL&gt;git fetch --depth 1 origin &lt;コミットを指定するSHA1ハッシュやタグ名&gt;git reset --hard FETCH_HEAD clone を使わないのがちょっとおもしろい。ちょっと。もちろん最新の master から取ってくるだけなら、たぶん clone すればよい。","links":{"to":{"urlPath":"/notes/git-only-single-commit","entities":[]},"from":{"urlPath":"/notes/git-only-single-commit","entities":[{"name":"Emacs: Windowsでやっていく2017","nameSegmented":["Emacs: ","Windowsで","やっていく","2017"],"kind":"note","urlPath":"/notes/emacs-windows-2017","historyURL":"https://github.com/kissge/yo.eki.do/commits/master/notes/emacs-windows-2017.md","lastModified":"2022-07-02T05:00:46.000Z","attributes":{"from":"wordpress","title":"Emacs: Windowsでやっていく2017","date":"2017-12-08T00:00:08.000Z","tags":["アドベントカレンダー"]},"tags":[{"name":"アドベントカレンダー","kind":"tag","urlPath":"/mono/%E3%82%A2%E3%83%89%E3%83%99%E3%83%B3%E3%83%88%E3%82%AB%E3%83%AC%E3%83%B3%E3%83%80%E3%83%BC"}]}]},"kind":{"urlPath":"/notes/git-only-single-commit","entities":[]}}}}