<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" href="/images/favicon.svg" type="image/svg+xml" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.5.1/styles/github.min.css" />
    <meta http-equiv="content-security-policy" content=""><title>コミット・タグを指定してその時点でのツリーだけをgit cloneしてくる - 2015-11-11 | 葉月夜堂</title><link href="https://twitter.com/p_km" rel="me" data-svelte="svelte-10crdf0">
    <link rel="webmention" href="https://webmention.io/sveltekit-prerender/webmention" data-svelte="svelte-10crdf0">
    <link rel="pingback" href="https://webmention.io/sveltekit-prerender/xmlrpc" data-svelte="svelte-10crdf0"><meta property="og:type" content="article" data-svelte="svelte-6t30ru"><meta property="og:title" content="コミット・タグを指定してその時点でのツリーだけをgit cloneしてくる - 2015-11-11 | 葉月夜堂" data-svelte="svelte-6t30ru"><meta property="og:description" content="タイトルは若干釣りだが……。超でかいプロジェクトがあって、その ある時点での ソースコードに対して grep とかしたい、というような状況で必要になった。やってみたところ、 ある時点での っていうところを満たすためには git-clone を使わないほうが近道だった。こんな感じ。mkdir foo cd foo git init git remote add origin &amp;lt;cloneする元のURL&amp;gt;git fetch --depth 1 origin &amp;lt;コミットを指定するSHA1ハッシュやタグ名&amp;gt;git reset --hard FETCH_HEAD clone を使わないのがちょっとおもしろい。ちょっと。もちろん最新の master から取ってくるだけなら、たぶん clone すればよい。" data-svelte="svelte-6t30ru"><meta property="og:site_name" content="葉月夜堂" data-svelte="svelte-6t30ru"><meta property="og:image" content="http://sveltekit-prerender/images/favicon.svg" data-svelte="svelte-6t30ru">
	<link rel="stylesheet" href="/_app/immutable/assets/pages/__layout.svelte-211fd336.css">
	<link rel="stylesheet" href="/_app/immutable/assets/time.svelte_svelte_type_style_lang-61ea3f89.css">
	<link rel="stylesheet" href="/_app/immutable/assets/pages/_...entity_.svelte-1f397eed.css">
	<link rel="modulepreload" href="/_app/immutable/start-b31939b7.js">
	<link rel="modulepreload" href="/_app/immutable/chunks/index-7416df8b.js">
	<link rel="modulepreload" href="/_app/immutable/chunks/singletons-d1fb5791.js">
	<link rel="modulepreload" href="/_app/immutable/pages/__layout.svelte-f62cab73.js">
	<link rel="modulepreload" href="/_app/immutable/chunks/time.svelte_svelte_type_style_lang-2ab901cd.js">
	<link rel="modulepreload" href="/_app/immutable/pages/_...entity_.svelte-be1775c8.js">
	<link rel="modulepreload" href="/_app/immutable/chunks/tags-f0769dcf.js">
  </head>
  <body>
    <div>




<nav><ul><li><a sveltekit:prefetch href="/">葉月夜堂</a>
      </li><li><a sveltekit:prefetch href="/about">about</a>
      </li></ul></nav>



<div class="nav-background svelte-nthksl isHeaderInView" style=""></div>

<main><article data-kind="note" class="svelte-nthksl"><header class="svelte-nthksl"><h1 class="svelte-nthksl">コミット・タグを<wbr>指定して<wbr>その<wbr>時点での<wbr>ツリーだけを<wbr>git <wbr>cloneしてくる</h1>

      

      <section class="meta svelte-nthksl"><p class="svelte-nthksl"><time title="6 年半前" class="svelte-5ni4x2">Tue Nov 10 2015 20:03:33 GMT+0000 (Coordinated Universal Time)</time></p>

        <p class="svelte-nthksl"><a href="https://github.com/kissge/yo.eki.do/commits/master/notes/git-only-single-commit.md">更新履歴</a></p></section>

      

      <section class="header-image svelte-nthksl" style=""></section></header>

    <section class="body svelte-nthksl"><!-- HTML_TAG_START --><p>タイトルは若干釣りだが……。
超でかいプロジェクトがあって、その <em>ある時点での</em> ソースコードに対して <code>grep</code> とかしたい、というような状況で必要になった。</p>
<!--more-->

<p>やってみたところ、 <em>ある時点での</em> っていうところを満たすためには <code>git-clone</code> を使わないほうが近道だった。
こんな感じ。</p>
<pre><code class="language-sh"><span class="hljs-built_in">mkdir</span> foo
<span class="hljs-built_in">cd</span> foo
git init
git remote add origin &lt;<span class="hljs-built_in">clone</span>する元のURL&gt;
git fetch --depth 1 origin &lt;コミットを指定するSHA1ハッシュやタグ名&gt;
git reset --hard FETCH_HEAD
</code></pre>
<p><code>clone</code> を使わないのがちょっとおもしろい。ちょっと。
もちろん最新の <code>master</code> から取ってくるだけなら、たぶん <code>clone</code> すればよい。</p>
<!-- HTML_TAG_END --></section>

    <section class="links-section svelte-nthksl"><ul class="links"><li class="link-group"><h1 class="link-group-title">この記事にリンクしているもの</h1>
      <ul class="link-group-links"><li class="link"><a sveltekit:prefetch href="/notes/emacs-windows-2017">Emacs: Windowsでやっていく2017</a>
            <small title="Fri Dec 08 2017 00:00:08 GMT+0000 (Coordinated Universal Time)"><time>2017-12-08</time>
              </small>
            <span class="tags"><a sveltekit:prefetch href="/mono/%E3%82%A2%E3%83%89%E3%83%99%E3%83%B3%E3%83%88%E3%82%AB%E3%83%AC%E3%83%B3%E3%83%80%E3%83%BC" class="tag svelte-k4uca" data-kind="tag">アドベントカレンダー</a>
  </span>
            <p></p>
          </li></ul>
    </li></ul></section>

    <section class="mentions svelte-19gm1ik"><section class="reaction svelte-19gm1ik"><a href="https://twitter.com/intent/tweet?url=" class="svelte-19gm1ik" style="background-image: url(/_app/immutable/assets/message-circle-c0b45d48.svg); color: #3579d1;"><small class="svelte-19gm1ik">Twitterで</small>
        <span class="svelte-19gm1ik">コメントする</span></a></section>

  <h1 class="svelte-19gm1ik">Mentions</h1>
  <ol reversed class="svelte-19gm1ik loading"></ol>
</section></article>
</main>

<footer>Built with <a href="https://github.com/kissge/monolog">monolog</a>
</footer>


		<script type="module" data-sveltekit-hydrate="19uege3">
		import { start } from "/_app/immutable/start-b31939b7.js";
		start({
			target: document.querySelector('[data-sveltekit-hydrate="19uege3"]').parentNode,
			paths: {"base":"","assets":""},
			session: {},
			route: true,
			spa: false,
			trailing_slash: "always",
			hydrate: {
				status: 200,
				error: null,
				nodes: [0, 2],
				params: {entity:"notes\u002Fgit-only-single-commit\u002F"},
				routeId: "[...entity]"
			}
		});
	</script><script type="application/json" sveltekit:data-type="props">{"entity":{"name":"コミット・タグを指定してその時点でのツリーだけをgit cloneしてくる","nameSegmented":["コミット・タグを","指定して","その","時点での","ツリーだけを","git ","cloneしてくる"],"kind":"note","urlPath":"/notes/git-only-single-commit","historyURL":"https://github.com/kissge/yo.eki.do/commits/master/notes/git-only-single-commit.md","lastModified":"2022-04-17T12:08:43.000Z","attributes":{"from":"wordpress","title":"コミット・タグを指定してその時点でのツリーだけをgit cloneしてくる","date":"2015-11-10T20:03:33.000Z"},"tags":[],"body":"\u003Cp>タイトルは若干釣りだが……。\n超でかいプロジェクトがあって、その \u003Cem>ある時点での\u003C/em> ソースコードに対して \u003Ccode>grep\u003C/code> とかしたい、というような状況で必要になった。\u003C/p>\n\u003C!--more-->\n\n\u003Cp>やってみたところ、 \u003Cem>ある時点での\u003C/em> っていうところを満たすためには \u003Ccode>git-clone\u003C/code> を使わないほうが近道だった。\nこんな感じ。\u003C/p>\n\u003Cpre>\u003Ccode class=\"language-sh\">\u003Cspan class=\"hljs-built_in\">mkdir\u003C/span> foo\n\u003Cspan class=\"hljs-built_in\">cd\u003C/span> foo\ngit init\ngit remote add origin &lt;\u003Cspan class=\"hljs-built_in\">clone\u003C/span>する元のURL&gt;\ngit fetch --depth 1 origin &lt;コミットを指定するSHA1ハッシュやタグ名&gt;\ngit reset --hard FETCH_HEAD\n\u003C/code>\u003C/pre>\n\u003Cp>\u003Ccode>clone\u003C/code> を使わないのがちょっとおもしろい。ちょっと。\nもちろん最新の \u003Ccode>master\u003C/code> から取ってくるだけなら、たぶん \u003Ccode>clone\u003C/code> すればよい。\u003C/p>\n","headline":"タイトルは若干釣りだが……。超でかいプロジェクトがあって、その ある時点での ソースコードに対して grep とかしたい、というような状況で必要になった。やってみたところ、 ある時点での っていうところを満たすためには git-clone を使わないほうが近道だった。こんな感じ。mkdir foo cd foo git init git remote add origin &lt;cloneする元のURL&gt;git fetch --depth 1 origin &lt;コミットを指定するSHA1ハッシュやタグ名&gt;git reset --hard FETCH_HEAD clone を使わないのがちょっとおもしろい。ちょっと。もちろん最新の master から取ってくるだけなら、たぶん clone すればよい。","links":{"to":{"urlPath":"/notes/git-only-single-commit","entities":[]},"from":{"urlPath":"/notes/git-only-single-commit","entities":[{"name":"Emacs: Windowsでやっていく2017","nameSegmented":["Emacs: ","Windowsで","やっていく","2017"],"kind":"note","urlPath":"/notes/emacs-windows-2017","historyURL":"https://github.com/kissge/yo.eki.do/commits/master/notes/emacs-windows-2017.md","lastModified":"2022-06-11T07:33:39.000Z","attributes":{"from":"wordpress","title":"Emacs: Windowsでやっていく2017","date":"2017-12-08T00:00:08.000Z","tags":["アドベントカレンダー"]},"tags":[{"name":"アドベントカレンダー","kind":"tag","urlPath":"/mono/%E3%82%A2%E3%83%89%E3%83%99%E3%83%B3%E3%83%88%E3%82%AB%E3%83%AC%E3%83%B3%E3%83%80%E3%83%BC"}]}]},"kind":{"urlPath":"/notes/git-only-single-commit","entities":[]}}}}</script></div>
  </body>
</html>
