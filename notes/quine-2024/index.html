<!doctype html>
<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" href="/images/favicon.svg" type="image/svg+xml" />
    
	<style>@import"https://fonts.googleapis.com/css2?family=Shippori+Mincho+B1:wght@400;800&amp;display=swap";*,*:before,*:after{box-sizing:border-box}body,h1,h2,h3,h4,p,figure,blockquote,dl,dd{margin:0}ul[role=list],ol[role=list]{list-style:none}html:focus-within{scroll-behavior:smooth}body{min-height:100vh;text-rendering:optimizeSpeed;line-height:1.5}a:not([class]){text-decoration-skip-ink:auto}img,picture{max-width:100%;display:block}input,button,textarea,select{font:inherit}@media (prefers-reduced-motion: reduce){html:focus-within{scroll-behavior:auto}*,*:before,*:after{animation-duration:.01ms!important;animation-iteration-count:1!important;transition-duration:.01ms!important;scroll-behavior:auto!important}}pre code.hljs{display:block;overflow-x:auto;padding:1em}code.hljs{padding:3px 5px}/*!
  Theme: GitHub
  Description: Light theme as seen on github.com
  Author: github.com
  Maintainer: @Hirse
  Updated: 2021-05-15

  Outdated base version: https://github.com/primer/github-syntax-light
  Current colors taken from GitHub's CSS
*/.hljs{color:#24292e;background:#fff}.hljs-doctag,.hljs-keyword,.hljs-meta .hljs-keyword,.hljs-template-tag,.hljs-template-variable,.hljs-type,.hljs-variable.language_{color:#d73a49}.hljs-title,.hljs-title.class_,.hljs-title.class_.inherited__,.hljs-title.function_{color:#6f42c1}.hljs-attr,.hljs-attribute,.hljs-literal,.hljs-meta,.hljs-number,.hljs-operator,.hljs-variable,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-id{color:#005cc5}.hljs-regexp,.hljs-string,.hljs-meta .hljs-string{color:#032f62}.hljs-built_in,.hljs-symbol{color:#e36209}.hljs-comment,.hljs-code,.hljs-formula{color:#6a737d}.hljs-name,.hljs-quote,.hljs-selector-tag,.hljs-selector-pseudo{color:#22863a}.hljs-subst{color:#24292e}.hljs-section{color:#005cc5;font-weight:700}.hljs-bullet{color:#735c0f}.hljs-emphasis{color:#24292e;font-style:italic}.hljs-strong{color:#24292e;font-weight:700}.hljs-addition{color:#22863a;background-color:#f0fff4}.hljs-deletion{color:#b31d28;background-color:#ffeef0}@font-face{font-family:Emoji;src:local("Segoe UI Emoji"),local("Segoe UI Symbol"),local("Apple Color Emoji"),local("Noto Color Emoji"),local("Noto Emoji");font-display:swap;unicode-range:U+203C,U+2049,U+20E3,U+2139,U+231A-231B,U+2328,U+23CF,U+23E9-23F3,U+23F8-23FA,U+25AA-25AB,U+25FB-25FE,U+2600-2604,U+260E,U+2611,U+2614-2615,U+2618,U+261D,U+2620,U+2622-2623,U+2626,U+262A,U+262E-262F,U+2638-263A,U+2648-2653,U+2660,U+2663,U+2665-2666,U+2668,U+267B,U+267F,U+2692-2697,U+2699,U+269B-269C,U+26A0-26A1,U+26AA-26AB,U+26B0-26B1,U+26BD-26BE,U+26C4-26C5,U+26C8,U+26CE-26CF,U+26D1,U+26D3-26D4,U+26E9-26EA,U+26F0-26F5,U+26F7-26FA,U+26FD,U+2702,U+2705,U+2708-270D,U+270F,U+2712,U+2714,U+2716,U+271D,U+2721,U+2728,U+2733-2734,U+2744,U+2747,U+274C,U+274E,U+2753-2755,U+2757,U+2763-2764,U+2795-2797,U+27A1,U+27B0,U+27BF,U+2B05-2B07,U+2B1B-2B1C,U+2B50,U+2B55,U+3030,U+3297,U+3299,U+FE0F,U+1F004,U+1F0CF,U+1F170-1F171,U+1F17E-1F17F,U+1F18E,U+1F191-1F19A,U+1F1E6-1F1FF,U+1F201-1F202,U+1F21A,U+1F22F,U+1F232-1F23A,U+1F250-1F251,U+1F300-1F321,U+1F324-1F393,U+1F396-1F397,U+1F399-1F39B,U+1F39E-1F3F0,U+1F3F3-1F3F5,U+1F3F7-1F4FD,U+1F4FF-1F53D,U+1F549-1F54E,U+1F550-1F567,U+1F56F-1F570,U+1F573-1F57A,U+1F587,U+1F58A-1F58D,U+1F590,U+1F595-1F596,U+1F5A4-1F5A5,U+1F5A8,U+1F5B1-1F5B2,U+1F5BC,U+1F5C2-1F5C4,U+1F5D1-1F5D3,U+1F5DC-1F5DE,U+1F5E1,U+1F5E3,U+1F5E8,U+1F5EF,U+1F5F3,U+1F5FA-1F64F,U+1F680-1F6C5,U+1F6CB-1F6D2,U+1F6E0-1F6E5,U+1F6E9,U+1F6EB-1F6EC,U+1F6F0,U+1F6F3-1F6F8,U+1F910-1F93A,U+1F93C-1F93E,U+1F940-1F945,U+1F947-1F94C,U+1F950-1F96B,U+1F980-1F997,U+1F9C0,U+1F9D0-1F9E6,U+E0062-E0063,U+E0065,U+E0067,U+E006C,U+E006E,U+E0073-E0074,U+E0077,U+E007F}@font-face{font-family:Emoji;font-weight:700;src:local("Segoe UI Emoji"),local("Segoe UI Symbol"),local("Apple Color Emoji"),local("Noto Color Emoji") local("Noto Emoji");font-display:swap;unicode-range:U+203C,U+2049,U+20E3,U+2139,U+231A-231B,U+2328,U+23CF,U+23E9-23F3,U+23F8-23FA,U+25AA-25AB,U+25FB-25FE,U+2600-2604,U+260E,U+2611,U+2614-2615,U+2618,U+261D,U+2620,U+2622-2623,U+2626,U+262A,U+262E-262F,U+2638-263A,U+2648-2653,U+2660,U+2663,U+2665-2666,U+2668,U+267B,U+267F,U+2692-2697,U+2699,U+269B-269C,U+26A0-26A1,U+26AA-26AB,U+26B0-26B1,U+26BD-26BE,U+26C4-26C5,U+26C8,U+26CE-26CF,U+26D1,U+26D3-26D4,U+26E9-26EA,U+26F0-26F5,U+26F7-26FA,U+26FD,U+2702,U+2705,U+2708-270D,U+270F,U+2712,U+2714,U+2716,U+271D,U+2721,U+2728,U+2733-2734,U+2744,U+2747,U+274C,U+274E,U+2753-2755,U+2757,U+2763-2764,U+2795-2797,U+27A1,U+27B0,U+27BF,U+2B05-2B07,U+2B1B-2B1C,U+2B50,U+2B55,U+3030,U+3297,U+3299,U+FE0F,U+1F004,U+1F0CF,U+1F170-1F171,U+1F17E-1F17F,U+1F18E,U+1F191-1F19A,U+1F1E6-1F1FF,U+1F201-1F202,U+1F21A,U+1F22F,U+1F232-1F23A,U+1F250-1F251,U+1F300-1F321,U+1F324-1F393,U+1F396-1F397,U+1F399-1F39B,U+1F39E-1F3F0,U+1F3F3-1F3F5,U+1F3F7-1F4FD,U+1F4FF-1F53D,U+1F549-1F54E,U+1F550-1F567,U+1F56F-1F570,U+1F573-1F57A,U+1F587,U+1F58A-1F58D,U+1F590,U+1F595-1F596,U+1F5A4-1F5A5,U+1F5A8,U+1F5B1-1F5B2,U+1F5BC,U+1F5C2-1F5C4,U+1F5D1-1F5D3,U+1F5DC-1F5DE,U+1F5E1,U+1F5E3,U+1F5E8,U+1F5EF,U+1F5F3,U+1F5FA-1F64F,U+1F680-1F6C5,U+1F6CB-1F6D2,U+1F6E0-1F6E5,U+1F6E9,U+1F6EB-1F6EC,U+1F6F0,U+1F6F3-1F6F8,U+1F910-1F93A,U+1F93C-1F93E,U+1F940-1F945,U+1F947-1F94C,U+1F950-1F96B,U+1F980-1F997,U+1F9C0,U+1F9D0-1F9E6,U+E0062-E0063,U+E0065,U+E0067,U+E006C,U+E006E,U+E0073-E0074,U+E0077,U+E007F}*{text-wrap:pretty;word-break:auto-phrase;overflow-wrap:anywhere;line-break:strict}body{padding-top:4rem;font-family:Emoji,"Shippori Mincho B1",serif;font-weight:400;line-height:1.8;color:#222;text-underline-offset:.1em}a{color:#3d2fb9;text-decoration:underline;text-decoration-color:#d5d0fb;transition:text-decoration-color .15s ease-in-out}a:hover{text-decoration-color:transparent}.link-icon{height:1em;margin-right:3px;vertical-align:middle;transform:translateY(-1px)}.monolog-link.empty{color:#b92f3d;text-decoration:none}nav{position:fixed;top:0;left:0;z-index:999;width:100%;height:4rem;padding:1rem .5rem}nav ul{padding:0;margin:0}nav li{display:inline-block;margin-right:5px}nav a{position:relative;padding:0 1em;color:#222;text-decoration:none;text-shadow:0 0 8px #fff,0 0 8px #fff,0 0 8px #fff;transition:text-shadow 4s ease-in-out}nav a:after{position:absolute;bottom:calc(-1rem - 7px);left:0;display:block;width:0;height:5px;content:"";background-color:#eee;transition:width .2s ease-in-out}nav a:hover,nav a[aria-current]{text-shadow:0 0 8px #fff,0 0 8px #fff,0 0 8px #fff,0 0 8px #fff,0 0 8px #fff,0 0 8px #fff,0 0 8px #fff,0 0 8px #fff,0 0 8px #fff;transition-duration:.2s}nav a:hover:after,nav a[aria-current]:after{width:100%}nav a[href="/"]:before{display:inline-block;width:1em;height:1em;margin-right:3px;margin-left:1px;vertical-align:middle;content:"";background-image:url(../../../images/favicon.svg);background-size:contain}nav.isTop{background-image:url(../../../images/default.svg);background-position:left top;background-size:cover;border-bottom:1px solid #ccc}.global-footer{padding:2em;font-size:.8em;text-align:center}.global-footer:not(:hover){opacity:.5}main{max-width:1000px;padding:0 40px;margin:40px auto}.links{display:table;padding:0;margin:0;line-height:1.6;border-spacing:0 3em;border-collapse:separate}@media screen and (width <= 800px){.links{display:block;margin-top:3em;border-spacing:unset}}.link-group{display:table-row}@media screen and (width <= 800px){.link-group{display:block;margin-bottom:3em}}.link-group-title{display:table-cell;width:11em;padding-right:1em;font-size:1em;font-weight:inherit}@media screen and (width <= 800px){.link-group-title{display:block;width:auto;padding-right:0;margin-bottom:1em;font-size:1.2em}}.link-group-links{display:table-cell;padding-left:1em;list-style:none;border-left:1px solid #ccc}@media screen and (width <= 800px){.link-group-links{display:block;padding-left:0;border-left:none}}.link{padding-left:2em;margin-bottom:.4em;text-indent:-2em}@media screen and (width <= 800px){.link{padding-left:1em;text-indent:-1em}}.link>*{text-indent:0}.link .tags{white-space:nowrap}.link p{display:inline;padding-left:5px;color:#757575}.link small{font-size:.6em;color:#333;white-space:nowrap}:target{animation:target-highlight 1s 3}@keyframes target-highlight{0%{background:#eee}to{background:unset}}sup{font-size:smaller;vertical-align:super}img{display:revert}dialog button{all:unset}::backdrop{background-color:#000a}

@charset "UTF-8";.body>*{max-width:100%;margin:1.5em 0}.body h1,.body h2,.body h3,.body h4,.body h5,.body h6{font-weight:700;line-height:1.3}.body>h1:before,.body>h2:before,.body>h3:before,.body>h4:before,.body>h5:before,.body>h6:before{display:inline-block;width:8em;padding-right:8px;margin-left:-8em;text-align:right;opacity:.3}.body h1{font-size:1.8em}.body h2{font-size:1.5em}.body h3{font-size:1.2em}.body>h1:before{content:"#"}.body>h2:before{content:"##"}.body>h3:before{content:"###"}.body>h4:before{content:"####"}.body>h5:before{content:"#####"}.body>h6:before{content:"######"}.body p{text-align:justify;text-indent:1em}.body blockquote{padding-left:1.2em;border-left:5px solid #8fb6f0}.body pre{max-height:60vh;padding:1.5em;overflow:auto;font-family:Menlo,Inconsolata,Courier New,Courier,monospace;line-height:1.4;white-space:pre;background-color:#f9f9f9;border-radius:3px;box-shadow:inset 1px 1px 5px #0000000d;-webkit-locale:"auto"}.body pre,.body pre *{text-wrap:initial;overflow-wrap:initial}.body .no-wrap{overflow:auto}.body .no-wrap pre{display:table;width:auto;max-width:650%;margin-right:-550%}.body .dense,.body .dense *{font-size:.8rem;line-height:.95}.body ol,.body ul{display:block;padding-inline-start:3em}.body ol ul,.body ul ul{list-style-type:circle}.body ol ol,.body ol ul,.body ul ol,.body ul ul{border-left:1px dashed transparent}.body ol ol ul,.body ol ul ul,.body ul ol ul,.body ul ul ul{list-style-type:square}.body ol ol ol ul,.body ol ol ul ul,.body ol ul ol ul,.body ol ul ul ul,.body ul ol ol ul,.body ul ol ul ul,.body ul ul ol ul,.body ul ul ul ul{list-style-type:disc}.body ol ol:hover>li:not(:hover),.body ol ul:hover>li:not(:hover),.body ul ol:hover>li:not(:hover),.body ul ul:hover>li:not(:hover){opacity:.35;transition-delay:2s}.body ol:hover>li>*>li:hover,.body ul:hover>li>*>li:hover{position:relative}.body ol:hover>li>*>li:hover:before,.body ul:hover>li>*>li:hover:before{position:absolute;top:-.25em;left:-2.75em;display:block;width:8px;font-weight:700;content:"⤷";opacity:.5}.body ol>li:hover>ol,.body ol>li:hover>ul,.body ul>li:hover>ol,.body ul>li:hover>ul{border-left-color:#ccc}.body ol{list-style-type:decimal}.body ol>li>ol,.body ol>li>ul{padding-inline-start:3.75em;margin-inline-start:-.75em}.body ul{list-style-type:disc}.body ul>li>ol,.body ul>li>ul{padding-inline-start:4.05em;margin-inline-start:-1.05em}.body>ol,.body>ul,.body blockquote>ol,.body blockquote>ul{padding-inline-start:1em}.body li{transition:opacity .5s 0s ease-in-out}.body .table-wrapper{overflow:auto}@media screen and (width >= 1400px){.body .table-wrapper{max-width:calc(100vw - 40px);margin-right:calc((100% - (100vw - 40px))/2);margin-left:calc((100% - (100vw - 40px))/2)}}.body table{width:auto;max-width:650%;margin:1.5em -550% 1.5em -.5em;font-size:.8em;line-height:1.4;border-spacing:.5em;border-collapse:separate}@media screen and (width >= 1400px){.body table{margin:0 auto}}.body table thead th{font-weight:700;border-bottom:2px solid #888}.body table tbody tr:nth-child(2n){background-color:#f7f1f1}.body table th,.body table td{padding:.4em}.body table [align=center]{text-align:center}.body table [align=right]{text-align:right}.body figure{text-align:center;cursor:pointer}.body figure img{box-shadow:0 0 12px 3px #ccc8}.body figcaption{font-size:.8em;line-height:1.25;color:#888}.body>img{display:block;margin:1.5em auto}.body>iframe{display:block;margin:1.5em auto}.body hr{position:relative;display:block;padding:4em 0;border:none}.body hr:before{position:absolute;left:15%;display:block;width:70%;height:100%;content:"";border-top:1px dashed #ccc}.body hr:after{position:absolute;top:0;left:calc(50% - 1.5em);display:block;width:3em;height:100%;padding-left:calc(1em + 3px);margin:auto;content:"";background-color:#fff;background-image:url(../../../images/favicon.svg);background-repeat:no-repeat;background-position:center;background-size:1em}.body .footnotes{margin-top:6em;color:#888}.body del{color:#777;text-decoration:line-through;text-decoration-thickness:3px;text-decoration-color:#af2929;transition:text-decoration-color .15s ease-in-out}.body del:hover{text-decoration-color:transparent;opacity:.5}.body strong{font-weight:700}.body :not(em)>strong{background:linear-gradient(transparent 60%,#eef7cd 60%)}.body em{font-style:italic}.body :not(strong)>em{background:linear-gradient(transparent 60%,#e0f3f8 60%)}.body :not(pre)>code{padding:.2em .4em;font-family:Menlo,Inconsolata,Courier New,Courier,monospace;font-size:calc(1em - 2px);color:#000;background-color:#f6f6f6;border:1px solid #eee;border-radius:2px}.body kbd{padding:.2em .4em;margin:0 5px;font-family:Menlo,Inconsolata,Courier New,Courier,monospace;font-size:calc(1em - 2px);color:#555;white-space:nowrap;background-color:#fcfcfc;border:1px solid #999;border-radius:6px}.body .footnote-link a{text-decoration:none}.body a.monolog-link,.body a[href="/"]{padding-left:calc(1em + 3px);margin-left:1px;background-image:url(../../../images/favicon.svg);background-repeat:no-repeat;background-position:0 .35em;background-size:1em}.body .ipa{font-family:Charis SIL,Doulos SIL,DejaVu Sans,Code2000,Hiragino Kaku Gothic Pro,Matrix Unicode,Tahoma,"Microsoft Sans Serif",sans-serif}@media screen and (width >= 800px){.body .float-right{float:right;width:300px;margin:.5em 0 .8em 1.2em}}@media screen and (width <= 800px){.body .float-right{width:100%}}header.svelte-1acswtd.svelte-1acswtd.svelte-1acswtd{margin-bottom:2em;transition:padding-top .2s ease-in-out,margin-bottom .2s ease-in-out}header.svelte-1acswtd.svelte-1acswtd.svelte-1acswtd:not(.noHeaderImage){padding-top:360px}@media screen and (width <= 1050px){header.svelte-1acswtd:not(.noHeaderImage) h1.svelte-1acswtd.svelte-1acswtd:before{margin-top:-1em}}header.svelte-1acswtd h1.svelte-1acswtd.svelte-1acswtd{font-size:2em;font-weight:700;line-height:1.2;word-break:keep-all;overflow-wrap:break-word}@media screen and (width <= 800px){header.svelte-1acswtd h1.svelte-1acswtd.svelte-1acswtd{font-size:1.7em;line-height:1.3}}header.svelte-1acswtd h1.svelte-1acswtd~section.svelte-1acswtd{margin-top:1.5em}header.svelte-1acswtd h1.svelte-1acswtd.svelte-1acswtd:before{display:inline-block;width:3em;padding-right:.5em;margin-left:-3em;text-align:right}@media screen and (width <= 1050px){header.svelte-1acswtd h1.svelte-1acswtd.svelte-1acswtd:before{display:block;padding-right:0;margin-bottom:.25em;margin-left:0;font-size:1.5em;text-align:left}}header.svelte-1acswtd h2.svelte-1acswtd.svelte-1acswtd{font-size:1em;font-weight:inherit}header.svelte-1acswtd .meta.svelte-1acswtd.svelte-1acswtd{float:right;text-align:right}@media screen and (width <= 800px){header.svelte-1acswtd .meta.svelte-1acswtd.svelte-1acswtd{float:unset}}header.svelte-1acswtd .meta p.svelte-1acswtd.svelte-1acswtd{margin:.25em 0}header.svelte-1acswtd .url a.svelte-1acswtd.svelte-1acswtd{font-family:Menlo,Inconsolata,Courier New,Courier,monospace;font-weight:700;color:#444}header.svelte-1acswtd .toolbar.svelte-1acswtd.svelte-1acswtd{margin:8em 0;clear:both;text-align:right}header.svelte-1acswtd button.svelte-1acswtd.svelte-1acswtd{padding:.3em 1em;font-size:1.2em}header.svelte-1acswtd.svelte-1acswtd.svelte-1acswtd:after{display:block;clear:both;content:""}.header-image.svelte-1acswtd.svelte-1acswtd.svelte-1acswtd{position:absolute;top:0;left:50%;z-index:-999;width:100%;max-width:920px;height:400px;margin:0;background-image:url(../../../images/default.svg);background-position:center center;background-size:cover;transition:height .2s ease-in-out;translate:-50% 0}.header-image.noHeaderImage.svelte-1acswtd.svelte-1acswtd.svelte-1acswtd{height:4rem}.header-image.default-header-image.svelte-1acswtd.svelte-1acswtd.svelte-1acswtd{max-width:unset}.header-image.header-image-shadow.svelte-1acswtd.svelte-1acswtd.svelte-1acswtd{top:-10px;width:calc(100% + 20px);max-width:unset;margin:0 -10px;filter:blur(10px)}.body.svelte-1acswtd.svelte-1acswtd.svelte-1acswtd{margin-bottom:6rem;line-height:2;overflow-wrap:break-word}.links-section.svelte-1acswtd.svelte-1acswtd.svelte-1acswtd{margin-top:120px;border-top:1px solid #ccc;transition:margin-top .2s ease-in-out,border-top-color 1s ease-in-out}.nav-background.svelte-1acswtd.svelte-1acswtd.svelte-1acswtd{position:fixed;top:0;left:0;z-index:998;width:100%;height:4rem;background-image:url(../../../images/default.svg);background-position:center center;background-size:cover;-webkit-backdrop-filter:blur(3px);backdrop-filter:blur(3px);transition:height .7s ease-in-out}.nav-background.svelte-1acswtd.svelte-1acswtd.svelte-1acswtd:after{position:absolute;top:0;left:0;display:block;width:100%;height:100%;content:"";border-bottom:1px solid #ccc;transition:all 1.5s .7s ease-out}.nav-background.isHeaderInView.svelte-1acswtd.svelte-1acswtd.svelte-1acswtd{height:0;transition-duration:.1s}.nav-background.isHeaderInView.svelte-1acswtd.svelte-1acswtd.svelte-1acswtd:after{width:0;border-bottom-color:#222;transition:none}.empty.svelte-1acswtd header.svelte-1acswtd.svelte-1acswtd{margin-bottom:0}.empty.svelte-1acswtd header h1.svelte-1acswtd.svelte-1acswtd{color:#681a22}.empty.svelte-1acswtd .links-section.svelte-1acswtd.svelte-1acswtd{margin-top:0;border-top-color:transparent}

@charset "UTF-8";.monolog-link.svelte-73vl1x:before{display:inline-block;width:1.75em;padding-right:.5em;font-size:.75em;text-align:center;vertical-align:baseline}.mentions.svelte-2o66h5.svelte-2o66h5.svelte-2o66h5{padding-top:40px;margin-top:40px;border-top:1px solid #ccc}@media screen and (width <= 512px){.mentions.svelte-2o66h5.svelte-2o66h5.svelte-2o66h5{padding-top:20px}}h1.svelte-2o66h5.svelte-2o66h5.svelte-2o66h5{font-size:1.3em}ol.svelte-2o66h5.svelte-2o66h5.svelte-2o66h5{padding-left:1em}@media screen and (width <= 800px){ol.svelte-2o66h5.svelte-2o66h5.svelte-2o66h5{padding-left:0}}li.svelte-2o66h5.svelte-2o66h5.svelte-2o66h5{margin-bottom:1em;line-height:1.4}li.svelte-2o66h5.svelte-2o66h5.svelte-2o66h5::marker{color:#aaa}li.svelte-2o66h5 span.svelte-2o66h5.svelte-2o66h5{display:inline-block}@media screen and (width <= 800px){li.svelte-2o66h5 span.svelte-2o66h5.svelte-2o66h5{display:block;margin-left:1em}}a.no-color.svelte-2o66h5.svelte-2o66h5.svelte-2o66h5{text-decoration:none}a.no-color.svelte-2o66h5.svelte-2o66h5.svelte-2o66h5:not(:hover){color:currentcolor}a.no-color.svelte-2o66h5 img.svelte-2o66h5.svelte-2o66h5{margin:0 5px}img.svelte-2o66h5.svelte-2o66h5.svelte-2o66h5{width:1em;height:1em;vertical-align:middle;transform:translateY(-2px)}blockquote.svelte-2o66h5.svelte-2o66h5.svelte-2o66h5{padding-left:1em;margin-top:.4em;margin-left:2em;font-size:.8em;font-style:italic;border-left:1px solid #ccc}.reaction.svelte-2o66h5.svelte-2o66h5.svelte-2o66h5{display:flex;gap:.5em;float:right;margin-top:.3em;margin-bottom:1em}.reaction.svelte-2o66h5 a.svelte-2o66h5.svelte-2o66h5{display:block;height:1.7044em;padding-left:2.1875em;line-height:1.35;text-decoration:none;background-repeat:no-repeat;background-size:contain}@media (hover: hover){.reaction.svelte-2o66h5 a.svelte-2o66h5.svelte-2o66h5:not(:hover){opacity:.5}}.reaction.svelte-2o66h5 a.svelte-2o66h5 small.svelte-2o66h5{display:block;font-size:.2em}.reaction.svelte-2o66h5 a.svelte-2o66h5 span.svelte-2o66h5{display:block;font-size:.7em}@media screen and (width <= 370px){.reaction.svelte-2o66h5 a.svelte-2o66h5.svelte-2o66h5{font-size:.65em}}@media screen and (width <= 512px){.reaction.svelte-2o66h5.svelte-2o66h5.svelte-2o66h5{justify-content:space-between;float:none}}.loading.svelte-2o66h5.svelte-2o66h5.svelte-2o66h5:before{display:block;padding-left:1.3em;line-height:.9;color:#aaa;content:"読み込み中";background-image:url(https://cdnjs.cloudflare.com/ajax/libs/galleriffic/2.0.1/css/loader.gif);background-repeat:no-repeat;background-size:contain}.tag.svelte-inpyhr{display:inline-block;padding:.1em .4em;margin-left:.3em;font-size:.7em;line-height:1.4;text-decoration:none;white-space:nowrap;background-color:#eee;border-radius:5px;opacity:.65;transition:opacity .5s ease-in-out}.tag.svelte-inpyhr:hover{background-color:#ddd}.tag.svelte-inpyhr.large{margin-right:.3em;margin-left:0;font-size:1em;opacity:1}.tag.svelte-inpyhr:before{color:#757575}.svelte-inpyhr:has(li:hover>.tag),.svelte-inpyhr:has(li:hover>span>.tag){opacity:1}time.svelte-ffk546.svelte-ffk546{white-space:nowrap}span.svelte-ffk546.svelte-ffk546{opacity:.1;transition:opacity .1s ease-in-out}.svelte-ffk546:not(:hover)>span.svelte-ffk546{opacity:.3}
</style>
		<link href="../../_app/immutable/assets/0.De7SZMZE.css" rel="stylesheet" disabled media="(max-width: 0)">
		<link href="../../_app/immutable/assets/3.kxXqOZVZ.css" rel="stylesheet" disabled media="(max-width: 0)">
		<link href="../../_app/immutable/assets/time.Dl0DpTuD.css" rel="stylesheet" disabled media="(max-width: 0)">
		<link rel="modulepreload" href="../../_app/immutable/entry/start.CglOfGuw.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/entry.CiZyBfR6.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/scheduler.Bkvd7rM2.js">
		<link rel="modulepreload" href="../../_app/immutable/entry/app.BDt81B89.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/preload-helper.BQ24v_F8.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/index.8-2m5-ai.js">
		<link rel="modulepreload" href="../../_app/immutable/nodes/0.5mDbHXRd.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/each.D6YF6ztN.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/stores.BB_eMU0E.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/config.Cgik4Bt7.js">
		<link rel="modulepreload" href="../../_app/immutable/nodes/3.jmSjJ955.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/time.svelte_svelte_type_style_lang.DWTALW94.js"><title>Quine書いた (2024) - 2024-09-28 | 葉月夜堂</title><!-- HEAD_svelte-140ile1_START --><meta property="og:type" content="article"><meta property="og:title" content="Quine書いた (2024) - 2024-09-28 | 葉月夜堂"><meta property="og:description" content="久々にQuineを書いた。Quine（クワイン）というのは、プログラミングを使ったアートみたいなもので、実行すると出力される内容が自分自身のソースコードと一致する自己言及的なプログラムのこと。たとえば print(&amp;quot;hello&amp;quot;) という内容のプログラムはQuineではない。これを実行すると、たぶん hello と出力され、当然 print(&amp;quot;hello&amp;quot;) という文字列とは異なる。今度は不足を補おうとして print(&amp;#39;print(&amp;quot;hello&amp;quot;)&amp;#39;) というプログラムを書いてみても、あるいはこの調子でどんどん長くしていっても、やっぱり一致することはない。このように、Quineを書くこと自体がまずそんなに簡単ではない。その要件を満たしたうえで、ソースコードの見た目が何らかのデザインになっているとか、一工夫加えることでアートとして完成する。なお、あまりに知名度が低すぎて、Quineを書いて人に見せるときに自分でQuineの凄さを説明しないと何も伝わらない、という致命的な欠点があることで知られている（嘘）。今回書いたのはLegalsca"><meta property="og:image" content="https://yo.eki.do//images/2024/2024-09-28.quine.png"><!-- HEAD_svelte-140ile1_END --> <style> .viewer-header h1::before, .tag::before, .links .monolog-link::before { content: '🌐' }[data-kind="note"] .viewer-header h1::before, .tag[data-kind="note"]::before, .links .monolog-link[data-kind="note"]::before { content: '🖋' }[data-kind="tag"] .viewer-header h1::before, .tag[data-kind="tag"]::before, .links .monolog-link[data-kind="tag"]::before { content: '#' }[data-kind="location"] .viewer-header h1::before, .tag[data-kind="location"]::before, .links .monolog-link[data-kind="location"]::before { content: '📍' }[data-kind="creator"] .viewer-header h1::before, .tag[data-kind="creator"]::before, .links .monolog-link[data-kind="creator"]::before { content: '🧍' }[data-kind="kind"] .viewer-header h1::before, .tag[data-kind="kind"]::before, .links .monolog-link[data-kind="kind"]::before { content: '🔣' }[data-kind="memorandum"] .viewer-header h1::before, .tag[data-kind="memorandum"]::before, .links .monolog-link[data-kind="memorandum"]::before { content: '📝' }[data-kind="ソフトウェア"] .viewer-header h1::before, .tag[data-kind="ソフトウェア"]::before, .links .monolog-link[data-kind="ソフトウェア"]::before { content: '💻' }[data-kind="ハンバーガー店"] .viewer-header h1::before, .tag[data-kind="ハンバーガー店"]::before, .links .monolog-link[data-kind="ハンバーガー店"]::before { content: '🍔' }[data-kind="ミュージシャン"] .viewer-header h1::before, .tag[data-kind="ミュージシャン"]::before, .links .monolog-link[data-kind="ミュージシャン"]::before { content: '🎸' }[data-kind="ライブ"] .viewer-header h1::before, .tag[data-kind="ライブ"]::before, .links .monolog-link[data-kind="ライブ"]::before { content: '🎵' }[data-kind="旅行"] .viewer-header h1::before, .tag[data-kind="旅行"]::before, .links .monolog-link[data-kind="旅行"]::before { content: '✈️' }[data-kind="組織"] .viewer-header h1::before, .tag[data-kind="組織"]::before, .links .monolog-link[data-kind="組織"]::before { content: '🏢' }</style><meta property="og:site_name" content=葉月夜堂 /><script defer src="https://www.googletagmanager.com/gtag/js?id=G-7TM7HG2ZH9"></script><script defer>window.dataLayer ??= [];function gtag(){ window.dataLayer.push(arguments); }gtag("js", new Date());gtag("config", "G-7TM7HG2ZH9", { user_id: localStorage.getItem("uid") || void 0 });</script><script defer src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5159408992513362" crossorigin="anonymous"></script><link href="https://twitter.com/p_km" rel="me" /><link rel="webmention" href="https://webmention.io/yo.eki.do/webmention" /><link rel="pingback" href="https://webmention.io/yo.eki.do/xmlrpc" /><link href="https://github.com/kissge" rel="me" />
  </head>
  <body data-sveltekit-preload-data="hover">
    <div style="display: contents">  <nav><ul><li><a href="/">葉月夜堂</a> </li><li><a href="/timeline">timeline</a> </li><li><a href="/about">about</a> </li></ul></nav>  <div class="nav-background svelte-1acswtd isHeaderInView" style="background-image: url(/images/2024/2024-09-28.quine.png)"></div> <main><article data-kind="note" class="svelte-1acswtd"><header class="viewer-header svelte-1acswtd"><h1 class="svelte-1acswtd">Quine書いた<wbr> (2024)</h1>  <section class="meta svelte-1acswtd"><p class="svelte-1acswtd"><time title="10 か月半前" class="svelte-ffk546">2024-09-28<span class="svelte-ffk546" data-svelte-h="svelte-1mw87zy">T</span>15:31:00<span class="svelte-ffk546" data-svelte-h="svelte-o0mr9q">+09:00</span></time></p> <p class="svelte-1acswtd"><a href="https://github.com/kissge/yo.eki.do/commits/master/notes/quine-2024.md" title="2024/12/25 10:55:14" class="svelte-1acswtd">最終更新：7 か月半前</a></p></section>  <section class="svelte-1acswtd"><a href="/mono/Quine" class="tag svelte-inpyhr large" data-kind="tag">Quine</a> <a href="/mono/JavaScript" class="tag svelte-inpyhr large" data-kind="tag">JavaScript</a> </section>  <section class="header-image header-image-shadow svelte-1acswtd" style="background-image: url(/images/2024/2024-09-28.quine.png)"></section> <section class="header-image svelte-1acswtd" style="background-image: url(/images/2024/2024-09-28.quine.png)"></section></header>   <section class="body svelte-1acswtd"> <!-- HTML_TAG_START --><p>久々に<a href="/mono/Quine" class="monolog-link"  title="Quine">Quine</a>を書いた。</p>
<p><a href="/mono/Quine" class="monolog-link"  title="Quine">Quine</a>（クワイン）というのは、プログラミングを使ったアートみたいなもので、実行すると出力される内容が自分自身のソースコードと一致する自己言及的なプログラムのこと。たとえば <code>print(&quot;hello&quot;)</code> という内容のプログラムは<a href="/mono/Quine" class="monolog-link"  title="Quine">Quine</a>ではない。これを実行すると、たぶん <code>hello</code> と出力され、当然 <code>print(&quot;hello&quot;)</code> という文字列とは異なる。今度は不足を補おうとして <code>print(&#39;print(&quot;hello&quot;)&#39;)</code> というプログラムを書いてみても、あるいはこの調子でどんどん長くしていっても、やっぱり一致することはない。このように、<a href="/mono/Quine" class="monolog-link"  title="Quine">Quine</a>を書くこと自体がまずそんなに簡単ではない。その要件を満たしたうえで、ソースコードの見た目が何らかのデザインになっているとか、一工夫加えることでアートとして完成する。なお、あまりに知名度が低すぎて、<a href="/mono/Quine" class="monolog-link"  title="Quine">Quine</a>を書いて人に見せるときに自分で<a href="/mono/Quine" class="monolog-link"  title="Quine">Quine</a>の凄さを説明しないと何も伝わらない、という致命的な欠点があることで知られている（嘘）。</p>
<p>今回書いたのは<a href="/mono/Legalscape" class="monolog-link"  title="Legalscape">Legalscape</a>ロゴの形を象った<a href="/mono/JavaScript" class="monolog-link"  title="JavaScript">JavaScript</a>製の<a href="/mono/Quine" class="monolog-link"  title="Quine">Quine</a>。</p>
<div class="no-wrap dense">

<pre><code class="language-js">(W=          <span class="hljs-function">()=&gt;</span>(E=<span class="hljs-string">&#x27;!    !!!!!O5&#x27;</span>,      m=<span class="hljs-string">&#x27;f      NZ3          ~Wff&#x27;</span>,p=<span class="hljs-string">&#x27;    Pxr@&amp;PB,       &#x27;</span>,R=      <span class="hljs-string">&#x27;replace&#x27;</span>    ,e=<span class="hljs-string">`PlPqU
#1e         `</span>,V=<span class="hljs-function">(<span class="hljs-params">cc</span>)=&gt;</span>   <span class="hljs-string">&#x27;!&#x27;</span>.<span class="hljs-property">repeat</span>     (cc*<span class="hljs-number">8</span>)     ,r=         <span class="hljs-string">&#x27;/d{z@U}8&#x27;</span>   ,t=<span class="hljs-function"><span class="hljs-params">s</span>=&gt;</span>(s[      ((R))]     (<span class="hljs-regexp">/\s/g</span>s,<span class="hljs-string">&#x27;&#x27;</span>  )),l=<span class="hljs-string">`0R@_
Ji{         @`</span>,          o=             <span class="hljs-string">&#x27;*  )r     M&gt;9         \\           #&#x27;</span>             ,L  =<span class="hljs-string">`            %Sn  _PW       
R+`</span>         ,i=         <span class="hljs-string">&#x27;8K             u1  99X    &quot;&#x27;</span>,         g=          <span class="hljs-string">&quot;7I            \\?  &#x27;V            @0&quot;</span>  ,n=       
<span class="hljs-string">&#x27;9p         #b_         &lt;7             s&#x27;</span>,   P=    <span class="hljs-string">&#x27;V8         S;{         @B             x&#x27;</span>   ,f=           <span class="hljs-string">`2J  ahw       
i@[         `</span>,a=<span class="hljs-string">&#x27;HUHe.  6~   V&#x27;</span>,w=<span class="hljs-string">&#x27;    +n    \\    5e~         LE&#x27;</span>,s=<span class="hljs-string">&#x27;CI   Av             oB    I$     &#x27;</span>,M={<span class="hljs-number">264</span>:  <span class="hljs-number">135</span>,<span class="hljs-number">259</span>:<span class="hljs-number">24</span>
,<span class="hljs-number">32</span>         :<span class="hljs-number">13</span>,<span class="hljs-number">18</span>:<span class="hljs-number">13</span>,  <span class="hljs-number">8</span>:      <span class="hljs-number">13</span>,   <span class="hljs-number">134</span>    :<span class="hljs-number">16</span>   ,<span class="hljs-number">56</span>           :<span class="hljs-number">13</span>,<span class="hljs-number">256</span>:  <span class="hljs-number">23</span>            ,<span class="hljs-number">3</span>:    <span class="hljs-number">13</span>,   <span class="hljs-number">123</span>:<span class="hljs-number">13</span>,<span class="hljs-number">66</span>   :<span class="hljs-number">13</span>,<span class="hljs-number">257</span>:<span class="hljs-number">87</span>
,<span class="hljs-number">99</span>         :<span class="hljs-number">13</span>         ,[       <span class="hljs-number">92</span>   ]:<span class="hljs-number">13</span>,<span class="hljs-number">248</span>:+   <span class="hljs-number">109</span>                ,[<span class="hljs-number">4</span>  *<span class="hljs-number">7</span>            *<span class="hljs-number">9</span>      ]:   <span class="hljs-number">109</span>         ,[<span class="hljs-number">9</span>       
*<span class="hljs-number">17</span>         +<span class="hljs-number">5</span>]         :<span class="hljs-number">17</span>      ,[   <span class="hljs-number">184</span>]:<span class="hljs-number">15</span>,<span class="hljs-number">244</span>  :<span class="hljs-number">87</span>                 ,[  <span class="hljs-number">29</span>*          <span class="hljs-number">9</span>]:      <span class="hljs-number">84</span>   ,[+         <span class="hljs-number">263</span>       
 ]:+        <span class="hljs-number">22</span>,          [<span class="hljs-number">2</span>*    <span class="hljs-number">131</span>  ]:+       <span class="hljs-number">13</span>}  ,D=               <span class="hljs-string">`7*   dj=         }&#x27;       (<span class="hljs-subst">${  V(<span class="hljs-number">4</span>         )}</span>G       
 tCIFRsTb?  T[GpO%<span class="hljs-subst">${V(    <span class="hljs-number">1</span>)}</span>7\&quot;o.H  !vd       <span class="hljs-subst">${V  (<span class="hljs-number">1</span>)}</span>FdZ&lt;Q  FsM<span class="hljs-subst">${V(<span class="hljs-number">1</span>)}</span>    .aTcH1!&#x27;   ~~        ~~  ~~~          ~s-&#x27;I&#x27;aZ+
   ($}?g3/    RPN0h#S;     )`</span>,S=[   ...         <span class="hljs-title function_">t</span>(<span class="hljs-string">`   (W=<span class="hljs-subst">${W}</span>  )()`</span>)],C=      <span class="hljs-function"><span class="hljs-params">s</span>=&gt;</span>[...  <span class="hljs-title function_">t</span>(s        )]  [<span class="hljs-number">0</span>,           <span class="hljs-string">&#x27;reduce&#x27;</span>
                                                                                       ](         <span class="hljs-function">(<span class="hljs-params">A,                       
                                                                                      c,</span>)          =&gt;</span>                       
                                                                                      A*           <span class="hljs-number">94n</span>                      
 +<span class="hljs-title class_">BigInt</span>(c.<span class="hljs-title function_">charCodeAt</span>(<span class="hljs-number">0</span>)-<span class="hljs-number">33</span>),<span class="hljs-number">0n</span>),<span class="hljs-function">(<span class="hljs-params">by,YK,..._</span>)=&gt;</span><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>([...(<span class="hljs-title function_">C</span>(_.<span class="hljs-title function_">join</span>(<span class="hljs-string">&#x27;&#x27;</span>))+<span class="hljs-title function_">C</span>(D))[<span class="hljs-string">&#x27;to&#x27;</span>            +<span class="hljs-string">&#x27;String&#x27;</span>](<span class="hljs-number">12</span>)].<span class="hljs-title function_">flatMap</span>(
   <span class="hljs-function">(<span class="hljs-params">c,i</span>)=&gt;</span>(X=M[i-<span class="hljs-number">33</span>]??<span class="hljs-built_in">parseInt</span>(c,<span class="hljs-number">12</span>)+<span class="hljs-number">1</span>,i%<span class="hljs-number">2</span>?<span class="hljs-string">&#x27;\x20&#x27;</span>.<span class="hljs-title function_">repeat</span>(X):S.<span class="hljs-title function_">splice</span>(<span class="hljs-number">0</span>,X))).<span class="hljs-title function_">join</span>(<span class="hljs-string">&#x27;&#x27;</span>)[R]             (<span class="hljs-regexp">/(.{124})/g</span>,<span class="hljs-string">&#x27;$1\n&#x27;</span>)))  
                                                                                                                            
         (     W, e,     E, m, p, o, w, e, r,     L, e, g, a, l,     P, r, o, f, e, s, s, i, o, n, a, l, s     ))()
</code></pre>
</div>

<p>これを適当な処理系で実行すると、ソースコードと同じ内容が出力される。</p>
<pre><code class="language-shell"><span class="hljs-meta prompt_">$ </span><span class="language-bash">node quine.js &gt; output</span>
<span class="hljs-meta prompt_">$ </span><span class="language-bash">diff -s quine.js output</span>
Files quine.js and output are identical
</code></pre>
<p>見ての通り、ポイントは最後の行。元のロゴにある「WE EMPOWER LEGAL PROFESSIONALS」という文字列が、それぞれ一文字ずつ変数として定義され、関数呼び出しの引数リストを形成している。もちろんこれは無意味な装飾ではない。このプログラムは全体で、この引数の文字列を結合して得られる文字列をデコードし、ロゴの形に整形されたソースコードを復元するものになっている。</p>
<p>prettifyしたソースコードを見れば分かるように、このコードには全体で1文しか登場しない。これでセミコロン有り派もセミコロン無し派も満足の、いわば<a href="/mono/JavaScript" class="monolog-link"  title="JavaScript">JavaScript</a>版広辞苑前文方式が達成されている（適当）（後付け）。</p>
<pre><code class="language-js">(W = <span class="hljs-function">() =&gt;</span>
  ((E = <span class="hljs-string">&#x27;!    !!!!!O5&#x27;</span>),
  (m = <span class="hljs-string">&#x27;f      NZ3          ~Wff&#x27;</span>),
  (p = <span class="hljs-string">&#x27;    Pxr@&amp;PB,       &#x27;</span>),
  (R = <span class="hljs-string">&#x27;replace&#x27;</span>),
  (e = <span class="hljs-string">`PlPqU\n#1e         `</span>),
  (V = <span class="hljs-function">(<span class="hljs-params">cc</span>) =&gt;</span> <span class="hljs-string">&#x27;!&#x27;</span>.<span class="hljs-title function_">repeat</span>(cc * <span class="hljs-number">8</span>)),
  (r = <span class="hljs-string">&#x27;/d{z@U}8&#x27;</span>),
  (t = <span class="hljs-function">(<span class="hljs-params">s</span>) =&gt;</span> s[R](<span class="hljs-regexp">/\s/g</span>s, <span class="hljs-string">&#x27;&#x27;</span>)),
  (l = <span class="hljs-string">`0R@_\nJi{         @`</span>),
  (o = <span class="hljs-string">&#x27;*  )r     M&gt;9         \\           #&#x27;</span>),
  (L = <span class="hljs-string">`            %Sn  _PW       \nR+`</span>),
  (i = <span class="hljs-string">&#x27;8K             u1  99X    &quot;&#x27;</span>),
  (g = <span class="hljs-string">&quot;7I            \\?  &#x27;V            @0&quot;</span>),
  (n = <span class="hljs-string">&#x27;9p         #b_         &lt;7             s&#x27;</span>),
  (P = <span class="hljs-string">&#x27;V8         S;{         @B             x&#x27;</span>),
  (f = <span class="hljs-string">`2J  ahw       \ni@[         `</span>),
  (a = <span class="hljs-string">&#x27;HUHe.  6~   V&#x27;</span>),
  (w = <span class="hljs-string">&#x27;    +n    \\    5e~         LE&#x27;</span>),
  (s = <span class="hljs-string">&#x27;CI   Av             oB    I$     &#x27;</span>),
  (M = {
    <span class="hljs-number">264</span>: <span class="hljs-number">135</span>, <span class="hljs-number">259</span>: <span class="hljs-number">24</span>, <span class="hljs-number">32</span>: <span class="hljs-number">13</span>, <span class="hljs-number">18</span>: <span class="hljs-number">13</span>, <span class="hljs-number">8</span>: <span class="hljs-number">13</span>, <span class="hljs-number">134</span>: <span class="hljs-number">16</span>, <span class="hljs-number">56</span>: <span class="hljs-number">13</span>, <span class="hljs-number">256</span>: <span class="hljs-number">23</span>, <span class="hljs-number">3</span>: <span class="hljs-number">13</span>, <span class="hljs-number">123</span>: <span class="hljs-number">13</span>, <span class="hljs-number">66</span>: <span class="hljs-number">13</span>, <span class="hljs-number">257</span>: <span class="hljs-number">87</span>,
    <span class="hljs-number">99</span>: <span class="hljs-number">13</span>, [<span class="hljs-number">92</span>]: <span class="hljs-number">13</span>, <span class="hljs-number">248</span>: +<span class="hljs-number">109</span>, [<span class="hljs-number">4</span> * <span class="hljs-number">7</span> * <span class="hljs-number">9</span>]: <span class="hljs-number">109</span>, [<span class="hljs-number">9</span> * <span class="hljs-number">17</span> + <span class="hljs-number">5</span>]: <span class="hljs-number">17</span>,
    [<span class="hljs-number">184</span>]: <span class="hljs-number">15</span>, <span class="hljs-number">244</span>: <span class="hljs-number">87</span>, [<span class="hljs-number">29</span> * <span class="hljs-number">9</span>]: <span class="hljs-number">84</span>, [+<span class="hljs-number">263</span>]: +<span class="hljs-number">22</span>, [<span class="hljs-number">2</span> * <span class="hljs-number">131</span>]: +<span class="hljs-number">13</span>,
  }),
  (D = <span class="hljs-string">`7*   dj=         }&#x27;       (<span class="hljs-subst">${V(<span class="hljs-number">4</span>)}</span>G       \n tCIFRsTb?  T[GpO%<span class="hljs-subst">${V(<span class="hljs-number">1</span>)}</span>7\&quot;o.H  !vd       <span class="hljs-subst">${V(<span class="hljs-number">1</span>)}</span>FdZ&lt;Q  FsM<span class="hljs-subst">${V(<span class="hljs-number">1</span>)}</span>    .aTcH1!&#x27;   ~~        ~~  ~~~          ~s-&#x27;I&#x27;aZ+\n   ($}?g3/    RPN0h#S;     )`</span>),
  (S = [...<span class="hljs-title function_">t</span>(<span class="hljs-string">`   (W=<span class="hljs-subst">${W}</span>  )()`</span>)]),
  (C = <span class="hljs-function">(<span class="hljs-params">s</span>) =&gt;</span> [...<span class="hljs-title function_">t</span>(s)][(<span class="hljs-number">0</span>, <span class="hljs-string">&#x27;reduce&#x27;</span>)](<span class="hljs-function">(<span class="hljs-params">A, c</span>) =&gt;</span> A * <span class="hljs-number">94n</span> + <span class="hljs-title class_">BigInt</span>(c.<span class="hljs-title function_">charCodeAt</span>(<span class="hljs-number">0</span>) - <span class="hljs-number">33</span>), <span class="hljs-number">0n</span>)),
  <span class="hljs-function">(<span class="hljs-params">by, YK, ..._</span>) =&gt;</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(
      [...(<span class="hljs-title function_">C</span>(_.<span class="hljs-title function_">join</span>(<span class="hljs-string">&#x27;&#x27;</span>)) + <span class="hljs-title function_">C</span>(D))[<span class="hljs-string">&#x27;to&#x27;</span> + <span class="hljs-string">&#x27;String&#x27;</span>](<span class="hljs-number">12</span>)]
        .<span class="hljs-title function_">flatMap</span>(<span class="hljs-function">(<span class="hljs-params">c, i</span>) =&gt;</span> ((X = M[i - <span class="hljs-number">33</span>] ?? <span class="hljs-built_in">parseInt</span>(c, <span class="hljs-number">12</span>) + <span class="hljs-number">1</span>), i % <span class="hljs-number">2</span> ? <span class="hljs-string">&#x27;\x20&#x27;</span>.<span class="hljs-title function_">repeat</span>(X) : S.<span class="hljs-title function_">splice</span>(<span class="hljs-number">0</span>, X)))
        .<span class="hljs-title function_">join</span>(<span class="hljs-string">&#x27;&#x27;</span>)
        [R](<span class="hljs-regexp">/(.{124})/g</span>, <span class="hljs-string">&#x27;$1\n&#x27;</span>),
    ))(W, e, E, m, p, o, w, e, r, L, e, g, a, l, P, r, o, f, e, s, s, i, o, n, a, l, s))();
</code></pre>
<p>データをデコードし文字列生成する処理自体はそこまで難しくないのだが、その処理全体をさらにロゴの形に整形しても動かないといけない（たとえば <code>(x)⎵=&gt;++x</code> という位置にスペースが入るのはよくても <code>(x)=⎵&gt;++x</code> は文法エラーになる）ので、その調整が作る上での本丸であった。まずデータを圧縮しいかにコードを短くするかを考え、極限まで短くした後は、都合の悪いところでコードが切れないようにひたすら <code>array.reduce</code> → <code>array[0, &#39;reduce&#39;]</code> みたいな書き換えを頑張って思いつく作業を繰り返し、最後にサインを入れたり変数の順番を入れ替えたりして見栄えを整える微調整を施して完成。</p>
<p>ちなみに、ロゴの形のデータは、画像ファイルを用意して、ImageMagickで<a href="https://ja.wikipedia.org/wiki/PNM_(%E7%94%BB%E5%83%8F%E3%83%95%E3%82%A9%E3%83%BC%E3%83%9E%E3%83%83%E3%83%88)">PNM</a>に変換すると比較的簡単に得られる。</p>
<pre><code class="language-sh">height=30
magick logo.png -background white -flatten -geometry x<span class="hljs-variable">${height}</span> -compress none logo.pbm
</code></pre>
<p>作ってみて、データ部分とロジック部分の比率がちょっとデータに寄りすぎかなあ、と思うけれど、そもそも相場を知らないので、まあいいや。</p>
<!-- HTML_TAG_END --></section> <section class="links-section svelte-1acswtd"><ul class="links"><li class="link-group"><h1 class="link-group-title">この記事がリンクしているもの</h1> <ul class="link-group-links"><li class="link"><a href="/mono/Quine" class="monolog-link svelte-73vl1x empty" data-kind="tag">Quine</a>  <span class="tags"></span> <p></p> </li><li class="link"><a href="/mono/JavaScript" class="monolog-link svelte-73vl1x empty" data-kind="tag">JavaScript</a>  <span class="tags"></span> <p></p> </li><li class="link"><a href="/mono/Legalscape" class="monolog-link svelte-73vl1x empty" data-kind="組織">Legalscape</a>  <span class="tags"></span> <p></p> </li></ul> </li><li class="link-group"><h1 class="link-group-title">JavaScriptにリンクしているもの</h1> <ul class="link-group-links"><li class="link"><a href="/notes/cldr" class="monolog-link svelte-73vl1x" data-kind="note">ja-JP-u-ca-japaneseって何？ UnicodeのCLDRを読んでみよう（あるいは、JavaScriptで和暦を得る簡単なテクについて）</a> <small title="2022/2/19 2:41:00"><time>2022-02-19</time> </small> <span class="tags"><a href="/mono/Unicode" class="tag svelte-inpyhr" data-kind="tag">Unicode</a> </span> <p></p> </li><li class="link"><a href="/mono/monolog" class="monolog-link svelte-73vl1x" data-kind="ソフトウェア">monolog</a> <small title="2020/12/27 2:47:33"><time>2020-12-27</time> </small> <span class="tags"><a href="/mono/%E9%96%8B%E7%99%BA%E3%81%97%E3%81%9F%E3%82%82%E3%81%AE" class="tag svelte-inpyhr" data-kind="tag">開発したもの</a> <a href="/mono/Svelte" class="tag svelte-inpyhr" data-kind="tag">Svelte</a> <a href="/mono/TypeScript" class="tag svelte-inpyhr" data-kind="tag">TypeScript</a> <wbr class="svelte-inpyhr"></span> <p>「もの」のログを実現する、あなたが今見ているこのWebサイトを構築したソフトウェア</p> </li><li class="link"><a href="/notes/crowdfunding-vue" class="monolog-link svelte-73vl1x" data-kind="note">来年こそは届いてほしいスマートグラス「Vue」</a> <small title="2018/12/13 0:17:07"><time>2018-12-13</time> </small> <span class="tags"><a href="/mono/%E3%82%A2%E3%83%89%E3%83%99%E3%83%B3%E3%83%88%E3%82%AB%E3%83%AC%E3%83%B3%E3%83%80%E3%83%BC" class="tag svelte-inpyhr" data-kind="tag">アドベントカレンダー</a> </span> <p></p> </li><li class="link"><a href="/notes/foreign-regexp-el" class="monolog-link svelte-73vl1x" data-kind="note">Emacs: re-builder + foreign-regexp.elでたのしい正規表現</a> <small title="2014/12/19 23:30:53"><time>2014-12-20</time> </small> <span class="tags"><a href="/mono/%E3%82%A2%E3%83%89%E3%83%99%E3%83%B3%E3%83%88%E3%82%AB%E3%83%AC%E3%83%B3%E3%83%80%E3%83%BC" class="tag svelte-inpyhr" data-kind="tag">アドベントカレンダー</a> </span> <p></p> </li></ul> </li><li class="link-group"><h1 class="link-group-title">Legalscapeにリンクしているもの</h1> <ul class="link-group-links"><li class="link"><a href="/notes/vaio-sx12" class="monolog-link svelte-73vl1x" data-kind="note">VAIO SX12 ALL BLACK EDITIONを買った</a> <small title="2022/12/3 14:01:38"><time>2022-12-03</time> </small> <span class="tags"></span> <p></p> </li><li class="link"><a href="/notes/lnlp" class="monolog-link svelte-73vl1x" data-kind="note">Introduction to Legal NLP</a> <small title="2022/9/4 3:30:00"><time>2022-09-04</time> </small> <span class="tags"><a href="/mono/NLP" class="tag svelte-inpyhr" data-kind="tag">NLP</a> <a href="/mono/LegalTech" class="tag svelte-inpyhr" data-kind="tag">LegalTech</a> </span> <p></p> </li><li class="link"><a href="/notes/pdf-publisher-and-me" class="monolog-link svelte-73vl1x" data-kind="note">PDFと、出版社と、私</a> <small title="2021/12/23 5:00:00"><time>2021-12-23</time> </small> <span class="tags"><a href="/mono/%E3%82%A2%E3%83%89%E3%83%99%E3%83%B3%E3%83%88%E3%82%AB%E3%83%AC%E3%83%B3%E3%83%80%E3%83%BC" class="tag svelte-inpyhr" data-kind="tag">アドベントカレンダー</a> <a href="/mono/LegalTech" class="tag svelte-inpyhr" data-kind="tag">LegalTech</a> </span> <p></p> </li><li class="link"><a href="/notes/legalscape-tech-stack" class="monolog-link svelte-73vl1x" data-kind="note">リーガルリサーチシステム「Legalscape」の技術スタック2021</a> <small title="2021/12/2 0:00:00"><time>2021-12-02</time> </small> <span class="tags"><a href="/mono/%E3%82%A2%E3%83%89%E3%83%99%E3%83%B3%E3%83%88%E3%82%AB%E3%83%AC%E3%83%B3%E3%83%80%E3%83%BC" class="tag svelte-inpyhr" data-kind="tag">アドベントカレンダー</a> </span> <p></p> </li></ul> </li></ul></section> <section class="mentions svelte-2o66h5"><section class="reaction svelte-2o66h5"><a href="https://twitter.com/intent/tweet?url=" class="svelte-2o66h5" style="background-image: url(data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20class='icon%20icon-tabler%20icon-tabler-message-circle'%20width='44'%20height='44'%20viewBox='0%200%2024%2024'%20stroke-width='1.5'%20stroke='%233579d1'%20fill='none'%20stroke-linecap='round'%20stroke-linejoin='round'%3e%3cpath%20stroke='none'%20d='M0%200h24v24H0z'%20fill='none'/%3e%3cpath%20d='M3%2020l1.3%20-3.9a9%208%200%201%201%203.4%202.9l-4.7%201'%20/%3e%3cline%20x1='12'%20y1='12'%20x2='12'%20y2='12.01'%20/%3e%3cline%20x1='8'%20y1='12'%20x2='8'%20y2='12.01'%20/%3e%3cline%20x1='16'%20y1='12'%20x2='16'%20y2='12.01'%20/%3e%3c/svg%3e); color: #3579d1;"><small class="svelte-2o66h5" data-svelte-h="svelte-1hjrerj">Xで</small> <span class="svelte-2o66h5" data-svelte-h="svelte-1t9k5yp">コメントする</span></a></section> <h1 class="svelte-2o66h5" data-svelte-h="svelte-15uxn7b">Mentions</h1> <ol reversed class="svelte-2o66h5 loading"></ol> </section></article></main>    <dialog title="クリックで閉じる"><button> <!-- HTML_TAG_START --><!-- HTML_TAG_END --></button> </dialog> <footer class="global-footer" data-svelte-h="svelte-mbbkne">Built with <a href="https://github.com/kissge/monolog">monolog</a></footer> 
			
			<script>
				{
					__sveltekit_c91qc9 = {
						base: new URL("../..", location).pathname.slice(0, -1)
					};

					const element = document.currentScript.parentElement;

					const data = [null,{"type":"data","data":{entity:{name:"Quine書いた (2024)",nameSegmented:["Quine書いた"," (2024)"],kind:"note",urlPath:"/notes/quine-2024",historyURL:"https://github.com/kissge/yo.eki.do/commits/master/notes/quine-2024.md",lastModified:new Date(1735124114000),attributes:{title:"Quine書いた (2024)",date:new Date(1727505060000),tags:["Quine","JavaScript"],header:"/images/2024/2024-09-28.quine.png"},tags:[{name:"Quine",kind:"tag",urlPath:"/mono/Quine"},{name:"JavaScript",kind:"tag",urlPath:"/mono/JavaScript"}],body:"\u003Cp>久々に\u003Ca href=\"/mono/Quine\" class=\"monolog-link\"  title=\"Quine\">Quine\u003C/a>を書いた。\u003C/p>\n\u003Cp>\u003Ca href=\"/mono/Quine\" class=\"monolog-link\"  title=\"Quine\">Quine\u003C/a>（クワイン）というのは、プログラミングを使ったアートみたいなもので、実行すると出力される内容が自分自身のソースコードと一致する自己言及的なプログラムのこと。たとえば \u003Ccode>print(&quot;hello&quot;)\u003C/code> という内容のプログラムは\u003Ca href=\"/mono/Quine\" class=\"monolog-link\"  title=\"Quine\">Quine\u003C/a>ではない。これを実行すると、たぶん \u003Ccode>hello\u003C/code> と出力され、当然 \u003Ccode>print(&quot;hello&quot;)\u003C/code> という文字列とは異なる。今度は不足を補おうとして \u003Ccode>print(&#39;print(&quot;hello&quot;)&#39;)\u003C/code> というプログラムを書いてみても、あるいはこの調子でどんどん長くしていっても、やっぱり一致することはない。このように、\u003Ca href=\"/mono/Quine\" class=\"monolog-link\"  title=\"Quine\">Quine\u003C/a>を書くこと自体がまずそんなに簡単ではない。その要件を満たしたうえで、ソースコードの見た目が何らかのデザインになっているとか、一工夫加えることでアートとして完成する。なお、あまりに知名度が低すぎて、\u003Ca href=\"/mono/Quine\" class=\"monolog-link\"  title=\"Quine\">Quine\u003C/a>を書いて人に見せるときに自分で\u003Ca href=\"/mono/Quine\" class=\"monolog-link\"  title=\"Quine\">Quine\u003C/a>の凄さを説明しないと何も伝わらない、という致命的な欠点があることで知られている（嘘）。\u003C/p>\n\u003Cp>今回書いたのは\u003Ca href=\"/mono/Legalscape\" class=\"monolog-link\"  title=\"Legalscape\">Legalscape\u003C/a>ロゴの形を象った\u003Ca href=\"/mono/JavaScript\" class=\"monolog-link\"  title=\"JavaScript\">JavaScript\u003C/a>製の\u003Ca href=\"/mono/Quine\" class=\"monolog-link\"  title=\"Quine\">Quine\u003C/a>。\u003C/p>\n\u003Cdiv class=\"no-wrap dense\">\n\n\u003Cpre>\u003Ccode class=\"language-js\">(W=          \u003Cspan class=\"hljs-function\">()=&gt;\u003C/span>(E=\u003Cspan class=\"hljs-string\">&#x27;!    !!!!!O5&#x27;\u003C/span>,      m=\u003Cspan class=\"hljs-string\">&#x27;f      NZ3          ~Wff&#x27;\u003C/span>,p=\u003Cspan class=\"hljs-string\">&#x27;    Pxr@&amp;PB,       &#x27;\u003C/span>,R=      \u003Cspan class=\"hljs-string\">&#x27;replace&#x27;\u003C/span>    ,e=\u003Cspan class=\"hljs-string\">`PlPqU\n#1e         `\u003C/span>,V=\u003Cspan class=\"hljs-function\">(\u003Cspan class=\"hljs-params\">cc\u003C/span>)=&gt;\u003C/span>   \u003Cspan class=\"hljs-string\">&#x27;!&#x27;\u003C/span>.\u003Cspan class=\"hljs-property\">repeat\u003C/span>     (cc*\u003Cspan class=\"hljs-number\">8\u003C/span>)     ,r=         \u003Cspan class=\"hljs-string\">&#x27;/d{z@U}8&#x27;\u003C/span>   ,t=\u003Cspan class=\"hljs-function\">\u003Cspan class=\"hljs-params\">s\u003C/span>=&gt;\u003C/span>(s[      ((R))]     (\u003Cspan class=\"hljs-regexp\">/\\s/g\u003C/span>s,\u003Cspan class=\"hljs-string\">&#x27;&#x27;\u003C/span>  )),l=\u003Cspan class=\"hljs-string\">`0R@_\nJi{         @`\u003C/span>,          o=             \u003Cspan class=\"hljs-string\">&#x27;*  )r     M&gt;9         \\\\           #&#x27;\u003C/span>             ,L  =\u003Cspan class=\"hljs-string\">`            %Sn  _PW       \nR+`\u003C/span>         ,i=         \u003Cspan class=\"hljs-string\">&#x27;8K             u1  99X    &quot;&#x27;\u003C/span>,         g=          \u003Cspan class=\"hljs-string\">&quot;7I            \\\\?  &#x27;V            @0&quot;\u003C/span>  ,n=       \n\u003Cspan class=\"hljs-string\">&#x27;9p         #b_         &lt;7             s&#x27;\u003C/span>,   P=    \u003Cspan class=\"hljs-string\">&#x27;V8         S;{         @B             x&#x27;\u003C/span>   ,f=           \u003Cspan class=\"hljs-string\">`2J  ahw       \ni@[         `\u003C/span>,a=\u003Cspan class=\"hljs-string\">&#x27;HUHe.  6~   V&#x27;\u003C/span>,w=\u003Cspan class=\"hljs-string\">&#x27;    +n    \\\\    5e~         LE&#x27;\u003C/span>,s=\u003Cspan class=\"hljs-string\">&#x27;CI   Av             oB    I$     &#x27;\u003C/span>,M={\u003Cspan class=\"hljs-number\">264\u003C/span>:  \u003Cspan class=\"hljs-number\">135\u003C/span>,\u003Cspan class=\"hljs-number\">259\u003C/span>:\u003Cspan class=\"hljs-number\">24\u003C/span>\n,\u003Cspan class=\"hljs-number\">32\u003C/span>         :\u003Cspan class=\"hljs-number\">13\u003C/span>,\u003Cspan class=\"hljs-number\">18\u003C/span>:\u003Cspan class=\"hljs-number\">13\u003C/span>,  \u003Cspan class=\"hljs-number\">8\u003C/span>:      \u003Cspan class=\"hljs-number\">13\u003C/span>,   \u003Cspan class=\"hljs-number\">134\u003C/span>    :\u003Cspan class=\"hljs-number\">16\u003C/span>   ,\u003Cspan class=\"hljs-number\">56\u003C/span>           :\u003Cspan class=\"hljs-number\">13\u003C/span>,\u003Cspan class=\"hljs-number\">256\u003C/span>:  \u003Cspan class=\"hljs-number\">23\u003C/span>            ,\u003Cspan class=\"hljs-number\">3\u003C/span>:    \u003Cspan class=\"hljs-number\">13\u003C/span>,   \u003Cspan class=\"hljs-number\">123\u003C/span>:\u003Cspan class=\"hljs-number\">13\u003C/span>,\u003Cspan class=\"hljs-number\">66\u003C/span>   :\u003Cspan class=\"hljs-number\">13\u003C/span>,\u003Cspan class=\"hljs-number\">257\u003C/span>:\u003Cspan class=\"hljs-number\">87\u003C/span>\n,\u003Cspan class=\"hljs-number\">99\u003C/span>         :\u003Cspan class=\"hljs-number\">13\u003C/span>         ,[       \u003Cspan class=\"hljs-number\">92\u003C/span>   ]:\u003Cspan class=\"hljs-number\">13\u003C/span>,\u003Cspan class=\"hljs-number\">248\u003C/span>:+   \u003Cspan class=\"hljs-number\">109\u003C/span>                ,[\u003Cspan class=\"hljs-number\">4\u003C/span>  *\u003Cspan class=\"hljs-number\">7\u003C/span>            *\u003Cspan class=\"hljs-number\">9\u003C/span>      ]:   \u003Cspan class=\"hljs-number\">109\u003C/span>         ,[\u003Cspan class=\"hljs-number\">9\u003C/span>       \n*\u003Cspan class=\"hljs-number\">17\u003C/span>         +\u003Cspan class=\"hljs-number\">5\u003C/span>]         :\u003Cspan class=\"hljs-number\">17\u003C/span>      ,[   \u003Cspan class=\"hljs-number\">184\u003C/span>]:\u003Cspan class=\"hljs-number\">15\u003C/span>,\u003Cspan class=\"hljs-number\">244\u003C/span>  :\u003Cspan class=\"hljs-number\">87\u003C/span>                 ,[  \u003Cspan class=\"hljs-number\">29\u003C/span>*          \u003Cspan class=\"hljs-number\">9\u003C/span>]:      \u003Cspan class=\"hljs-number\">84\u003C/span>   ,[+         \u003Cspan class=\"hljs-number\">263\u003C/span>       \n ]:+        \u003Cspan class=\"hljs-number\">22\u003C/span>,          [\u003Cspan class=\"hljs-number\">2\u003C/span>*    \u003Cspan class=\"hljs-number\">131\u003C/span>  ]:+       \u003Cspan class=\"hljs-number\">13\u003C/span>}  ,D=               \u003Cspan class=\"hljs-string\">`7*   dj=         }&#x27;       (\u003Cspan class=\"hljs-subst\">${  V(\u003Cspan class=\"hljs-number\">4\u003C/span>         )}\u003C/span>G       \n tCIFRsTb?  T[GpO%\u003Cspan class=\"hljs-subst\">${V(    \u003Cspan class=\"hljs-number\">1\u003C/span>)}\u003C/span>7\\&quot;o.H  !vd       \u003Cspan class=\"hljs-subst\">${V  (\u003Cspan class=\"hljs-number\">1\u003C/span>)}\u003C/span>FdZ&lt;Q  FsM\u003Cspan class=\"hljs-subst\">${V(\u003Cspan class=\"hljs-number\">1\u003C/span>)}\u003C/span>    .aTcH1!&#x27;   ~~        ~~  ~~~          ~s-&#x27;I&#x27;aZ+\n   ($}?g3/    RPN0h#S;     )`\u003C/span>,S=[   ...         \u003Cspan class=\"hljs-title function_\">t\u003C/span>(\u003Cspan class=\"hljs-string\">`   (W=\u003Cspan class=\"hljs-subst\">${W}\u003C/span>  )()`\u003C/span>)],C=      \u003Cspan class=\"hljs-function\">\u003Cspan class=\"hljs-params\">s\u003C/span>=&gt;\u003C/span>[...  \u003Cspan class=\"hljs-title function_\">t\u003C/span>(s        )]  [\u003Cspan class=\"hljs-number\">0\u003C/span>,           \u003Cspan class=\"hljs-string\">&#x27;reduce&#x27;\u003C/span>\n                                                                                       ](         \u003Cspan class=\"hljs-function\">(\u003Cspan class=\"hljs-params\">A,                       \n                                                                                      c,\u003C/span>)          =&gt;\u003C/span>                       \n                                                                                      A*           \u003Cspan class=\"hljs-number\">94n\u003C/span>                      \n +\u003Cspan class=\"hljs-title class_\">BigInt\u003C/span>(c.\u003Cspan class=\"hljs-title function_\">charCodeAt\u003C/span>(\u003Cspan class=\"hljs-number\">0\u003C/span>)-\u003Cspan class=\"hljs-number\">33\u003C/span>),\u003Cspan class=\"hljs-number\">0n\u003C/span>),\u003Cspan class=\"hljs-function\">(\u003Cspan class=\"hljs-params\">by,YK,..._\u003C/span>)=&gt;\u003C/span>\u003Cspan class=\"hljs-variable language_\">console\u003C/span>.\u003Cspan class=\"hljs-title function_\">log\u003C/span>([...(\u003Cspan class=\"hljs-title function_\">C\u003C/span>(_.\u003Cspan class=\"hljs-title function_\">join\u003C/span>(\u003Cspan class=\"hljs-string\">&#x27;&#x27;\u003C/span>))+\u003Cspan class=\"hljs-title function_\">C\u003C/span>(D))[\u003Cspan class=\"hljs-string\">&#x27;to&#x27;\u003C/span>            +\u003Cspan class=\"hljs-string\">&#x27;String&#x27;\u003C/span>](\u003Cspan class=\"hljs-number\">12\u003C/span>)].\u003Cspan class=\"hljs-title function_\">flatMap\u003C/span>(\n   \u003Cspan class=\"hljs-function\">(\u003Cspan class=\"hljs-params\">c,i\u003C/span>)=&gt;\u003C/span>(X=M[i-\u003Cspan class=\"hljs-number\">33\u003C/span>]??\u003Cspan class=\"hljs-built_in\">parseInt\u003C/span>(c,\u003Cspan class=\"hljs-number\">12\u003C/span>)+\u003Cspan class=\"hljs-number\">1\u003C/span>,i%\u003Cspan class=\"hljs-number\">2\u003C/span>?\u003Cspan class=\"hljs-string\">&#x27;\\x20&#x27;\u003C/span>.\u003Cspan class=\"hljs-title function_\">repeat\u003C/span>(X):S.\u003Cspan class=\"hljs-title function_\">splice\u003C/span>(\u003Cspan class=\"hljs-number\">0\u003C/span>,X))).\u003Cspan class=\"hljs-title function_\">join\u003C/span>(\u003Cspan class=\"hljs-string\">&#x27;&#x27;\u003C/span>)[R]             (\u003Cspan class=\"hljs-regexp\">/(.{124})/g\u003C/span>,\u003Cspan class=\"hljs-string\">&#x27;$1\\n&#x27;\u003C/span>)))  \n                                                                                                                            \n         (     W, e,     E, m, p, o, w, e, r,     L, e, g, a, l,     P, r, o, f, e, s, s, i, o, n, a, l, s     ))()\n\u003C/code>\u003C/pre>\n\u003C/div>\n\n\u003Cp>これを適当な処理系で実行すると、ソースコードと同じ内容が出力される。\u003C/p>\n\u003Cpre>\u003Ccode class=\"language-shell\">\u003Cspan class=\"hljs-meta prompt_\">$ \u003C/span>\u003Cspan class=\"language-bash\">node quine.js &gt; output\u003C/span>\n\u003Cspan class=\"hljs-meta prompt_\">$ \u003C/span>\u003Cspan class=\"language-bash\">diff -s quine.js output\u003C/span>\nFiles quine.js and output are identical\n\u003C/code>\u003C/pre>\n\u003Cp>見ての通り、ポイントは最後の行。元のロゴにある「WE EMPOWER LEGAL PROFESSIONALS」という文字列が、それぞれ一文字ずつ変数として定義され、関数呼び出しの引数リストを形成している。もちろんこれは無意味な装飾ではない。このプログラムは全体で、この引数の文字列を結合して得られる文字列をデコードし、ロゴの形に整形されたソースコードを復元するものになっている。\u003C/p>\n\u003Cp>prettifyしたソースコードを見れば分かるように、このコードには全体で1文しか登場しない。これでセミコロン有り派もセミコロン無し派も満足の、いわば\u003Ca href=\"/mono/JavaScript\" class=\"monolog-link\"  title=\"JavaScript\">JavaScript\u003C/a>版広辞苑前文方式が達成されている（適当）（後付け）。\u003C/p>\n\u003Cpre>\u003Ccode class=\"language-js\">(W = \u003Cspan class=\"hljs-function\">() =&gt;\u003C/span>\n  ((E = \u003Cspan class=\"hljs-string\">&#x27;!    !!!!!O5&#x27;\u003C/span>),\n  (m = \u003Cspan class=\"hljs-string\">&#x27;f      NZ3          ~Wff&#x27;\u003C/span>),\n  (p = \u003Cspan class=\"hljs-string\">&#x27;    Pxr@&amp;PB,       &#x27;\u003C/span>),\n  (R = \u003Cspan class=\"hljs-string\">&#x27;replace&#x27;\u003C/span>),\n  (e = \u003Cspan class=\"hljs-string\">`PlPqU\\n#1e         `\u003C/span>),\n  (V = \u003Cspan class=\"hljs-function\">(\u003Cspan class=\"hljs-params\">cc\u003C/span>) =&gt;\u003C/span> \u003Cspan class=\"hljs-string\">&#x27;!&#x27;\u003C/span>.\u003Cspan class=\"hljs-title function_\">repeat\u003C/span>(cc * \u003Cspan class=\"hljs-number\">8\u003C/span>)),\n  (r = \u003Cspan class=\"hljs-string\">&#x27;/d{z@U}8&#x27;\u003C/span>),\n  (t = \u003Cspan class=\"hljs-function\">(\u003Cspan class=\"hljs-params\">s\u003C/span>) =&gt;\u003C/span> s[R](\u003Cspan class=\"hljs-regexp\">/\\s/g\u003C/span>s, \u003Cspan class=\"hljs-string\">&#x27;&#x27;\u003C/span>)),\n  (l = \u003Cspan class=\"hljs-string\">`0R@_\\nJi{         @`\u003C/span>),\n  (o = \u003Cspan class=\"hljs-string\">&#x27;*  )r     M&gt;9         \\\\           #&#x27;\u003C/span>),\n  (L = \u003Cspan class=\"hljs-string\">`            %Sn  _PW       \\nR+`\u003C/span>),\n  (i = \u003Cspan class=\"hljs-string\">&#x27;8K             u1  99X    &quot;&#x27;\u003C/span>),\n  (g = \u003Cspan class=\"hljs-string\">&quot;7I            \\\\?  &#x27;V            @0&quot;\u003C/span>),\n  (n = \u003Cspan class=\"hljs-string\">&#x27;9p         #b_         &lt;7             s&#x27;\u003C/span>),\n  (P = \u003Cspan class=\"hljs-string\">&#x27;V8         S;{         @B             x&#x27;\u003C/span>),\n  (f = \u003Cspan class=\"hljs-string\">`2J  ahw       \\ni@[         `\u003C/span>),\n  (a = \u003Cspan class=\"hljs-string\">&#x27;HUHe.  6~   V&#x27;\u003C/span>),\n  (w = \u003Cspan class=\"hljs-string\">&#x27;    +n    \\\\    5e~         LE&#x27;\u003C/span>),\n  (s = \u003Cspan class=\"hljs-string\">&#x27;CI   Av             oB    I$     &#x27;\u003C/span>),\n  (M = {\n    \u003Cspan class=\"hljs-number\">264\u003C/span>: \u003Cspan class=\"hljs-number\">135\u003C/span>, \u003Cspan class=\"hljs-number\">259\u003C/span>: \u003Cspan class=\"hljs-number\">24\u003C/span>, \u003Cspan class=\"hljs-number\">32\u003C/span>: \u003Cspan class=\"hljs-number\">13\u003C/span>, \u003Cspan class=\"hljs-number\">18\u003C/span>: \u003Cspan class=\"hljs-number\">13\u003C/span>, \u003Cspan class=\"hljs-number\">8\u003C/span>: \u003Cspan class=\"hljs-number\">13\u003C/span>, \u003Cspan class=\"hljs-number\">134\u003C/span>: \u003Cspan class=\"hljs-number\">16\u003C/span>, \u003Cspan class=\"hljs-number\">56\u003C/span>: \u003Cspan class=\"hljs-number\">13\u003C/span>, \u003Cspan class=\"hljs-number\">256\u003C/span>: \u003Cspan class=\"hljs-number\">23\u003C/span>, \u003Cspan class=\"hljs-number\">3\u003C/span>: \u003Cspan class=\"hljs-number\">13\u003C/span>, \u003Cspan class=\"hljs-number\">123\u003C/span>: \u003Cspan class=\"hljs-number\">13\u003C/span>, \u003Cspan class=\"hljs-number\">66\u003C/span>: \u003Cspan class=\"hljs-number\">13\u003C/span>, \u003Cspan class=\"hljs-number\">257\u003C/span>: \u003Cspan class=\"hljs-number\">87\u003C/span>,\n    \u003Cspan class=\"hljs-number\">99\u003C/span>: \u003Cspan class=\"hljs-number\">13\u003C/span>, [\u003Cspan class=\"hljs-number\">92\u003C/span>]: \u003Cspan class=\"hljs-number\">13\u003C/span>, \u003Cspan class=\"hljs-number\">248\u003C/span>: +\u003Cspan class=\"hljs-number\">109\u003C/span>, [\u003Cspan class=\"hljs-number\">4\u003C/span> * \u003Cspan class=\"hljs-number\">7\u003C/span> * \u003Cspan class=\"hljs-number\">9\u003C/span>]: \u003Cspan class=\"hljs-number\">109\u003C/span>, [\u003Cspan class=\"hljs-number\">9\u003C/span> * \u003Cspan class=\"hljs-number\">17\u003C/span> + \u003Cspan class=\"hljs-number\">5\u003C/span>]: \u003Cspan class=\"hljs-number\">17\u003C/span>,\n    [\u003Cspan class=\"hljs-number\">184\u003C/span>]: \u003Cspan class=\"hljs-number\">15\u003C/span>, \u003Cspan class=\"hljs-number\">244\u003C/span>: \u003Cspan class=\"hljs-number\">87\u003C/span>, [\u003Cspan class=\"hljs-number\">29\u003C/span> * \u003Cspan class=\"hljs-number\">9\u003C/span>]: \u003Cspan class=\"hljs-number\">84\u003C/span>, [+\u003Cspan class=\"hljs-number\">263\u003C/span>]: +\u003Cspan class=\"hljs-number\">22\u003C/span>, [\u003Cspan class=\"hljs-number\">2\u003C/span> * \u003Cspan class=\"hljs-number\">131\u003C/span>]: +\u003Cspan class=\"hljs-number\">13\u003C/span>,\n  }),\n  (D = \u003Cspan class=\"hljs-string\">`7*   dj=         }&#x27;       (\u003Cspan class=\"hljs-subst\">${V(\u003Cspan class=\"hljs-number\">4\u003C/span>)}\u003C/span>G       \\n tCIFRsTb?  T[GpO%\u003Cspan class=\"hljs-subst\">${V(\u003Cspan class=\"hljs-number\">1\u003C/span>)}\u003C/span>7\\&quot;o.H  !vd       \u003Cspan class=\"hljs-subst\">${V(\u003Cspan class=\"hljs-number\">1\u003C/span>)}\u003C/span>FdZ&lt;Q  FsM\u003Cspan class=\"hljs-subst\">${V(\u003Cspan class=\"hljs-number\">1\u003C/span>)}\u003C/span>    .aTcH1!&#x27;   ~~        ~~  ~~~          ~s-&#x27;I&#x27;aZ+\\n   ($}?g3/    RPN0h#S;     )`\u003C/span>),\n  (S = [...\u003Cspan class=\"hljs-title function_\">t\u003C/span>(\u003Cspan class=\"hljs-string\">`   (W=\u003Cspan class=\"hljs-subst\">${W}\u003C/span>  )()`\u003C/span>)]),\n  (C = \u003Cspan class=\"hljs-function\">(\u003Cspan class=\"hljs-params\">s\u003C/span>) =&gt;\u003C/span> [...\u003Cspan class=\"hljs-title function_\">t\u003C/span>(s)][(\u003Cspan class=\"hljs-number\">0\u003C/span>, \u003Cspan class=\"hljs-string\">&#x27;reduce&#x27;\u003C/span>)](\u003Cspan class=\"hljs-function\">(\u003Cspan class=\"hljs-params\">A, c\u003C/span>) =&gt;\u003C/span> A * \u003Cspan class=\"hljs-number\">94n\u003C/span> + \u003Cspan class=\"hljs-title class_\">BigInt\u003C/span>(c.\u003Cspan class=\"hljs-title function_\">charCodeAt\u003C/span>(\u003Cspan class=\"hljs-number\">0\u003C/span>) - \u003Cspan class=\"hljs-number\">33\u003C/span>), \u003Cspan class=\"hljs-number\">0n\u003C/span>)),\n  \u003Cspan class=\"hljs-function\">(\u003Cspan class=\"hljs-params\">by, YK, ..._\u003C/span>) =&gt;\u003C/span>\n    \u003Cspan class=\"hljs-variable language_\">console\u003C/span>.\u003Cspan class=\"hljs-title function_\">log\u003C/span>(\n      [...(\u003Cspan class=\"hljs-title function_\">C\u003C/span>(_.\u003Cspan class=\"hljs-title function_\">join\u003C/span>(\u003Cspan class=\"hljs-string\">&#x27;&#x27;\u003C/span>)) + \u003Cspan class=\"hljs-title function_\">C\u003C/span>(D))[\u003Cspan class=\"hljs-string\">&#x27;to&#x27;\u003C/span> + \u003Cspan class=\"hljs-string\">&#x27;String&#x27;\u003C/span>](\u003Cspan class=\"hljs-number\">12\u003C/span>)]\n        .\u003Cspan class=\"hljs-title function_\">flatMap\u003C/span>(\u003Cspan class=\"hljs-function\">(\u003Cspan class=\"hljs-params\">c, i\u003C/span>) =&gt;\u003C/span> ((X = M[i - \u003Cspan class=\"hljs-number\">33\u003C/span>] ?? \u003Cspan class=\"hljs-built_in\">parseInt\u003C/span>(c, \u003Cspan class=\"hljs-number\">12\u003C/span>) + \u003Cspan class=\"hljs-number\">1\u003C/span>), i % \u003Cspan class=\"hljs-number\">2\u003C/span> ? \u003Cspan class=\"hljs-string\">&#x27;\\x20&#x27;\u003C/span>.\u003Cspan class=\"hljs-title function_\">repeat\u003C/span>(X) : S.\u003Cspan class=\"hljs-title function_\">splice\u003C/span>(\u003Cspan class=\"hljs-number\">0\u003C/span>, X)))\n        .\u003Cspan class=\"hljs-title function_\">join\u003C/span>(\u003Cspan class=\"hljs-string\">&#x27;&#x27;\u003C/span>)\n        [R](\u003Cspan class=\"hljs-regexp\">/(.{124})/g\u003C/span>, \u003Cspan class=\"hljs-string\">&#x27;$1\\n&#x27;\u003C/span>),\n    ))(W, e, E, m, p, o, w, e, r, L, e, g, a, l, P, r, o, f, e, s, s, i, o, n, a, l, s))();\n\u003C/code>\u003C/pre>\n\u003Cp>データをデコードし文字列生成する処理自体はそこまで難しくないのだが、その処理全体をさらにロゴの形に整形しても動かないといけない（たとえば \u003Ccode>(x)⎵=&gt;++x\u003C/code> という位置にスペースが入るのはよくても \u003Ccode>(x)=⎵&gt;++x\u003C/code> は文法エラーになる）ので、その調整が作る上での本丸であった。まずデータを圧縮しいかにコードを短くするかを考え、極限まで短くした後は、都合の悪いところでコードが切れないようにひたすら \u003Ccode>array.reduce\u003C/code> → \u003Ccode>array[0, &#39;reduce&#39;]\u003C/code> みたいな書き換えを頑張って思いつく作業を繰り返し、最後にサインを入れたり変数の順番を入れ替えたりして見栄えを整える微調整を施して完成。\u003C/p>\n\u003Cp>ちなみに、ロゴの形のデータは、画像ファイルを用意して、ImageMagickで\u003Ca href=\"https://ja.wikipedia.org/wiki/PNM_(%E7%94%BB%E5%83%8F%E3%83%95%E3%82%A9%E3%83%BC%E3%83%9E%E3%83%83%E3%83%88)\">PNM\u003C/a>に変換すると比較的簡単に得られる。\u003C/p>\n\u003Cpre>\u003Ccode class=\"language-sh\">height=30\nmagick logo.png -background white -flatten -geometry x\u003Cspan class=\"hljs-variable\">${height}\u003C/span> -compress none logo.pbm\n\u003C/code>\u003C/pre>\n\u003Cp>作ってみて、データ部分とロジック部分の比率がちょっとデータに寄りすぎかなあ、と思うけれど、そもそも相場を知らないので、まあいいや。\u003C/p>\n",headline:"久々にQuineを書いた。Quine（クワイン）というのは、プログラミングを使ったアートみたいなもので、実行すると出力される内容が自分自身のソースコードと一致する自己言及的なプログラムのこと。たとえば print(&quot;hello&quot;) という内容のプログラムはQuineではない。これを実行すると、たぶん hello と出力され、当然 print(&quot;hello&quot;) という文字列とは異なる。今度は不足を補おうとして print(&#39;print(&quot;hello&quot;)&#39;) というプログラムを書いてみても、あるいはこの調子でどんどん長くしていっても、やっぱり一致することはない。このように、Quineを書くこと自体がまずそんなに簡単ではない。その要件を満たしたうえで、ソースコードの見た目が何らかのデザインになっているとか、一工夫加えることでアートとして完成する。なお、あまりに知名度が低すぎて、Quineを書いて人に見せるときに自分でQuineの凄さを説明しないと何も伝わらない、という致命的な欠点があることで知られている（嘘）。今回書いたのはLegalsca",links:{to:{urlPath:"/notes/quine-2024",entities:[{name:"Quine",nameSegmented:["Quine"],kind:"tag",urlPath:"/mono/Quine",tags:[],isEmpty:true},{name:"JavaScript",nameSegmented:["JavaScript"],kind:"tag",urlPath:"/mono/JavaScript",tags:[],isEmpty:true},{name:"Legalscape",nameSegmented:["Legalscape"],kind:"組織",urlPath:"/mono/Legalscape",historyURL:"https://github.com/kissge/yo.eki.do/commits/master/mono/組織/Legalscape.md",lastModified:new Date(1717261144000),attributes:{},tags:[],isEmpty:true}]},one_hop_Quine:{urlPath:"/mono/Quine",entities:[]},one_hop_JavaScript:{urlPath:"/mono/JavaScript",entities:[{name:"ja-JP-u-ca-japaneseって何？ UnicodeのCLDRを読んでみよう（あるいは、JavaScriptで和暦を得る簡単なテクについて）",nameSegmented:["ja-JP-u-ca-japaneseって","何？"," Unicodeの","CLDRを","読んで","みよう","（あるいは、","JavaScriptで","和暦を","得る","簡単な","テクに","ついて）"],kind:"note",urlPath:"/notes/cldr",historyURL:"https://github.com/kissge/yo.eki.do/commits/master/notes/cldr.md",lastModified:new Date(1654947140000),attributes:{title:"ja-JP-u-ca-japaneseって何？ UnicodeのCLDRを読んでみよう（あるいは、JavaScriptで和暦を得る簡単なテクについて）",date:new Date(1645238460000),tags:["Unicode"]},tags:[{name:"Unicode",kind:"tag",urlPath:"/mono/Unicode"}],isEmpty:false},{name:"monolog",nameSegmented:["monolog"],kind:"ソフトウェア",urlPath:"/mono/monolog",historyURL:"https://github.com/kissge/yo.eki.do/commits/master/mono/ソフトウェア/monolog.md",lastModified:new Date(1670079089000),attributes:{definition:"「もの」のログを実現する、あなたが今見ているこのWebサイトを構築したソフトウェア",date:new Date(1609037253000),url:"https://github.com/kissge/monolog",tags:["開発したもの","Svelte","TypeScript"]},tags:[{name:"開発したもの",kind:"tag",urlPath:"/mono/%E9%96%8B%E7%99%BA%E3%81%97%E3%81%9F%E3%82%82%E3%81%AE"},{name:"Svelte",kind:"tag",urlPath:"/mono/Svelte"},{name:"TypeScript",kind:"tag",urlPath:"/mono/TypeScript"}],isEmpty:false},{name:"来年こそは届いてほしいスマートグラス「Vue」",nameSegmented:["来年こそは","届いて","ほしい","スマートグラス「Vue」"],kind:"note",urlPath:"/notes/crowdfunding-vue",historyURL:"https://github.com/kissge/yo.eki.do/commits/master/notes/crowdfunding-vue.md",lastModified:new Date(1654932859000),attributes:{from:"wordpress",title:"来年こそは届いてほしいスマートグラス「Vue」",date:new Date(1544660227000),tags:["アドベントカレンダー"]},tags:[{name:"アドベントカレンダー",kind:"tag",urlPath:"/mono/%E3%82%A2%E3%83%89%E3%83%99%E3%83%B3%E3%83%88%E3%82%AB%E3%83%AC%E3%83%B3%E3%83%80%E3%83%BC"}],isEmpty:false},{name:"Emacs: re-builder + foreign-regexp.elでたのしい正規表現",nameSegmented:["Emacs: re-builder + foreign-regexp.elで","たのしい","正規表現"],kind:"note",urlPath:"/notes/foreign-regexp-el",historyURL:"https://github.com/kissge/yo.eki.do/commits/master/notes/foreign-regexp-el.md",lastModified:new Date(1654933943000),attributes:{from:"wordpress",title:"Emacs: re-builder + foreign-regexp.elでたのしい正規表現",date:new Date(1419031853000),tags:["アドベントカレンダー"]},tags:[{name:"アドベントカレンダー",kind:"tag",urlPath:"/mono/%E3%82%A2%E3%83%89%E3%83%99%E3%83%B3%E3%83%88%E3%82%AB%E3%83%AC%E3%83%B3%E3%83%80%E3%83%BC"}],isEmpty:false}]},one_hop_Legalscape:{urlPath:"/mono/Legalscape",entities:[{name:"VAIO SX12 ALL BLACK EDITIONを買った",nameSegmented:["VAIO SX12 ALL BLACK EDITIONを","買った"],kind:"note",urlPath:"/notes/vaio-sx12",historyURL:"https://github.com/kissge/yo.eki.do/commits/master/notes/vaio-sx12.md",lastModified:new Date(1670079164000),attributes:{title:"VAIO SX12 ALL BLACK EDITIONを買った",date:new Date(1670076098000),header:"https://vaio.com/products/allblack_sx12/images/img_main.png"},tags:[],isEmpty:false},{name:"Introduction to Legal NLP",nameSegmented:["Introduction to Legal NLP"],kind:"note",urlPath:"/notes/lnlp",historyURL:"https://github.com/kissge/yo.eki.do/commits/master/notes/lnlp.md",lastModified:new Date(1677940441000),attributes:{title:"Introduction to Legal NLP",date:new Date(1662262200000),lang:"en",slides:true,tags:["NLP","LegalTech"]},tags:[{name:"NLP",kind:"tag",urlPath:"/mono/NLP"},{name:"LegalTech",kind:"tag",urlPath:"/mono/LegalTech"}],isEmpty:false},{name:"PDFと、出版社と、私",nameSegmented:["PDFと、","出版社と、","私"],kind:"note",urlPath:"/notes/pdf-publisher-and-me",historyURL:"https://github.com/kissge/yo.eki.do/commits/master/notes/pdf-publisher-and-me.md",lastModified:new Date(1662271128000),attributes:{title:"PDFと、出版社と、私",date:new Date(1640235600000),tags:["アドベントカレンダー","LegalTech"]},tags:[{name:"アドベントカレンダー",kind:"tag",urlPath:"/mono/%E3%82%A2%E3%83%89%E3%83%99%E3%83%B3%E3%83%88%E3%82%AB%E3%83%AC%E3%83%B3%E3%83%80%E3%83%BC"},{name:"LegalTech",kind:"tag",urlPath:"/mono/LegalTech"}],isEmpty:false},{name:"リーガルリサーチシステム「Legalscape」の技術スタック2021",nameSegmented:["リーガルリサーチシステム","「Legalscape」の","技術スタック2021"],kind:"note",urlPath:"/notes/legalscape-tech-stack",historyURL:"https://github.com/kissge/yo.eki.do/commits/master/notes/legalscape-tech-stack.md",lastModified:new Date(1654932819000),attributes:{title:"リーガルリサーチシステム「Legalscape」の技術スタック2021",date:new Date(1638403200000),tags:["アドベントカレンダー"]},tags:[{name:"アドベントカレンダー",kind:"tag",urlPath:"/mono/%E3%82%A2%E3%83%89%E3%83%99%E3%83%B3%E3%83%88%E3%82%AB%E3%83%AC%E3%83%B3%E3%83%80%E3%83%BC"}],isEmpty:false}]}},isEmpty:false}},"uses":{"url":1}}];

					Promise.all([
						import("../../_app/immutable/entry/start.CglOfGuw.js"),
						import("../../_app/immutable/entry/app.BDt81B89.js")
					]).then(([kit, app]) => {
						kit.start(app, element, {
							node_ids: [0, 3],
							data,
							form: null,
							error: null
						});
					});
				}
			</script>
		</div>
  </body>
</html>
