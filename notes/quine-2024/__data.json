{"type":"data","nodes":[null,{"type":"data","data":[{"entity":1},{"name":2,"nameSegmented":3,"kind":6,"urlPath":7,"historyURL":8,"lastModified":9,"attributes":10,"tags":16,"body":22,"headline":23,"links":24,"isEmpty":73},"Quine書いた (2024)",[4,5],"Quine書いた"," (2024)","note","/notes/quine-2024","https://github.com/kissge/yo.eki.do/commits/master/notes/quine-2024.md",["Date","2024-12-25T10:55:14.000Z"],{"title":2,"date":11,"tags":12,"header":15},["Date","2024-09-28T06:31:00.000Z"],[13,14],"Quine","JavaScript","/images/2024/2024-09-28.quine.png",[17,20],{"name":13,"kind":18,"urlPath":19},"tag","/mono/Quine",{"name":14,"kind":18,"urlPath":21},"/mono/JavaScript","\u003Cp>久々に\u003Ca href=\"/mono/Quine\" class=\"monolog-link\"  title=\"Quine\">Quine\u003C/a>を書いた。\u003C/p>\n\u003Cp>\u003Ca href=\"/mono/Quine\" class=\"monolog-link\"  title=\"Quine\">Quine\u003C/a>（クワイン）というのは、プログラミングを使ったアートみたいなもので、実行すると出力される内容が自分自身のソースコードと一致する自己言及的なプログラムのこと。たとえば \u003Ccode>print(&quot;hello&quot;)\u003C/code> という内容のプログラムは\u003Ca href=\"/mono/Quine\" class=\"monolog-link\"  title=\"Quine\">Quine\u003C/a>ではない。これを実行すると、たぶん \u003Ccode>hello\u003C/code> と出力され、当然 \u003Ccode>print(&quot;hello&quot;)\u003C/code> という文字列とは異なる。今度は不足を補おうとして \u003Ccode>print(&#39;print(&quot;hello&quot;)&#39;)\u003C/code> というプログラムを書いてみても、あるいはこの調子でどんどん長くしていっても、やっぱり一致することはない。このように、\u003Ca href=\"/mono/Quine\" class=\"monolog-link\"  title=\"Quine\">Quine\u003C/a>を書くこと自体がまずそんなに簡単ではない。その要件を満たしたうえで、ソースコードの見た目が何らかのデザインになっているとか、一工夫加えることでアートとして完成する。なお、あまりに知名度が低すぎて、\u003Ca href=\"/mono/Quine\" class=\"monolog-link\"  title=\"Quine\">Quine\u003C/a>を書いて人に見せるときに自分で\u003Ca href=\"/mono/Quine\" class=\"monolog-link\"  title=\"Quine\">Quine\u003C/a>の凄さを説明しないと何も伝わらない、という致命的な欠点があることで知られている（嘘）。\u003C/p>\n\u003Cp>今回書いたのは\u003Ca href=\"/mono/Legalscape\" class=\"monolog-link\"  title=\"Legalscape\">Legalscape\u003C/a>ロゴの形を象った\u003Ca href=\"/mono/JavaScript\" class=\"monolog-link\"  title=\"JavaScript\">JavaScript\u003C/a>製の\u003Ca href=\"/mono/Quine\" class=\"monolog-link\"  title=\"Quine\">Quine\u003C/a>。\u003C/p>\n\u003Cdiv class=\"no-wrap dense\">\n\n\u003Cpre>\u003Ccode class=\"language-js\">(W=          \u003Cspan class=\"hljs-function\">()=&gt;\u003C/span>(E=\u003Cspan class=\"hljs-string\">&#x27;!    !!!!!O5&#x27;\u003C/span>,      m=\u003Cspan class=\"hljs-string\">&#x27;f      NZ3          ~Wff&#x27;\u003C/span>,p=\u003Cspan class=\"hljs-string\">&#x27;    Pxr@&amp;PB,       &#x27;\u003C/span>,R=      \u003Cspan class=\"hljs-string\">&#x27;replace&#x27;\u003C/span>    ,e=\u003Cspan class=\"hljs-string\">`PlPqU\n#1e         `\u003C/span>,V=\u003Cspan class=\"hljs-function\">(\u003Cspan class=\"hljs-params\">cc\u003C/span>)=&gt;\u003C/span>   \u003Cspan class=\"hljs-string\">&#x27;!&#x27;\u003C/span>.\u003Cspan class=\"hljs-property\">repeat\u003C/span>     (cc*\u003Cspan class=\"hljs-number\">8\u003C/span>)     ,r=         \u003Cspan class=\"hljs-string\">&#x27;/d{z@U}8&#x27;\u003C/span>   ,t=\u003Cspan class=\"hljs-function\">\u003Cspan class=\"hljs-params\">s\u003C/span>=&gt;\u003C/span>(s[      ((R))]     (\u003Cspan class=\"hljs-regexp\">/\\s/g\u003C/span>s,\u003Cspan class=\"hljs-string\">&#x27;&#x27;\u003C/span>  )),l=\u003Cspan class=\"hljs-string\">`0R@_\nJi{         @`\u003C/span>,          o=             \u003Cspan class=\"hljs-string\">&#x27;*  )r     M&gt;9         \\\\           #&#x27;\u003C/span>             ,L  =\u003Cspan class=\"hljs-string\">`            %Sn  _PW       \nR+`\u003C/span>         ,i=         \u003Cspan class=\"hljs-string\">&#x27;8K             u1  99X    &quot;&#x27;\u003C/span>,         g=          \u003Cspan class=\"hljs-string\">&quot;7I            \\\\?  &#x27;V            @0&quot;\u003C/span>  ,n=       \n\u003Cspan class=\"hljs-string\">&#x27;9p         #b_         &lt;7             s&#x27;\u003C/span>,   P=    \u003Cspan class=\"hljs-string\">&#x27;V8         S;{         @B             x&#x27;\u003C/span>   ,f=           \u003Cspan class=\"hljs-string\">`2J  ahw       \ni@[         `\u003C/span>,a=\u003Cspan class=\"hljs-string\">&#x27;HUHe.  6~   V&#x27;\u003C/span>,w=\u003Cspan class=\"hljs-string\">&#x27;    +n    \\\\    5e~         LE&#x27;\u003C/span>,s=\u003Cspan class=\"hljs-string\">&#x27;CI   Av             oB    I$     &#x27;\u003C/span>,M={\u003Cspan class=\"hljs-number\">264\u003C/span>:  \u003Cspan class=\"hljs-number\">135\u003C/span>,\u003Cspan class=\"hljs-number\">259\u003C/span>:\u003Cspan class=\"hljs-number\">24\u003C/span>\n,\u003Cspan class=\"hljs-number\">32\u003C/span>         :\u003Cspan class=\"hljs-number\">13\u003C/span>,\u003Cspan class=\"hljs-number\">18\u003C/span>:\u003Cspan class=\"hljs-number\">13\u003C/span>,  \u003Cspan class=\"hljs-number\">8\u003C/span>:      \u003Cspan class=\"hljs-number\">13\u003C/span>,   \u003Cspan class=\"hljs-number\">134\u003C/span>    :\u003Cspan class=\"hljs-number\">16\u003C/span>   ,\u003Cspan class=\"hljs-number\">56\u003C/span>           :\u003Cspan class=\"hljs-number\">13\u003C/span>,\u003Cspan class=\"hljs-number\">256\u003C/span>:  \u003Cspan class=\"hljs-number\">23\u003C/span>            ,\u003Cspan class=\"hljs-number\">3\u003C/span>:    \u003Cspan class=\"hljs-number\">13\u003C/span>,   \u003Cspan class=\"hljs-number\">123\u003C/span>:\u003Cspan class=\"hljs-number\">13\u003C/span>,\u003Cspan class=\"hljs-number\">66\u003C/span>   :\u003Cspan class=\"hljs-number\">13\u003C/span>,\u003Cspan class=\"hljs-number\">257\u003C/span>:\u003Cspan class=\"hljs-number\">87\u003C/span>\n,\u003Cspan class=\"hljs-number\">99\u003C/span>         :\u003Cspan class=\"hljs-number\">13\u003C/span>         ,[       \u003Cspan class=\"hljs-number\">92\u003C/span>   ]:\u003Cspan class=\"hljs-number\">13\u003C/span>,\u003Cspan class=\"hljs-number\">248\u003C/span>:+   \u003Cspan class=\"hljs-number\">109\u003C/span>                ,[\u003Cspan class=\"hljs-number\">4\u003C/span>  *\u003Cspan class=\"hljs-number\">7\u003C/span>            *\u003Cspan class=\"hljs-number\">9\u003C/span>      ]:   \u003Cspan class=\"hljs-number\">109\u003C/span>         ,[\u003Cspan class=\"hljs-number\">9\u003C/span>       \n*\u003Cspan class=\"hljs-number\">17\u003C/span>         +\u003Cspan class=\"hljs-number\">5\u003C/span>]         :\u003Cspan class=\"hljs-number\">17\u003C/span>      ,[   \u003Cspan class=\"hljs-number\">184\u003C/span>]:\u003Cspan class=\"hljs-number\">15\u003C/span>,\u003Cspan class=\"hljs-number\">244\u003C/span>  :\u003Cspan class=\"hljs-number\">87\u003C/span>                 ,[  \u003Cspan class=\"hljs-number\">29\u003C/span>*          \u003Cspan class=\"hljs-number\">9\u003C/span>]:      \u003Cspan class=\"hljs-number\">84\u003C/span>   ,[+         \u003Cspan class=\"hljs-number\">263\u003C/span>       \n ]:+        \u003Cspan class=\"hljs-number\">22\u003C/span>,          [\u003Cspan class=\"hljs-number\">2\u003C/span>*    \u003Cspan class=\"hljs-number\">131\u003C/span>  ]:+       \u003Cspan class=\"hljs-number\">13\u003C/span>}  ,D=               \u003Cspan class=\"hljs-string\">`7*   dj=         }&#x27;       (\u003Cspan class=\"hljs-subst\">${  V(\u003Cspan class=\"hljs-number\">4\u003C/span>         )}\u003C/span>G       \n tCIFRsTb?  T[GpO%\u003Cspan class=\"hljs-subst\">${V(    \u003Cspan class=\"hljs-number\">1\u003C/span>)}\u003C/span>7\\&quot;o.H  !vd       \u003Cspan class=\"hljs-subst\">${V  (\u003Cspan class=\"hljs-number\">1\u003C/span>)}\u003C/span>FdZ&lt;Q  FsM\u003Cspan class=\"hljs-subst\">${V(\u003Cspan class=\"hljs-number\">1\u003C/span>)}\u003C/span>    .aTcH1!&#x27;   ~~        ~~  ~~~          ~s-&#x27;I&#x27;aZ+\n   ($}?g3/    RPN0h#S;     )`\u003C/span>,S=[   ...         \u003Cspan class=\"hljs-title function_\">t\u003C/span>(\u003Cspan class=\"hljs-string\">`   (W=\u003Cspan class=\"hljs-subst\">${W}\u003C/span>  )()`\u003C/span>)],C=      \u003Cspan class=\"hljs-function\">\u003Cspan class=\"hljs-params\">s\u003C/span>=&gt;\u003C/span>[...  \u003Cspan class=\"hljs-title function_\">t\u003C/span>(s        )]  [\u003Cspan class=\"hljs-number\">0\u003C/span>,           \u003Cspan class=\"hljs-string\">&#x27;reduce&#x27;\u003C/span>\n                                                                                       ](         \u003Cspan class=\"hljs-function\">(\u003Cspan class=\"hljs-params\">A,                       \n                                                                                      c,\u003C/span>)          =&gt;\u003C/span>                       \n                                                                                      A*           \u003Cspan class=\"hljs-number\">94n\u003C/span>                      \n +\u003Cspan class=\"hljs-title class_\">BigInt\u003C/span>(c.\u003Cspan class=\"hljs-title function_\">charCodeAt\u003C/span>(\u003Cspan class=\"hljs-number\">0\u003C/span>)-\u003Cspan class=\"hljs-number\">33\u003C/span>),\u003Cspan class=\"hljs-number\">0n\u003C/span>),\u003Cspan class=\"hljs-function\">(\u003Cspan class=\"hljs-params\">by,YK,..._\u003C/span>)=&gt;\u003C/span>\u003Cspan class=\"hljs-variable language_\">console\u003C/span>.\u003Cspan class=\"hljs-title function_\">log\u003C/span>([...(\u003Cspan class=\"hljs-title function_\">C\u003C/span>(_.\u003Cspan class=\"hljs-title function_\">join\u003C/span>(\u003Cspan class=\"hljs-string\">&#x27;&#x27;\u003C/span>))+\u003Cspan class=\"hljs-title function_\">C\u003C/span>(D))[\u003Cspan class=\"hljs-string\">&#x27;to&#x27;\u003C/span>            +\u003Cspan class=\"hljs-string\">&#x27;String&#x27;\u003C/span>](\u003Cspan class=\"hljs-number\">12\u003C/span>)].\u003Cspan class=\"hljs-title function_\">flatMap\u003C/span>(\n   \u003Cspan class=\"hljs-function\">(\u003Cspan class=\"hljs-params\">c,i\u003C/span>)=&gt;\u003C/span>(X=M[i-\u003Cspan class=\"hljs-number\">33\u003C/span>]??\u003Cspan class=\"hljs-built_in\">parseInt\u003C/span>(c,\u003Cspan class=\"hljs-number\">12\u003C/span>)+\u003Cspan class=\"hljs-number\">1\u003C/span>,i%\u003Cspan class=\"hljs-number\">2\u003C/span>?\u003Cspan class=\"hljs-string\">&#x27;\\x20&#x27;\u003C/span>.\u003Cspan class=\"hljs-title function_\">repeat\u003C/span>(X):S.\u003Cspan class=\"hljs-title function_\">splice\u003C/span>(\u003Cspan class=\"hljs-number\">0\u003C/span>,X))).\u003Cspan class=\"hljs-title function_\">join\u003C/span>(\u003Cspan class=\"hljs-string\">&#x27;&#x27;\u003C/span>)[R]             (\u003Cspan class=\"hljs-regexp\">/(.{124})/g\u003C/span>,\u003Cspan class=\"hljs-string\">&#x27;$1\\n&#x27;\u003C/span>)))  \n                                                                                                                            \n         (     W, e,     E, m, p, o, w, e, r,     L, e, g, a, l,     P, r, o, f, e, s, s, i, o, n, a, l, s     ))()\n\u003C/code>\u003C/pre>\n\u003C/div>\n\n\u003Cp>これを適当な処理系で実行すると、ソースコードと同じ内容が出力される。\u003C/p>\n\u003Cpre>\u003Ccode class=\"language-shell\">\u003Cspan class=\"hljs-meta prompt_\">$ \u003C/span>\u003Cspan class=\"language-bash\">node quine.js &gt; output\u003C/span>\n\u003Cspan class=\"hljs-meta prompt_\">$ \u003C/span>\u003Cspan class=\"language-bash\">diff -s quine.js output\u003C/span>\nFiles quine.js and output are identical\n\u003C/code>\u003C/pre>\n\u003Cp>見ての通り、ポイントは最後の行。元のロゴにある「WE EMPOWER LEGAL PROFESSIONALS」という文字列が、それぞれ一文字ずつ変数として定義され、関数呼び出しの引数リストを形成している。もちろんこれは無意味な装飾ではない。このプログラムは全体で、この引数の文字列を結合して得られる文字列をデコードし、ロゴの形に整形されたソースコードを復元するものになっている。\u003C/p>\n\u003Cp>prettifyしたソースコードを見れば分かるように、このコードには全体で1文しか登場しない。これでセミコロン有り派もセミコロン無し派も満足の、いわば\u003Ca href=\"/mono/JavaScript\" class=\"monolog-link\"  title=\"JavaScript\">JavaScript\u003C/a>版広辞苑前文方式が達成されている（適当）（後付け）。\u003C/p>\n\u003Cpre>\u003Ccode class=\"language-js\">(W = \u003Cspan class=\"hljs-function\">() =&gt;\u003C/span>\n  ((E = \u003Cspan class=\"hljs-string\">&#x27;!    !!!!!O5&#x27;\u003C/span>),\n  (m = \u003Cspan class=\"hljs-string\">&#x27;f      NZ3          ~Wff&#x27;\u003C/span>),\n  (p = \u003Cspan class=\"hljs-string\">&#x27;    Pxr@&amp;PB,       &#x27;\u003C/span>),\n  (R = \u003Cspan class=\"hljs-string\">&#x27;replace&#x27;\u003C/span>),\n  (e = \u003Cspan class=\"hljs-string\">`PlPqU\\n#1e         `\u003C/span>),\n  (V = \u003Cspan class=\"hljs-function\">(\u003Cspan class=\"hljs-params\">cc\u003C/span>) =&gt;\u003C/span> \u003Cspan class=\"hljs-string\">&#x27;!&#x27;\u003C/span>.\u003Cspan class=\"hljs-title function_\">repeat\u003C/span>(cc * \u003Cspan class=\"hljs-number\">8\u003C/span>)),\n  (r = \u003Cspan class=\"hljs-string\">&#x27;/d{z@U}8&#x27;\u003C/span>),\n  (t = \u003Cspan class=\"hljs-function\">(\u003Cspan class=\"hljs-params\">s\u003C/span>) =&gt;\u003C/span> s[R](\u003Cspan class=\"hljs-regexp\">/\\s/g\u003C/span>s, \u003Cspan class=\"hljs-string\">&#x27;&#x27;\u003C/span>)),\n  (l = \u003Cspan class=\"hljs-string\">`0R@_\\nJi{         @`\u003C/span>),\n  (o = \u003Cspan class=\"hljs-string\">&#x27;*  )r     M&gt;9         \\\\           #&#x27;\u003C/span>),\n  (L = \u003Cspan class=\"hljs-string\">`            %Sn  _PW       \\nR+`\u003C/span>),\n  (i = \u003Cspan class=\"hljs-string\">&#x27;8K             u1  99X    &quot;&#x27;\u003C/span>),\n  (g = \u003Cspan class=\"hljs-string\">&quot;7I            \\\\?  &#x27;V            @0&quot;\u003C/span>),\n  (n = \u003Cspan class=\"hljs-string\">&#x27;9p         #b_         &lt;7             s&#x27;\u003C/span>),\n  (P = \u003Cspan class=\"hljs-string\">&#x27;V8         S;{         @B             x&#x27;\u003C/span>),\n  (f = \u003Cspan class=\"hljs-string\">`2J  ahw       \\ni@[         `\u003C/span>),\n  (a = \u003Cspan class=\"hljs-string\">&#x27;HUHe.  6~   V&#x27;\u003C/span>),\n  (w = \u003Cspan class=\"hljs-string\">&#x27;    +n    \\\\    5e~         LE&#x27;\u003C/span>),\n  (s = \u003Cspan class=\"hljs-string\">&#x27;CI   Av             oB    I$     &#x27;\u003C/span>),\n  (M = {\n    \u003Cspan class=\"hljs-number\">264\u003C/span>: \u003Cspan class=\"hljs-number\">135\u003C/span>, \u003Cspan class=\"hljs-number\">259\u003C/span>: \u003Cspan class=\"hljs-number\">24\u003C/span>, \u003Cspan class=\"hljs-number\">32\u003C/span>: \u003Cspan class=\"hljs-number\">13\u003C/span>, \u003Cspan class=\"hljs-number\">18\u003C/span>: \u003Cspan class=\"hljs-number\">13\u003C/span>, \u003Cspan class=\"hljs-number\">8\u003C/span>: \u003Cspan class=\"hljs-number\">13\u003C/span>, \u003Cspan class=\"hljs-number\">134\u003C/span>: \u003Cspan class=\"hljs-number\">16\u003C/span>, \u003Cspan class=\"hljs-number\">56\u003C/span>: \u003Cspan class=\"hljs-number\">13\u003C/span>, \u003Cspan class=\"hljs-number\">256\u003C/span>: \u003Cspan class=\"hljs-number\">23\u003C/span>, \u003Cspan class=\"hljs-number\">3\u003C/span>: \u003Cspan class=\"hljs-number\">13\u003C/span>, \u003Cspan class=\"hljs-number\">123\u003C/span>: \u003Cspan class=\"hljs-number\">13\u003C/span>, \u003Cspan class=\"hljs-number\">66\u003C/span>: \u003Cspan class=\"hljs-number\">13\u003C/span>, \u003Cspan class=\"hljs-number\">257\u003C/span>: \u003Cspan class=\"hljs-number\">87\u003C/span>,\n    \u003Cspan class=\"hljs-number\">99\u003C/span>: \u003Cspan class=\"hljs-number\">13\u003C/span>, [\u003Cspan class=\"hljs-number\">92\u003C/span>]: \u003Cspan class=\"hljs-number\">13\u003C/span>, \u003Cspan class=\"hljs-number\">248\u003C/span>: +\u003Cspan class=\"hljs-number\">109\u003C/span>, [\u003Cspan class=\"hljs-number\">4\u003C/span> * \u003Cspan class=\"hljs-number\">7\u003C/span> * \u003Cspan class=\"hljs-number\">9\u003C/span>]: \u003Cspan class=\"hljs-number\">109\u003C/span>, [\u003Cspan class=\"hljs-number\">9\u003C/span> * \u003Cspan class=\"hljs-number\">17\u003C/span> + \u003Cspan class=\"hljs-number\">5\u003C/span>]: \u003Cspan class=\"hljs-number\">17\u003C/span>,\n    [\u003Cspan class=\"hljs-number\">184\u003C/span>]: \u003Cspan class=\"hljs-number\">15\u003C/span>, \u003Cspan class=\"hljs-number\">244\u003C/span>: \u003Cspan class=\"hljs-number\">87\u003C/span>, [\u003Cspan class=\"hljs-number\">29\u003C/span> * \u003Cspan class=\"hljs-number\">9\u003C/span>]: \u003Cspan class=\"hljs-number\">84\u003C/span>, [+\u003Cspan class=\"hljs-number\">263\u003C/span>]: +\u003Cspan class=\"hljs-number\">22\u003C/span>, [\u003Cspan class=\"hljs-number\">2\u003C/span> * \u003Cspan class=\"hljs-number\">131\u003C/span>]: +\u003Cspan class=\"hljs-number\">13\u003C/span>,\n  }),\n  (D = \u003Cspan class=\"hljs-string\">`7*   dj=         }&#x27;       (\u003Cspan class=\"hljs-subst\">${V(\u003Cspan class=\"hljs-number\">4\u003C/span>)}\u003C/span>G       \\n tCIFRsTb?  T[GpO%\u003Cspan class=\"hljs-subst\">${V(\u003Cspan class=\"hljs-number\">1\u003C/span>)}\u003C/span>7\\&quot;o.H  !vd       \u003Cspan class=\"hljs-subst\">${V(\u003Cspan class=\"hljs-number\">1\u003C/span>)}\u003C/span>FdZ&lt;Q  FsM\u003Cspan class=\"hljs-subst\">${V(\u003Cspan class=\"hljs-number\">1\u003C/span>)}\u003C/span>    .aTcH1!&#x27;   ~~        ~~  ~~~          ~s-&#x27;I&#x27;aZ+\\n   ($}?g3/    RPN0h#S;     )`\u003C/span>),\n  (S = [...\u003Cspan class=\"hljs-title function_\">t\u003C/span>(\u003Cspan class=\"hljs-string\">`   (W=\u003Cspan class=\"hljs-subst\">${W}\u003C/span>  )()`\u003C/span>)]),\n  (C = \u003Cspan class=\"hljs-function\">(\u003Cspan class=\"hljs-params\">s\u003C/span>) =&gt;\u003C/span> [...\u003Cspan class=\"hljs-title function_\">t\u003C/span>(s)][(\u003Cspan class=\"hljs-number\">0\u003C/span>, \u003Cspan class=\"hljs-string\">&#x27;reduce&#x27;\u003C/span>)](\u003Cspan class=\"hljs-function\">(\u003Cspan class=\"hljs-params\">A, c\u003C/span>) =&gt;\u003C/span> A * \u003Cspan class=\"hljs-number\">94n\u003C/span> + \u003Cspan class=\"hljs-title class_\">BigInt\u003C/span>(c.\u003Cspan class=\"hljs-title function_\">charCodeAt\u003C/span>(\u003Cspan class=\"hljs-number\">0\u003C/span>) - \u003Cspan class=\"hljs-number\">33\u003C/span>), \u003Cspan class=\"hljs-number\">0n\u003C/span>)),\n  \u003Cspan class=\"hljs-function\">(\u003Cspan class=\"hljs-params\">by, YK, ..._\u003C/span>) =&gt;\u003C/span>\n    \u003Cspan class=\"hljs-variable language_\">console\u003C/span>.\u003Cspan class=\"hljs-title function_\">log\u003C/span>(\n      [...(\u003Cspan class=\"hljs-title function_\">C\u003C/span>(_.\u003Cspan class=\"hljs-title function_\">join\u003C/span>(\u003Cspan class=\"hljs-string\">&#x27;&#x27;\u003C/span>)) + \u003Cspan class=\"hljs-title function_\">C\u003C/span>(D))[\u003Cspan class=\"hljs-string\">&#x27;to&#x27;\u003C/span> + \u003Cspan class=\"hljs-string\">&#x27;String&#x27;\u003C/span>](\u003Cspan class=\"hljs-number\">12\u003C/span>)]\n        .\u003Cspan class=\"hljs-title function_\">flatMap\u003C/span>(\u003Cspan class=\"hljs-function\">(\u003Cspan class=\"hljs-params\">c, i\u003C/span>) =&gt;\u003C/span> ((X = M[i - \u003Cspan class=\"hljs-number\">33\u003C/span>] ?? \u003Cspan class=\"hljs-built_in\">parseInt\u003C/span>(c, \u003Cspan class=\"hljs-number\">12\u003C/span>) + \u003Cspan class=\"hljs-number\">1\u003C/span>), i % \u003Cspan class=\"hljs-number\">2\u003C/span> ? \u003Cspan class=\"hljs-string\">&#x27;\\x20&#x27;\u003C/span>.\u003Cspan class=\"hljs-title function_\">repeat\u003C/span>(X) : S.\u003Cspan class=\"hljs-title function_\">splice\u003C/span>(\u003Cspan class=\"hljs-number\">0\u003C/span>, X)))\n        .\u003Cspan class=\"hljs-title function_\">join\u003C/span>(\u003Cspan class=\"hljs-string\">&#x27;&#x27;\u003C/span>)\n        [R](\u003Cspan class=\"hljs-regexp\">/(.{124})/g\u003C/span>, \u003Cspan class=\"hljs-string\">&#x27;$1\\n&#x27;\u003C/span>),\n    ))(W, e, E, m, p, o, w, e, r, L, e, g, a, l, P, r, o, f, e, s, s, i, o, n, a, l, s))();\n\u003C/code>\u003C/pre>\n\u003Cp>データをデコードし文字列生成する処理自体はそこまで難しくないのだが、その処理全体をさらにロゴの形に整形しても動かないといけない（たとえば \u003Ccode>(x)⎵=&gt;++x\u003C/code> という位置にスペースが入るのはよくても \u003Ccode>(x)=⎵&gt;++x\u003C/code> は文法エラーになる）ので、その調整が作る上での本丸であった。まずデータを圧縮しいかにコードを短くするかを考え、極限まで短くした後は、都合の悪いところでコードが切れないようにひたすら \u003Ccode>array.reduce\u003C/code> → \u003Ccode>array[0, &#39;reduce&#39;]\u003C/code> みたいな書き換えを頑張って思いつく作業を繰り返し、最後にサインを入れたり変数の順番を入れ替えたりして見栄えを整える微調整を施して完成。\u003C/p>\n\u003Cp>ちなみに、ロゴの形のデータは、画像ファイルを用意して、ImageMagickで\u003Ca href=\"https://ja.wikipedia.org/wiki/PNM_(%E7%94%BB%E5%83%8F%E3%83%95%E3%82%A9%E3%83%BC%E3%83%9E%E3%83%83%E3%83%88)\">PNM\u003C/a>に変換すると比較的簡単に得られる。\u003C/p>\n\u003Cpre>\u003Ccode class=\"language-sh\">height=30\nmagick logo.png -background white -flatten -geometry x\u003Cspan class=\"hljs-variable\">${height}\u003C/span> -compress none logo.pbm\n\u003C/code>\u003C/pre>\n\u003Cp>作ってみて、データ部分とロジック部分の比率がちょっとデータに寄りすぎかなあ、と思うけれど、そもそも相場を知らないので、まあいいや。\u003C/p>\n","久々にQuineを書いた。Quine（クワイン）というのは、プログラミングを使ったアートみたいなもので、実行すると出力される内容が自分自身のソースコードと一致する自己言及的なプログラムのこと。たとえば print(&quot;hello&quot;) という内容のプログラムはQuineではない。これを実行すると、たぶん hello と出力され、当然 print(&quot;hello&quot;) という文字列とは異なる。今度は不足を補おうとして print(&#39;print(&quot;hello&quot;)&#39;) というプログラムを書いてみても、あるいはこの調子でどんどん長くしていっても、やっぱり一致することはない。このように、Quineを書くこと自体がまずそんなに簡単ではない。その要件を満たしたうえで、ソースコードの見た目が何らかのデザインになっているとか、一工夫加えることでアートとして完成する。なお、あまりに知名度が低すぎて、Quineを書いて人に見せるときに自分でQuineの凄さを説明しないと何も伝わらない、という致命的な欠点があることで知られている（嘘）。今回書いたのはLegalsca",{"to":25,"one_hop_Quine":43,"one_hop_JavaScript":45,"one_hop_Legalscape":128},{"urlPath":7,"entities":26},[27,31,34],{"name":13,"nameSegmented":28,"kind":18,"urlPath":19,"tags":29,"isEmpty":30},[13],[],true,{"name":14,"nameSegmented":32,"kind":18,"urlPath":21,"tags":33,"isEmpty":30},[14],[],{"name":35,"nameSegmented":36,"kind":37,"urlPath":38,"historyURL":39,"lastModified":40,"attributes":41,"tags":42,"isEmpty":30},"Legalscape",[35],"組織","/mono/Legalscape","https://github.com/kissge/yo.eki.do/commits/master/mono/組織/Legalscape.md",["Date","2024-06-01T16:59:04.000Z"],{},[],{"urlPath":19,"entities":44},[],{"urlPath":21,"entities":46},[47,74,96,114],{"name":48,"nameSegmented":49,"kind":6,"urlPath":63,"historyURL":64,"lastModified":65,"attributes":66,"tags":70,"isEmpty":73},"ja-JP-u-ca-japaneseって何？ UnicodeのCLDRを読んでみよう（あるいは、JavaScriptで和暦を得る簡単なテクについて）",[50,51,52,53,54,55,56,57,58,59,60,61,62],"ja-JP-u-ca-japaneseって","何？"," Unicodeの","CLDRを","読んで","みよう","（あるいは、","JavaScriptで","和暦を","得る","簡単な","テクに","ついて）","/notes/cldr","https://github.com/kissge/yo.eki.do/commits/master/notes/cldr.md",["Date","2022-06-11T11:32:20.000Z"],{"title":48,"date":67,"tags":68},["Date","2022-02-19T02:41:00.000Z"],[69],"Unicode",[71],{"name":69,"kind":18,"urlPath":72},"/mono/Unicode",false,{"name":75,"nameSegmented":76,"kind":77,"urlPath":78,"historyURL":79,"lastModified":80,"attributes":81,"tags":89,"isEmpty":73},"monolog",[75],"ソフトウェア","/mono/monolog","https://github.com/kissge/yo.eki.do/commits/master/mono/ソフトウェア/monolog.md",["Date","2022-12-03T14:51:29.000Z"],{"definition":82,"date":83,"url":84,"tags":85},"「もの」のログを実現する、あなたが今見ているこのWebサイトを構築したソフトウェア",["Date","2020-12-27T02:47:33.000Z"],"https://github.com/kissge/monolog",[86,87,88],"開発したもの","Svelte","TypeScript",[90,92,94],{"name":86,"kind":18,"urlPath":91},"/mono/%E9%96%8B%E7%99%BA%E3%81%97%E3%81%9F%E3%82%82%E3%81%AE",{"name":87,"kind":18,"urlPath":93},"/mono/Svelte",{"name":88,"kind":18,"urlPath":95},"/mono/TypeScript",{"name":97,"nameSegmented":98,"kind":6,"urlPath":103,"historyURL":104,"lastModified":105,"attributes":106,"tags":111,"isEmpty":73},"来年こそは届いてほしいスマートグラス「Vue」",[99,100,101,102],"来年こそは","届いて","ほしい","スマートグラス「Vue」","/notes/crowdfunding-vue","https://github.com/kissge/yo.eki.do/commits/master/notes/crowdfunding-vue.md",["Date","2022-06-11T07:34:19.000Z"],{"from":107,"title":97,"date":108,"tags":109},"wordpress",["Date","2018-12-13T00:17:07.000Z"],[110],"アドベントカレンダー",[112],{"name":110,"kind":18,"urlPath":113},"/mono/%E3%82%A2%E3%83%89%E3%83%99%E3%83%B3%E3%83%88%E3%82%AB%E3%83%AC%E3%83%B3%E3%83%80%E3%83%BC",{"name":115,"nameSegmented":116,"kind":6,"urlPath":120,"historyURL":121,"lastModified":122,"attributes":123,"tags":126,"isEmpty":73},"Emacs: re-builder + foreign-regexp.elでたのしい正規表現",[117,118,119],"Emacs: re-builder + foreign-regexp.elで","たのしい","正規表現","/notes/foreign-regexp-el","https://github.com/kissge/yo.eki.do/commits/master/notes/foreign-regexp-el.md",["Date","2022-06-11T07:52:23.000Z"],{"from":107,"title":115,"date":124,"tags":125},["Date","2014-12-19T23:30:53.000Z"],[110],[127],{"name":110,"kind":18,"urlPath":113},{"urlPath":38,"entities":129},[130,142,159,174],{"name":131,"nameSegmented":132,"kind":6,"urlPath":135,"historyURL":136,"lastModified":137,"attributes":138,"tags":141,"isEmpty":73},"VAIO SX12 ALL BLACK EDITIONを買った",[133,134],"VAIO SX12 ALL BLACK EDITIONを","買った","/notes/vaio-sx12","https://github.com/kissge/yo.eki.do/commits/master/notes/vaio-sx12.md",["Date","2022-12-03T14:52:44.000Z"],{"title":131,"date":139,"header":140},["Date","2022-12-03T14:01:38.000Z"],"https://vaio.com/products/allblack_sx12/images/img_main.png",[],{"name":143,"nameSegmented":144,"kind":6,"urlPath":145,"historyURL":146,"lastModified":147,"attributes":148,"tags":154,"isEmpty":73},"Introduction to Legal NLP",[143],"/notes/lnlp","https://github.com/kissge/yo.eki.do/commits/master/notes/lnlp.md",["Date","2023-03-04T14:34:01.000Z"],{"title":143,"date":149,"lang":150,"slides":30,"tags":151},["Date","2022-09-04T03:30:00.000Z"],"en",[152,153],"NLP","LegalTech",[155,157],{"name":152,"kind":18,"urlPath":156},"/mono/NLP",{"name":153,"kind":18,"urlPath":158},"/mono/LegalTech",{"name":160,"nameSegmented":161,"kind":6,"urlPath":165,"historyURL":166,"lastModified":167,"attributes":168,"tags":171,"isEmpty":73},"PDFと、出版社と、私",[162,163,164],"PDFと、","出版社と、","私","/notes/pdf-publisher-and-me","https://github.com/kissge/yo.eki.do/commits/master/notes/pdf-publisher-and-me.md",["Date","2022-09-04T05:58:48.000Z"],{"title":160,"date":169,"tags":170},["Date","2021-12-23T05:00:00.000Z"],[110,153],[172,173],{"name":110,"kind":18,"urlPath":113},{"name":153,"kind":18,"urlPath":158},{"name":175,"nameSegmented":176,"kind":6,"urlPath":180,"historyURL":181,"lastModified":182,"attributes":183,"tags":186,"isEmpty":73},"リーガルリサーチシステム「Legalscape」の技術スタック2021",[177,178,179],"リーガルリサーチシステム","「Legalscape」の","技術スタック2021","/notes/legalscape-tech-stack","https://github.com/kissge/yo.eki.do/commits/master/notes/legalscape-tech-stack.md",["Date","2022-06-11T07:33:39.000Z"],{"title":175,"date":184,"tags":185},["Date","2021-12-02T00:00:00.000Z"],[110],[187],{"name":110,"kind":18,"urlPath":113}],"uses":{"url":1}}]}
