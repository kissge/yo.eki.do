<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" href="/images/favicon.svg" type="image/svg+xml" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.5.1/styles/github.min.css" />
    <meta http-equiv="content-security-policy" content=""><title>マルチブート覚書 - 2015-11-04 | 葉月夜堂</title><link href="https://twitter.com/p_km" rel="me" data-svelte="svelte-10crdf0">
    <link rel="webmention" href="https://webmention.io/sveltekit-prerender/webmention" data-svelte="svelte-10crdf0">
    <link rel="pingback" href="https://webmention.io/sveltekit-prerender/xmlrpc" data-svelte="svelte-10crdf0"><meta property="og:type" content="article" data-svelte="svelte-6t30ru"><meta property="og:title" content="マルチブート覚書 - 2015-11-04 | 葉月夜堂" data-svelte="svelte-6t30ru"><meta property="og:description" content="Change the partition size Use gparted from external disk (e.g., Ubuntu Live USB disk) and adjust partition sizes as you want. note: gparted has bugs around handling HFS, so it behaves as if it has hung while it is moving a partition that contains HFS. Be patient and let it work. It may take more than 2 hours. If Windows won’t boot after this, you have to either reconfigure legacy MBR or rebuild BCD. Reconfigure MBR Use gptsync from external disk. Rebuild BCD Use fdisk and mark Windows partition as active. T" data-svelte="svelte-6t30ru"><meta property="og:site_name" content="葉月夜堂" data-svelte="svelte-6t30ru"><meta property="og:image" content="http://sveltekit-prerender/images/favicon.svg" data-svelte="svelte-6t30ru">
	<link rel="stylesheet" href="/_app/immutable/assets/pages/__layout.svelte-211fd336.css">
	<link rel="stylesheet" href="/_app/immutable/assets/time.svelte_svelte_type_style_lang-61ea3f89.css">
	<link rel="stylesheet" href="/_app/immutable/assets/pages/_...entity_.svelte-1f397eed.css">
	<link rel="modulepreload" href="/_app/immutable/start-c45c172a.js">
	<link rel="modulepreload" href="/_app/immutable/chunks/index-7416df8b.js">
	<link rel="modulepreload" href="/_app/immutable/chunks/singletons-d1fb5791.js">
	<link rel="modulepreload" href="/_app/immutable/pages/__layout.svelte-2bb677a8.js">
	<link rel="modulepreload" href="/_app/immutable/chunks/time.svelte_svelte_type_style_lang-37f163cc.js">
	<link rel="modulepreload" href="/_app/immutable/pages/_...entity_.svelte-513c3435.js">
	<link rel="modulepreload" href="/_app/immutable/chunks/tags-0bf7833f.js">
  </head>
  <body>
    <div>




<nav><ul><li><a sveltekit:prefetch href="/">葉月夜堂</a>
      </li><li><a sveltekit:prefetch href="/about">about</a>
      </li></ul></nav>



<div class="nav-background svelte-nthksl isHeaderInView" style=""></div>

<main><article data-kind="note" class="svelte-nthksl"><header class="svelte-nthksl"><h1 class="svelte-nthksl">マルチブート覚書</h1>

      

      <section class="meta svelte-nthksl"><p class="svelte-nthksl"><time title="6 年半前" class="svelte-5ni4x2">Tue Nov 03 2015 23:49:51 GMT+0000 (Coordinated Universal Time)</time></p>

        <p class="svelte-nthksl"><a href="https://github.com/kissge/yo.eki.do/commits/master/notes/multiboot.md">更新履歴</a></p></section>

      

      <section class="header-image svelte-nthksl" style=""></section></header>

    <section class="body svelte-nthksl"><!-- HTML_TAG_START --><h1 id="change-the-partition-size">Change the partition size</h1>
<ol>
<li>Use <code>gparted</code> from external disk (e.g., Ubuntu Live USB disk) and adjust partition sizes as you want.<ul>
<li>note: <code>gparted</code> has bugs around handling HFS, so it behaves as if it has hung while it is moving a partition that contains HFS. <strong>Be patient and let it work</strong>. It may take more than 2 hours.</li>
</ul>
</li>
<li>If Windows won’t boot after this, you have to either reconfigure legacy MBR or rebuild BCD.</li>
</ol>
<h1 id="reconfigure-mbr">Reconfigure MBR</h1>
<ol>
<li>Use <code>gptsync</code> from external disk.</li>
</ol>
<h1 id="rebuild-bcd">Rebuild BCD</h1>
<ol>
<li>Use <code>fdisk</code> and mark Windows partition as active.<ul>
<li>This activeness seems not exclusive; i.e. more than one partition can be active at the same time. I’m not sure this causes any problems.</li>
</ul>
</li>
<li>Boot from Windows installation disk.</li>
<li>Proceed to advance startup options and launch Command Prompt.</li>
<li>Run <code>bootrec /RebuildBcd</code>. (you have to type <code>y</code> once, in most cases)</li>
<li>Reactivate appropriate partition if necessary.</li>
</ol>
<h1 id="restore-initial-bootloader">Restore initial bootloader</h1>
<ol>
<li>Copy first 446 bytes from another disk; e.g. <code>sudo dd if=/dev/sdc of=/dev/sda bs=446 count=1</code></li>
</ol>
<!-- HTML_TAG_END --></section>

    

    <section class="mentions svelte-19gm1ik"><section class="reaction svelte-19gm1ik"><a href="https://twitter.com/intent/tweet?url=" class="svelte-19gm1ik" style="background-image: url(/_app/immutable/assets/message-circle-c0b45d48.svg); color: #3579d1;"><small class="svelte-19gm1ik">Twitterで</small>
        <span class="svelte-19gm1ik">コメントする</span></a></section>

  <h1 class="svelte-19gm1ik">Mentions</h1>
  <ol reversed class="svelte-19gm1ik loading"></ol>
</section></article>
</main>

<footer>Built with <a href="https://github.com/kissge/monolog">monolog</a>
</footer>


		<script type="module" data-sveltekit-hydrate="sra0ey">
		import { start } from "/_app/immutable/start-c45c172a.js";
		start({
			target: document.querySelector('[data-sveltekit-hydrate="sra0ey"]').parentNode,
			paths: {"base":"","assets":""},
			session: {},
			route: true,
			spa: false,
			trailing_slash: "always",
			hydrate: {
				status: 200,
				error: null,
				nodes: [0, 2],
				params: {entity:"notes\u002Fmultiboot\u002F"},
				routeId: "[...entity]"
			}
		});
	</script><script type="application/json" sveltekit:data-type="props">{"entity":{"name":"マルチブート覚書","nameSegmented":["マルチブート覚書"],"kind":"note","urlPath":"/notes/multiboot","historyURL":"https://github.com/kissge/yo.eki.do/commits/master/notes/multiboot.md","lastModified":"2022-06-11T08:16:13.000Z","attributes":{"from":"wordpress","title":"マルチブート覚書","date":"2015-11-03T23:49:51.000Z"},"tags":[],"body":"\u003Ch1 id=\"change-the-partition-size\">Change the partition size\u003C/h1>\n\u003Col>\n\u003Cli>Use \u003Ccode>gparted\u003C/code> from external disk (e.g., Ubuntu Live USB disk) and adjust partition sizes as you want.\u003Cul>\n\u003Cli>note: \u003Ccode>gparted\u003C/code> has bugs around handling HFS, so it behaves as if it has hung while it is moving a partition that contains HFS. \u003Cstrong>Be patient and let it work\u003C/strong>. It may take more than 2 hours.\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>If Windows won’t boot after this, you have to either reconfigure legacy MBR or rebuild BCD.\u003C/li>\n\u003C/ol>\n\u003Ch1 id=\"reconfigure-mbr\">Reconfigure MBR\u003C/h1>\n\u003Col>\n\u003Cli>Use \u003Ccode>gptsync\u003C/code> from external disk.\u003C/li>\n\u003C/ol>\n\u003Ch1 id=\"rebuild-bcd\">Rebuild BCD\u003C/h1>\n\u003Col>\n\u003Cli>Use \u003Ccode>fdisk\u003C/code> and mark Windows partition as active.\u003Cul>\n\u003Cli>This activeness seems not exclusive; i.e. more than one partition can be active at the same time. I’m not sure this causes any problems.\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>Boot from Windows installation disk.\u003C/li>\n\u003Cli>Proceed to advance startup options and launch Command Prompt.\u003C/li>\n\u003Cli>Run \u003Ccode>bootrec /RebuildBcd\u003C/code>. (you have to type \u003Ccode>y\u003C/code> once, in most cases)\u003C/li>\n\u003Cli>Reactivate appropriate partition if necessary.\u003C/li>\n\u003C/ol>\n\u003Ch1 id=\"restore-initial-bootloader\">Restore initial bootloader\u003C/h1>\n\u003Col>\n\u003Cli>Copy first 446 bytes from another disk; e.g. \u003Ccode>sudo dd if=/dev/sdc of=/dev/sda bs=446 count=1\u003C/code>\u003C/li>\n\u003C/ol>\n","headline":"Change the partition size Use gparted from external disk (e.g., Ubuntu Live USB disk) and adjust partition sizes as you want. note: gparted has bugs around handling HFS, so it behaves as if it has hung while it is moving a partition that contains HFS. Be patient and let it work. It may take more than 2 hours. If Windows won’t boot after this, you have to either reconfigure legacy MBR or rebuild BCD. Reconfigure MBR Use gptsync from external disk. Rebuild BCD Use fdisk and mark Windows partition as active. T","links":{"to":{"urlPath":"/notes/multiboot","entities":[]},"from":{"urlPath":"/notes/multiboot","entities":[]},"kind":{"urlPath":"/notes/multiboot","entities":[]}}}}</script></div>
  </body>
</html>
